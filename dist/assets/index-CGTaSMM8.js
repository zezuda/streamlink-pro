function m_(i,t){for(var r=0;r<t.length;r++){const o=t[r];if(typeof o!="string"&&!Array.isArray(o)){for(const a in o)if(a!=="default"&&!(a in i)){const u=Object.getOwnPropertyDescriptor(o,a);u&&Object.defineProperty(i,a,u.get?u:{enumerable:!0,get:()=>o[a]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function r(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(a){if(a.ep)return;a.ep=!0;const u=r(a);fetch(a.href,u)}})();function Ep(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Va={exports:{}},Ti={},Wa={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uf;function g_(){if(uf)return te;uf=1;var i=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),y=Symbol.iterator;function _(S){return S===null||typeof S!="object"?null:(S=y&&S[y]||S["@@iterator"],typeof S=="function"?S:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,D={};function P(S,A,Z){this.props=S,this.context=A,this.refs=D,this.updater=Z||T}P.prototype.isReactComponent={},P.prototype.setState=function(S,A){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,A,"setState")},P.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function Q(){}Q.prototype=P.prototype;function G(S,A,Z){this.props=S,this.context=A,this.refs=D,this.updater=Z||T}var ee=G.prototype=new Q;ee.constructor=G,R(ee,P.prototype),ee.isPureReactComponent=!0;var he=Array.isArray,He=Object.prototype.hasOwnProperty,me={current:null},Se={key:!0,ref:!0,__self:!0,__source:!0};function Ke(S,A,Z){var ie,le={},ae=null,_e=null;if(A!=null)for(ie in A.ref!==void 0&&(_e=A.ref),A.key!==void 0&&(ae=""+A.key),A)He.call(A,ie)&&!Se.hasOwnProperty(ie)&&(le[ie]=A[ie]);var fe=arguments.length-2;if(fe===1)le.children=Z;else if(1<fe){for(var ke=Array(fe),mt=0;mt<fe;mt++)ke[mt]=arguments[mt+2];le.children=ke}if(S&&S.defaultProps)for(ie in fe=S.defaultProps,fe)le[ie]===void 0&&(le[ie]=fe[ie]);return{$$typeof:i,type:S,key:ae,ref:_e,props:le,_owner:me.current}}function Tt(S,A){return{$$typeof:i,type:S.type,key:A,ref:S.ref,props:S.props,_owner:S._owner}}function wt(S){return typeof S=="object"&&S!==null&&S.$$typeof===i}function Gt(S){var A={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(Z){return A[Z]})}var xt=/\/+/g;function pt(S,A){return typeof S=="object"&&S!==null&&S.key!=null?Gt(""+S.key):A.toString(36)}function Rt(S,A,Z,ie,le){var ae=typeof S;(ae==="undefined"||ae==="boolean")&&(S=null);var _e=!1;if(S===null)_e=!0;else switch(ae){case"string":case"number":_e=!0;break;case"object":switch(S.$$typeof){case i:case t:_e=!0}}if(_e)return _e=S,le=le(_e),S=ie===""?"."+pt(_e,0):ie,he(le)?(Z="",S!=null&&(Z=S.replace(xt,"$&/")+"/"),Rt(le,A,Z,"",function(mt){return mt})):le!=null&&(wt(le)&&(le=Tt(le,Z+(!le.key||_e&&_e.key===le.key?"":(""+le.key).replace(xt,"$&/")+"/")+S)),A.push(le)),1;if(_e=0,ie=ie===""?".":ie+":",he(S))for(var fe=0;fe<S.length;fe++){ae=S[fe];var ke=ie+pt(ae,fe);_e+=Rt(ae,A,Z,ke,le)}else if(ke=_(S),typeof ke=="function")for(S=ke.call(S),fe=0;!(ae=S.next()).done;)ae=ae.value,ke=ie+pt(ae,fe++),_e+=Rt(ae,A,Z,ke,le);else if(ae==="object")throw A=String(S),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.");return _e}function Bt(S,A,Z){if(S==null)return S;var ie=[],le=0;return Rt(S,ie,"","",function(ae){return A.call(Z,ae,le++)}),ie}function nt(S){if(S._status===-1){var A=S._result;A=A(),A.then(function(Z){(S._status===0||S._status===-1)&&(S._status=1,S._result=Z)},function(Z){(S._status===0||S._status===-1)&&(S._status=2,S._result=Z)}),S._status===-1&&(S._status=0,S._result=A)}if(S._status===1)return S._result.default;throw S._result}var Re={current:null},z={transition:null},Y={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:z,ReactCurrentOwner:me};function V(){throw Error("act(...) is not supported in production builds of React.")}return te.Children={map:Bt,forEach:function(S,A,Z){Bt(S,function(){A.apply(this,arguments)},Z)},count:function(S){var A=0;return Bt(S,function(){A++}),A},toArray:function(S){return Bt(S,function(A){return A})||[]},only:function(S){if(!wt(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},te.Component=P,te.Fragment=r,te.Profiler=a,te.PureComponent=G,te.StrictMode=o,te.Suspense=m,te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,te.act=V,te.cloneElement=function(S,A,Z){if(S==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+S+".");var ie=R({},S.props),le=S.key,ae=S.ref,_e=S._owner;if(A!=null){if(A.ref!==void 0&&(ae=A.ref,_e=me.current),A.key!==void 0&&(le=""+A.key),S.type&&S.type.defaultProps)var fe=S.type.defaultProps;for(ke in A)He.call(A,ke)&&!Se.hasOwnProperty(ke)&&(ie[ke]=A[ke]===void 0&&fe!==void 0?fe[ke]:A[ke])}var ke=arguments.length-2;if(ke===1)ie.children=Z;else if(1<ke){fe=Array(ke);for(var mt=0;mt<ke;mt++)fe[mt]=arguments[mt+2];ie.children=fe}return{$$typeof:i,type:S.type,key:le,ref:ae,props:ie,_owner:_e}},te.createContext=function(S){return S={$$typeof:d,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},S.Provider={$$typeof:u,_context:S},S.Consumer=S},te.createElement=Ke,te.createFactory=function(S){var A=Ke.bind(null,S);return A.type=S,A},te.createRef=function(){return{current:null}},te.forwardRef=function(S){return{$$typeof:f,render:S}},te.isValidElement=wt,te.lazy=function(S){return{$$typeof:C,_payload:{_status:-1,_result:S},_init:nt}},te.memo=function(S,A){return{$$typeof:g,type:S,compare:A===void 0?null:A}},te.startTransition=function(S){var A=z.transition;z.transition={};try{S()}finally{z.transition=A}},te.unstable_act=V,te.useCallback=function(S,A){return Re.current.useCallback(S,A)},te.useContext=function(S){return Re.current.useContext(S)},te.useDebugValue=function(){},te.useDeferredValue=function(S){return Re.current.useDeferredValue(S)},te.useEffect=function(S,A){return Re.current.useEffect(S,A)},te.useId=function(){return Re.current.useId()},te.useImperativeHandle=function(S,A,Z){return Re.current.useImperativeHandle(S,A,Z)},te.useInsertionEffect=function(S,A){return Re.current.useInsertionEffect(S,A)},te.useLayoutEffect=function(S,A){return Re.current.useLayoutEffect(S,A)},te.useMemo=function(S,A){return Re.current.useMemo(S,A)},te.useReducer=function(S,A,Z){return Re.current.useReducer(S,A,Z)},te.useRef=function(S){return Re.current.useRef(S)},te.useState=function(S){return Re.current.useState(S)},te.useSyncExternalStore=function(S,A,Z){return Re.current.useSyncExternalStore(S,A,Z)},te.useTransition=function(){return Re.current.useTransition()},te.version="18.3.1",te}var cf;function Tu(){return cf||(cf=1,Wa.exports=g_()),Wa.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var df;function __(){if(df)return Ti;df=1;var i=Tu(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(f,m,g){var C,y={},_=null,T=null;g!==void 0&&(_=""+g),m.key!==void 0&&(_=""+m.key),m.ref!==void 0&&(T=m.ref);for(C in m)o.call(m,C)&&!u.hasOwnProperty(C)&&(y[C]=m[C]);if(f&&f.defaultProps)for(C in m=f.defaultProps,m)y[C]===void 0&&(y[C]=m[C]);return{$$typeof:t,type:f,key:_,ref:T,props:y,_owner:a.current}}return Ti.Fragment=r,Ti.jsx=d,Ti.jsxs=d,Ti}var hf;function y_(){return hf||(hf=1,Va.exports=__()),Va.exports}var v=y_(),F=Tu();const Sp=Ep(F),v_=m_({__proto__:null,default:Sp},[F]);var fo={},Ha={exports:{}},at={},$a={exports:{}},Qa={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ff;function w_(){return ff||(ff=1,(function(i){function t(z,Y){var V=z.length;z.push(Y);e:for(;0<V;){var S=V-1>>>1,A=z[S];if(0<a(A,Y))z[S]=Y,z[V]=A,V=S;else break e}}function r(z){return z.length===0?null:z[0]}function o(z){if(z.length===0)return null;var Y=z[0],V=z.pop();if(V!==Y){z[0]=V;e:for(var S=0,A=z.length,Z=A>>>1;S<Z;){var ie=2*(S+1)-1,le=z[ie],ae=ie+1,_e=z[ae];if(0>a(le,V))ae<A&&0>a(_e,le)?(z[S]=_e,z[ae]=V,S=ae):(z[S]=le,z[ie]=V,S=ie);else if(ae<A&&0>a(_e,V))z[S]=_e,z[ae]=V,S=ae;else break e}}return Y}function a(z,Y){var V=z.sortIndex-Y.sortIndex;return V!==0?V:z.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,f=d.now();i.unstable_now=function(){return d.now()-f}}var m=[],g=[],C=1,y=null,_=3,T=!1,R=!1,D=!1,P=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ee(z){for(var Y=r(g);Y!==null;){if(Y.callback===null)o(g);else if(Y.startTime<=z)o(g),Y.sortIndex=Y.expirationTime,t(m,Y);else break;Y=r(g)}}function he(z){if(D=!1,ee(z),!R)if(r(m)!==null)R=!0,nt(He);else{var Y=r(g);Y!==null&&Re(he,Y.startTime-z)}}function He(z,Y){R=!1,D&&(D=!1,Q(Ke),Ke=-1),T=!0;var V=_;try{for(ee(Y),y=r(m);y!==null&&(!(y.expirationTime>Y)||z&&!Gt());){var S=y.callback;if(typeof S=="function"){y.callback=null,_=y.priorityLevel;var A=S(y.expirationTime<=Y);Y=i.unstable_now(),typeof A=="function"?y.callback=A:y===r(m)&&o(m),ee(Y)}else o(m);y=r(m)}if(y!==null)var Z=!0;else{var ie=r(g);ie!==null&&Re(he,ie.startTime-Y),Z=!1}return Z}finally{y=null,_=V,T=!1}}var me=!1,Se=null,Ke=-1,Tt=5,wt=-1;function Gt(){return!(i.unstable_now()-wt<Tt)}function xt(){if(Se!==null){var z=i.unstable_now();wt=z;var Y=!0;try{Y=Se(!0,z)}finally{Y?pt():(me=!1,Se=null)}}else me=!1}var pt;if(typeof G=="function")pt=function(){G(xt)};else if(typeof MessageChannel<"u"){var Rt=new MessageChannel,Bt=Rt.port2;Rt.port1.onmessage=xt,pt=function(){Bt.postMessage(null)}}else pt=function(){P(xt,0)};function nt(z){Se=z,me||(me=!0,pt())}function Re(z,Y){Ke=P(function(){z(i.unstable_now())},Y)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(z){z.callback=null},i.unstable_continueExecution=function(){R||T||(R=!0,nt(He))},i.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Tt=0<z?Math.floor(1e3/z):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_getFirstCallbackNode=function(){return r(m)},i.unstable_next=function(z){switch(_){case 1:case 2:case 3:var Y=3;break;default:Y=_}var V=_;_=Y;try{return z()}finally{_=V}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(z,Y){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var V=_;_=z;try{return Y()}finally{_=V}},i.unstable_scheduleCallback=function(z,Y,V){var S=i.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?S+V:S):V=S,z){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=V+A,z={id:C++,callback:Y,priorityLevel:z,startTime:V,expirationTime:A,sortIndex:-1},V>S?(z.sortIndex=V,t(g,z),r(m)===null&&z===r(g)&&(D?(Q(Ke),Ke=-1):D=!0,Re(he,V-S))):(z.sortIndex=A,t(m,z),R||T||(R=!0,nt(He))),z},i.unstable_shouldYield=Gt,i.unstable_wrapCallback=function(z){var Y=_;return function(){var V=_;_=Y;try{return z.apply(this,arguments)}finally{_=V}}}})(Qa)),Qa}var pf;function x_(){return pf||(pf=1,$a.exports=w_()),$a.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mf;function C_(){if(mf)return at;mf=1;var i=Tu(),t=x_();function r(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function u(e,n){d(e,n),d(e+"Capture",n)}function d(e,n){for(a[e]=n,e=0;e<n.length;e++)o.add(n[e])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,C={},y={};function _(e){return m.call(y,e)?!0:m.call(C,e)?!1:g.test(e)?y[e]=!0:(C[e]=!0,!1)}function T(e,n,s,l){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return l?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function R(e,n,s,l){if(n===null||typeof n>"u"||T(e,n,s,l))return!0;if(l)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function D(e,n,s,l,c,h,p){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=l,this.attributeNamespace=c,this.mustUseProperty=s,this.propertyName=e,this.type=n,this.sanitizeURL=h,this.removeEmptyString=p}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){P[e]=new D(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];P[n]=new D(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){P[e]=new D(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){P[e]=new D(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){P[e]=new D(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){P[e]=new D(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){P[e]=new D(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){P[e]=new D(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){P[e]=new D(e,5,!1,e.toLowerCase(),null,!1,!1)});var Q=/[\-:]([a-z])/g;function G(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(Q,G);P[n]=new D(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(Q,G);P[n]=new D(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(Q,G);P[n]=new D(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){P[e]=new D(e,1,!1,e.toLowerCase(),null,!1,!1)}),P.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){P[e]=new D(e,1,!1,e.toLowerCase(),null,!0,!0)});function ee(e,n,s,l){var c=P.hasOwnProperty(n)?P[n]:null;(c!==null?c.type!==0:l||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(R(n,s,c,l)&&(s=null),l||c===null?_(n)&&(s===null?e.removeAttribute(n):e.setAttribute(n,""+s)):c.mustUseProperty?e[c.propertyName]=s===null?c.type===3?!1:"":s:(n=c.attributeName,l=c.attributeNamespace,s===null?e.removeAttribute(n):(c=c.type,s=c===3||c===4&&s===!0?"":""+s,l?e.setAttributeNS(l,n,s):e.setAttribute(n,s))))}var he=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,He=Symbol.for("react.element"),me=Symbol.for("react.portal"),Se=Symbol.for("react.fragment"),Ke=Symbol.for("react.strict_mode"),Tt=Symbol.for("react.profiler"),wt=Symbol.for("react.provider"),Gt=Symbol.for("react.context"),xt=Symbol.for("react.forward_ref"),pt=Symbol.for("react.suspense"),Rt=Symbol.for("react.suspense_list"),Bt=Symbol.for("react.memo"),nt=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),z=Symbol.iterator;function Y(e){return e===null||typeof e!="object"?null:(e=z&&e[z]||e["@@iterator"],typeof e=="function"?e:null)}var V=Object.assign,S;function A(e){if(S===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);S=n&&n[1]||""}return`
`+S+e}var Z=!1;function ie(e,n){if(!e||Z)return"";Z=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(I){var l=I}Reflect.construct(e,[],n)}else{try{n.call()}catch(I){l=I}e.call(n.prototype)}else{try{throw Error()}catch(I){l=I}e()}}catch(I){if(I&&l&&typeof I.stack=="string"){for(var c=I.stack.split(`
`),h=l.stack.split(`
`),p=c.length-1,w=h.length-1;1<=p&&0<=w&&c[p]!==h[w];)w--;for(;1<=p&&0<=w;p--,w--)if(c[p]!==h[w]){if(p!==1||w!==1)do if(p--,w--,0>w||c[p]!==h[w]){var x=`
`+c[p].replace(" at new "," at ");return e.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",e.displayName)),x}while(1<=p&&0<=w);break}}}finally{Z=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?A(e):""}function le(e){switch(e.tag){case 5:return A(e.type);case 16:return A("Lazy");case 13:return A("Suspense");case 19:return A("SuspenseList");case 0:case 2:case 15:return e=ie(e.type,!1),e;case 11:return e=ie(e.type.render,!1),e;case 1:return e=ie(e.type,!0),e;default:return""}}function ae(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Se:return"Fragment";case me:return"Portal";case Tt:return"Profiler";case Ke:return"StrictMode";case pt:return"Suspense";case Rt:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Gt:return(e.displayName||"Context")+".Consumer";case wt:return(e._context.displayName||"Context")+".Provider";case xt:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Bt:return n=e.displayName||null,n!==null?n:ae(e.type)||"Memo";case nt:n=e._payload,e=e._init;try{return ae(e(n))}catch{}}return null}function _e(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ae(n);case 8:return n===Ke?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function fe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ke(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function mt(e){var n=ke(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),l=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,h=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return c.call(this)},set:function(p){l=""+p,h.call(this,p)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(p){l=""+p},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function ns(e){e._valueTracker||(e._valueTracker=mt(e))}function pc(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),l="";return e&&(l=ke(e)?e.checked?"true":"false":e.value),e=l,e!==s?(n.setValue(e),!0):!1}function rs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function qo(e,n){var s=n.checked;return V({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function mc(e,n){var s=n.defaultValue==null?"":n.defaultValue,l=n.checked!=null?n.checked:n.defaultChecked;s=fe(n.value!=null?n.value:s),e._wrapperState={initialChecked:l,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function gc(e,n){n=n.checked,n!=null&&ee(e,"checked",n,!1)}function Yo(e,n){gc(e,n);var s=fe(n.value),l=n.type;if(s!=null)l==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Xo(e,n.type,s):n.hasOwnProperty("defaultValue")&&Xo(e,n.type,fe(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function _c(e,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var l=n.type;if(!(l!=="submit"&&l!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,s||n===e.value||(e.value=n),e.defaultValue=n}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Xo(e,n,s){(n!=="number"||rs(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Wr=Array.isArray;function rr(e,n,s,l){if(e=e.options,n){n={};for(var c=0;c<s.length;c++)n["$"+s[c]]=!0;for(s=0;s<e.length;s++)c=n.hasOwnProperty("$"+e[s].value),e[s].selected!==c&&(e[s].selected=c),c&&l&&(e[s].defaultSelected=!0)}else{for(s=""+fe(s),n=null,c=0;c<e.length;c++){if(e[c].value===s){e[c].selected=!0,l&&(e[c].defaultSelected=!0);return}n!==null||e[c].disabled||(n=e[c])}n!==null&&(n.selected=!0)}}function Jo(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(r(91));return V({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function yc(e,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(r(92));if(Wr(s)){if(1<s.length)throw Error(r(93));s=s[0]}n=s}n==null&&(n=""),s=n}e._wrapperState={initialValue:fe(s)}}function vc(e,n){var s=fe(n.value),l=fe(n.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),n.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),l!=null&&(e.defaultValue=""+l)}function wc(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function xc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zo(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?xc(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var is,Cc=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,l,c){MSApp.execUnsafeLocalFunction(function(){return e(n,s,l,c)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(is=is||document.createElement("div"),is.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=is.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function Hr(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var $r={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vg=["Webkit","ms","Moz","O"];Object.keys($r).forEach(function(e){vg.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),$r[n]=$r[e]})});function Ec(e,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||$r.hasOwnProperty(e)&&$r[e]?(""+n).trim():n+"px"}function Sc(e,n){e=e.style;for(var s in n)if(n.hasOwnProperty(s)){var l=s.indexOf("--")===0,c=Ec(s,n[s],l);s==="float"&&(s="cssFloat"),l?e.setProperty(s,c):e[s]=c}}var wg=V({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function el(e,n){if(n){if(wg[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(r(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(r(61))}if(n.style!=null&&typeof n.style!="object")throw Error(r(62))}}function tl(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nl=null;function rl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var il=null,ir=null,sr=null;function kc(e){if(e=fi(e)){if(typeof il!="function")throw Error(r(280));var n=e.stateNode;n&&(n=Is(n),il(e.stateNode,e.type,n))}}function Nc(e){ir?sr?sr.push(e):sr=[e]:ir=e}function Ic(){if(ir){var e=ir,n=sr;if(sr=ir=null,kc(e),n)for(e=0;e<n.length;e++)kc(n[e])}}function Tc(e,n){return e(n)}function Rc(){}var sl=!1;function Pc(e,n,s){if(sl)return e(n,s);sl=!0;try{return Tc(e,n,s)}finally{sl=!1,(ir!==null||sr!==null)&&(Rc(),Ic())}}function Qr(e,n){var s=e.stateNode;if(s===null)return null;var l=Is(s);if(l===null)return null;s=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(r(231,n,typeof s));return s}var ol=!1;if(f)try{var Gr={};Object.defineProperty(Gr,"passive",{get:function(){ol=!0}}),window.addEventListener("test",Gr,Gr),window.removeEventListener("test",Gr,Gr)}catch{ol=!1}function xg(e,n,s,l,c,h,p,w,x){var I=Array.prototype.slice.call(arguments,3);try{n.apply(s,I)}catch(b){this.onError(b)}}var Kr=!1,ss=null,os=!1,ll=null,Cg={onError:function(e){Kr=!0,ss=e}};function Eg(e,n,s,l,c,h,p,w,x){Kr=!1,ss=null,xg.apply(Cg,arguments)}function Sg(e,n,s,l,c,h,p,w,x){if(Eg.apply(this,arguments),Kr){if(Kr){var I=ss;Kr=!1,ss=null}else throw Error(r(198));os||(os=!0,ll=I)}}function On(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function Dc(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Mc(e){if(On(e)!==e)throw Error(r(188))}function kg(e){var n=e.alternate;if(!n){if(n=On(e),n===null)throw Error(r(188));return n!==e?null:e}for(var s=e,l=n;;){var c=s.return;if(c===null)break;var h=c.alternate;if(h===null){if(l=c.return,l!==null){s=l;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===s)return Mc(c),e;if(h===l)return Mc(c),n;h=h.sibling}throw Error(r(188))}if(s.return!==l.return)s=c,l=h;else{for(var p=!1,w=c.child;w;){if(w===s){p=!0,s=c,l=h;break}if(w===l){p=!0,l=c,s=h;break}w=w.sibling}if(!p){for(w=h.child;w;){if(w===s){p=!0,s=h,l=c;break}if(w===l){p=!0,l=h,s=c;break}w=w.sibling}if(!p)throw Error(r(189))}}if(s.alternate!==l)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?e:n}function Ac(e){return e=kg(e),e!==null?bc(e):null}function bc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=bc(e);if(n!==null)return n;e=e.sibling}return null}var Oc=t.unstable_scheduleCallback,Lc=t.unstable_cancelCallback,Ng=t.unstable_shouldYield,Ig=t.unstable_requestPaint,Me=t.unstable_now,Tg=t.unstable_getCurrentPriorityLevel,al=t.unstable_ImmediatePriority,Fc=t.unstable_UserBlockingPriority,ls=t.unstable_NormalPriority,Rg=t.unstable_LowPriority,jc=t.unstable_IdlePriority,as=null,Vt=null;function Pg(e){if(Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(as,e,void 0,(e.current.flags&128)===128)}catch{}}var Pt=Math.clz32?Math.clz32:Ag,Dg=Math.log,Mg=Math.LN2;function Ag(e){return e>>>=0,e===0?32:31-(Dg(e)/Mg|0)|0}var us=64,cs=4194304;function qr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ds(e,n){var s=e.pendingLanes;if(s===0)return 0;var l=0,c=e.suspendedLanes,h=e.pingedLanes,p=s&268435455;if(p!==0){var w=p&~c;w!==0?l=qr(w):(h&=p,h!==0&&(l=qr(h)))}else p=s&~c,p!==0?l=qr(p):h!==0&&(l=qr(h));if(l===0)return 0;if(n!==0&&n!==l&&(n&c)===0&&(c=l&-l,h=n&-n,c>=h||c===16&&(h&4194240)!==0))return n;if((l&4)!==0&&(l|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=l;0<n;)s=31-Pt(n),c=1<<s,l|=e[s],n&=~c;return l}function bg(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Og(e,n){for(var s=e.suspendedLanes,l=e.pingedLanes,c=e.expirationTimes,h=e.pendingLanes;0<h;){var p=31-Pt(h),w=1<<p,x=c[p];x===-1?((w&s)===0||(w&l)!==0)&&(c[p]=bg(w,n)):x<=n&&(e.expiredLanes|=w),h&=~w}}function ul(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function zc(){var e=us;return us<<=1,(us&4194240)===0&&(us=64),e}function cl(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function Yr(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Pt(n),e[n]=s}function Lg(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<s;){var c=31-Pt(s),h=1<<c;n[c]=0,l[c]=-1,e[c]=-1,s&=~h}}function dl(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var l=31-Pt(s),c=1<<l;c&n|e[l]&n&&(e[l]|=n),s&=~c}}var pe=0;function Uc(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Bc,hl,Vc,Wc,Hc,fl=!1,hs=[],un=null,cn=null,dn=null,Xr=new Map,Jr=new Map,hn=[],Fg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $c(e,n){switch(e){case"focusin":case"focusout":un=null;break;case"dragenter":case"dragleave":cn=null;break;case"mouseover":case"mouseout":dn=null;break;case"pointerover":case"pointerout":Xr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jr.delete(n.pointerId)}}function Zr(e,n,s,l,c,h){return e===null||e.nativeEvent!==h?(e={blockedOn:n,domEventName:s,eventSystemFlags:l,nativeEvent:h,targetContainers:[c]},n!==null&&(n=fi(n),n!==null&&hl(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),e)}function jg(e,n,s,l,c){switch(n){case"focusin":return un=Zr(un,e,n,s,l,c),!0;case"dragenter":return cn=Zr(cn,e,n,s,l,c),!0;case"mouseover":return dn=Zr(dn,e,n,s,l,c),!0;case"pointerover":var h=c.pointerId;return Xr.set(h,Zr(Xr.get(h)||null,e,n,s,l,c)),!0;case"gotpointercapture":return h=c.pointerId,Jr.set(h,Zr(Jr.get(h)||null,e,n,s,l,c)),!0}return!1}function Qc(e){var n=Ln(e.target);if(n!==null){var s=On(n);if(s!==null){if(n=s.tag,n===13){if(n=Dc(s),n!==null){e.blockedOn=n,Hc(e.priority,function(){Vc(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fs(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=ml(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);nl=l,s.target.dispatchEvent(l),nl=null}else return n=fi(s),n!==null&&hl(n),e.blockedOn=s,!1;n.shift()}return!0}function Gc(e,n,s){fs(e)&&s.delete(n)}function zg(){fl=!1,un!==null&&fs(un)&&(un=null),cn!==null&&fs(cn)&&(cn=null),dn!==null&&fs(dn)&&(dn=null),Xr.forEach(Gc),Jr.forEach(Gc)}function ei(e,n){e.blockedOn===n&&(e.blockedOn=null,fl||(fl=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,zg)))}function ti(e){function n(c){return ei(c,e)}if(0<hs.length){ei(hs[0],e);for(var s=1;s<hs.length;s++){var l=hs[s];l.blockedOn===e&&(l.blockedOn=null)}}for(un!==null&&ei(un,e),cn!==null&&ei(cn,e),dn!==null&&ei(dn,e),Xr.forEach(n),Jr.forEach(n),s=0;s<hn.length;s++)l=hn[s],l.blockedOn===e&&(l.blockedOn=null);for(;0<hn.length&&(s=hn[0],s.blockedOn===null);)Qc(s),s.blockedOn===null&&hn.shift()}var or=he.ReactCurrentBatchConfig,ps=!0;function Ug(e,n,s,l){var c=pe,h=or.transition;or.transition=null;try{pe=1,pl(e,n,s,l)}finally{pe=c,or.transition=h}}function Bg(e,n,s,l){var c=pe,h=or.transition;or.transition=null;try{pe=4,pl(e,n,s,l)}finally{pe=c,or.transition=h}}function pl(e,n,s,l){if(ps){var c=ml(e,n,s,l);if(c===null)Ml(e,n,l,ms,s),$c(e,l);else if(jg(c,e,n,s,l))l.stopPropagation();else if($c(e,l),n&4&&-1<Fg.indexOf(e)){for(;c!==null;){var h=fi(c);if(h!==null&&Bc(h),h=ml(e,n,s,l),h===null&&Ml(e,n,l,ms,s),h===c)break;c=h}c!==null&&l.stopPropagation()}else Ml(e,n,l,null,s)}}var ms=null;function ml(e,n,s,l){if(ms=null,e=rl(l),e=Ln(e),e!==null)if(n=On(e),n===null)e=null;else if(s=n.tag,s===13){if(e=Dc(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return ms=e,null}function Kc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tg()){case al:return 1;case Fc:return 4;case ls:case Rg:return 16;case jc:return 536870912;default:return 16}default:return 16}}var fn=null,gl=null,gs=null;function qc(){if(gs)return gs;var e,n=gl,s=n.length,l,c="value"in fn?fn.value:fn.textContent,h=c.length;for(e=0;e<s&&n[e]===c[e];e++);var p=s-e;for(l=1;l<=p&&n[s-l]===c[h-l];l++);return gs=c.slice(e,1<l?1-l:void 0)}function _s(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ys(){return!0}function Yc(){return!1}function gt(e){function n(s,l,c,h,p){this._reactName=s,this._targetInst=c,this.type=l,this.nativeEvent=h,this.target=p,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(s=e[w],this[w]=s?s(h):h[w]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?ys:Yc,this.isPropagationStopped=Yc,this}return V(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ys)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ys)},persist:function(){},isPersistent:ys}),n}var lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_l=gt(lr),ni=V({},lr,{view:0,detail:0}),Vg=gt(ni),yl,vl,ri,vs=V({},ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ri&&(ri&&e.type==="mousemove"?(yl=e.screenX-ri.screenX,vl=e.screenY-ri.screenY):vl=yl=0,ri=e),yl)},movementY:function(e){return"movementY"in e?e.movementY:vl}}),Xc=gt(vs),Wg=V({},vs,{dataTransfer:0}),Hg=gt(Wg),$g=V({},ni,{relatedTarget:0}),wl=gt($g),Qg=V({},lr,{animationName:0,elapsedTime:0,pseudoElement:0}),Gg=gt(Qg),Kg=V({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qg=gt(Kg),Yg=V({},lr,{data:0}),Jc=gt(Yg),Xg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e0(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Zg[e])?!!n[e]:!1}function xl(){return e0}var t0=V({},ni,{key:function(e){if(e.key){var n=Xg[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=_s(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Jg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xl,charCode:function(e){return e.type==="keypress"?_s(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_s(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),n0=gt(t0),r0=V({},vs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zc=gt(r0),i0=V({},ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xl}),s0=gt(i0),o0=V({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),l0=gt(o0),a0=V({},vs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),u0=gt(a0),c0=[9,13,27,32],Cl=f&&"CompositionEvent"in window,ii=null;f&&"documentMode"in document&&(ii=document.documentMode);var d0=f&&"TextEvent"in window&&!ii,ed=f&&(!Cl||ii&&8<ii&&11>=ii),td=" ",nd=!1;function rd(e,n){switch(e){case"keyup":return c0.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function id(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ar=!1;function h0(e,n){switch(e){case"compositionend":return id(n);case"keypress":return n.which!==32?null:(nd=!0,td);case"textInput":return e=n.data,e===td&&nd?null:e;default:return null}}function f0(e,n){if(ar)return e==="compositionend"||!Cl&&rd(e,n)?(e=qc(),gs=gl=fn=null,ar=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return ed&&n.locale!=="ko"?null:n.data;default:return null}}var p0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sd(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!p0[e.type]:n==="textarea"}function od(e,n,s,l){Nc(l),n=Ss(n,"onChange"),0<n.length&&(s=new _l("onChange","change",null,s,l),e.push({event:s,listeners:n}))}var si=null,oi=null;function m0(e){Sd(e,0)}function ws(e){var n=fr(e);if(pc(n))return e}function g0(e,n){if(e==="change")return n}var ld=!1;if(f){var El;if(f){var Sl="oninput"in document;if(!Sl){var ad=document.createElement("div");ad.setAttribute("oninput","return;"),Sl=typeof ad.oninput=="function"}El=Sl}else El=!1;ld=El&&(!document.documentMode||9<document.documentMode)}function ud(){si&&(si.detachEvent("onpropertychange",cd),oi=si=null)}function cd(e){if(e.propertyName==="value"&&ws(oi)){var n=[];od(n,oi,e,rl(e)),Pc(m0,n)}}function _0(e,n,s){e==="focusin"?(ud(),si=n,oi=s,si.attachEvent("onpropertychange",cd)):e==="focusout"&&ud()}function y0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ws(oi)}function v0(e,n){if(e==="click")return ws(n)}function w0(e,n){if(e==="input"||e==="change")return ws(n)}function x0(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Dt=typeof Object.is=="function"?Object.is:x0;function li(e,n){if(Dt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),l=Object.keys(n);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var c=s[l];if(!m.call(n,c)||!Dt(e[c],n[c]))return!1}return!0}function dd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hd(e,n){var s=dd(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=n&&l>=n)return{node:s,offset:n-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=dd(s)}}function fd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?fd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function pd(){for(var e=window,n=rs();n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=rs(e.document)}return n}function kl(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function C0(e){var n=pd(),s=e.focusedElem,l=e.selectionRange;if(n!==s&&s&&s.ownerDocument&&fd(s.ownerDocument.documentElement,s)){if(l!==null&&kl(s)){if(n=l.start,e=l.end,e===void 0&&(e=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(e,s.value.length);else if(e=(n=s.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var c=s.textContent.length,h=Math.min(l.start,c);l=l.end===void 0?h:Math.min(l.end,c),!e.extend&&h>l&&(c=l,l=h,h=c),c=hd(s,h);var p=hd(s,l);c&&p&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==p.node||e.focusOffset!==p.offset)&&(n=n.createRange(),n.setStart(c.node,c.offset),e.removeAllRanges(),h>l?(e.addRange(n),e.extend(p.node,p.offset)):(n.setEnd(p.node,p.offset),e.addRange(n)))}}for(n=[],e=s;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)e=n[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var E0=f&&"documentMode"in document&&11>=document.documentMode,ur=null,Nl=null,ai=null,Il=!1;function md(e,n,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Il||ur==null||ur!==rs(l)||(l=ur,"selectionStart"in l&&kl(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ai&&li(ai,l)||(ai=l,l=Ss(Nl,"onSelect"),0<l.length&&(n=new _l("onSelect","select",null,n,s),e.push({event:n,listeners:l}),n.target=ur)))}function xs(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var cr={animationend:xs("Animation","AnimationEnd"),animationiteration:xs("Animation","AnimationIteration"),animationstart:xs("Animation","AnimationStart"),transitionend:xs("Transition","TransitionEnd")},Tl={},gd={};f&&(gd=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);function Cs(e){if(Tl[e])return Tl[e];if(!cr[e])return e;var n=cr[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in gd)return Tl[e]=n[s];return e}var _d=Cs("animationend"),yd=Cs("animationiteration"),vd=Cs("animationstart"),wd=Cs("transitionend"),xd=new Map,Cd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pn(e,n){xd.set(e,n),u(n,[e])}for(var Rl=0;Rl<Cd.length;Rl++){var Pl=Cd[Rl],S0=Pl.toLowerCase(),k0=Pl[0].toUpperCase()+Pl.slice(1);pn(S0,"on"+k0)}pn(_d,"onAnimationEnd"),pn(yd,"onAnimationIteration"),pn(vd,"onAnimationStart"),pn("dblclick","onDoubleClick"),pn("focusin","onFocus"),pn("focusout","onBlur"),pn(wd,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ui="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ui));function Ed(e,n,s){var l=e.type||"unknown-event";e.currentTarget=s,Sg(l,n,void 0,e),e.currentTarget=null}function Sd(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],c=l.event;l=l.listeners;e:{var h=void 0;if(n)for(var p=l.length-1;0<=p;p--){var w=l[p],x=w.instance,I=w.currentTarget;if(w=w.listener,x!==h&&c.isPropagationStopped())break e;Ed(c,w,I),h=x}else for(p=0;p<l.length;p++){if(w=l[p],x=w.instance,I=w.currentTarget,w=w.listener,x!==h&&c.isPropagationStopped())break e;Ed(c,w,I),h=x}}}if(os)throw e=ll,os=!1,ll=null,e}function xe(e,n){var s=n[jl];s===void 0&&(s=n[jl]=new Set);var l=e+"__bubble";s.has(l)||(kd(n,e,2,!1),s.add(l))}function Dl(e,n,s){var l=0;n&&(l|=4),kd(s,e,l,n)}var Es="_reactListening"+Math.random().toString(36).slice(2);function ci(e){if(!e[Es]){e[Es]=!0,o.forEach(function(s){s!=="selectionchange"&&(N0.has(s)||Dl(s,!1,e),Dl(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Es]||(n[Es]=!0,Dl("selectionchange",!1,n))}}function kd(e,n,s,l){switch(Kc(n)){case 1:var c=Ug;break;case 4:c=Bg;break;default:c=pl}s=c.bind(null,n,s,e),c=void 0,!ol||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),l?c!==void 0?e.addEventListener(n,s,{capture:!0,passive:c}):e.addEventListener(n,s,!0):c!==void 0?e.addEventListener(n,s,{passive:c}):e.addEventListener(n,s,!1)}function Ml(e,n,s,l,c){var h=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var p=l.tag;if(p===3||p===4){var w=l.stateNode.containerInfo;if(w===c||w.nodeType===8&&w.parentNode===c)break;if(p===4)for(p=l.return;p!==null;){var x=p.tag;if((x===3||x===4)&&(x=p.stateNode.containerInfo,x===c||x.nodeType===8&&x.parentNode===c))return;p=p.return}for(;w!==null;){if(p=Ln(w),p===null)return;if(x=p.tag,x===5||x===6){l=h=p;continue e}w=w.parentNode}}l=l.return}Pc(function(){var I=h,b=rl(s),O=[];e:{var M=xd.get(e);if(M!==void 0){var U=_l,W=e;switch(e){case"keypress":if(_s(s)===0)break e;case"keydown":case"keyup":U=n0;break;case"focusin":W="focus",U=wl;break;case"focusout":W="blur",U=wl;break;case"beforeblur":case"afterblur":U=wl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=Xc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=Hg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=s0;break;case _d:case yd:case vd:U=Gg;break;case wd:U=l0;break;case"scroll":U=Vg;break;case"wheel":U=u0;break;case"copy":case"cut":case"paste":U=qg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=Zc}var H=(n&4)!==0,Ae=!H&&e==="scroll",k=H?M!==null?M+"Capture":null:M;H=[];for(var E=I,N;E!==null;){N=E;var L=N.stateNode;if(N.tag===5&&L!==null&&(N=L,k!==null&&(L=Qr(E,k),L!=null&&H.push(di(E,L,N)))),Ae)break;E=E.return}0<H.length&&(M=new U(M,W,null,s,b),O.push({event:M,listeners:H}))}}if((n&7)===0){e:{if(M=e==="mouseover"||e==="pointerover",U=e==="mouseout"||e==="pointerout",M&&s!==nl&&(W=s.relatedTarget||s.fromElement)&&(Ln(W)||W[Kt]))break e;if((U||M)&&(M=b.window===b?b:(M=b.ownerDocument)?M.defaultView||M.parentWindow:window,U?(W=s.relatedTarget||s.toElement,U=I,W=W?Ln(W):null,W!==null&&(Ae=On(W),W!==Ae||W.tag!==5&&W.tag!==6)&&(W=null)):(U=null,W=I),U!==W)){if(H=Xc,L="onMouseLeave",k="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(H=Zc,L="onPointerLeave",k="onPointerEnter",E="pointer"),Ae=U==null?M:fr(U),N=W==null?M:fr(W),M=new H(L,E+"leave",U,s,b),M.target=Ae,M.relatedTarget=N,L=null,Ln(b)===I&&(H=new H(k,E+"enter",W,s,b),H.target=N,H.relatedTarget=Ae,L=H),Ae=L,U&&W)t:{for(H=U,k=W,E=0,N=H;N;N=dr(N))E++;for(N=0,L=k;L;L=dr(L))N++;for(;0<E-N;)H=dr(H),E--;for(;0<N-E;)k=dr(k),N--;for(;E--;){if(H===k||k!==null&&H===k.alternate)break t;H=dr(H),k=dr(k)}H=null}else H=null;U!==null&&Nd(O,M,U,H,!1),W!==null&&Ae!==null&&Nd(O,Ae,W,H,!0)}}e:{if(M=I?fr(I):window,U=M.nodeName&&M.nodeName.toLowerCase(),U==="select"||U==="input"&&M.type==="file")var $=g0;else if(sd(M))if(ld)$=w0;else{$=y0;var K=_0}else(U=M.nodeName)&&U.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&($=v0);if($&&($=$(e,I))){od(O,$,s,b);break e}K&&K(e,M,I),e==="focusout"&&(K=M._wrapperState)&&K.controlled&&M.type==="number"&&Xo(M,"number",M.value)}switch(K=I?fr(I):window,e){case"focusin":(sd(K)||K.contentEditable==="true")&&(ur=K,Nl=I,ai=null);break;case"focusout":ai=Nl=ur=null;break;case"mousedown":Il=!0;break;case"contextmenu":case"mouseup":case"dragend":Il=!1,md(O,s,b);break;case"selectionchange":if(E0)break;case"keydown":case"keyup":md(O,s,b)}var q;if(Cl)e:{switch(e){case"compositionstart":var J="onCompositionStart";break e;case"compositionend":J="onCompositionEnd";break e;case"compositionupdate":J="onCompositionUpdate";break e}J=void 0}else ar?rd(e,s)&&(J="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(J="onCompositionStart");J&&(ed&&s.locale!=="ko"&&(ar||J!=="onCompositionStart"?J==="onCompositionEnd"&&ar&&(q=qc()):(fn=b,gl="value"in fn?fn.value:fn.textContent,ar=!0)),K=Ss(I,J),0<K.length&&(J=new Jc(J,e,null,s,b),O.push({event:J,listeners:K}),q?J.data=q:(q=id(s),q!==null&&(J.data=q)))),(q=d0?h0(e,s):f0(e,s))&&(I=Ss(I,"onBeforeInput"),0<I.length&&(b=new Jc("onBeforeInput","beforeinput",null,s,b),O.push({event:b,listeners:I}),b.data=q))}Sd(O,n)})}function di(e,n,s){return{instance:e,listener:n,currentTarget:s}}function Ss(e,n){for(var s=n+"Capture",l=[];e!==null;){var c=e,h=c.stateNode;c.tag===5&&h!==null&&(c=h,h=Qr(e,s),h!=null&&l.unshift(di(e,h,c)),h=Qr(e,n),h!=null&&l.push(di(e,h,c))),e=e.return}return l}function dr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Nd(e,n,s,l,c){for(var h=n._reactName,p=[];s!==null&&s!==l;){var w=s,x=w.alternate,I=w.stateNode;if(x!==null&&x===l)break;w.tag===5&&I!==null&&(w=I,c?(x=Qr(s,h),x!=null&&p.unshift(di(s,x,w))):c||(x=Qr(s,h),x!=null&&p.push(di(s,x,w)))),s=s.return}p.length!==0&&e.push({event:n,listeners:p})}var I0=/\r\n?/g,T0=/\u0000|\uFFFD/g;function Id(e){return(typeof e=="string"?e:""+e).replace(I0,`
`).replace(T0,"")}function ks(e,n,s){if(n=Id(n),Id(e)!==n&&s)throw Error(r(425))}function Ns(){}var Al=null,bl=null;function Ol(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Ll=typeof setTimeout=="function"?setTimeout:void 0,R0=typeof clearTimeout=="function"?clearTimeout:void 0,Td=typeof Promise=="function"?Promise:void 0,P0=typeof queueMicrotask=="function"?queueMicrotask:typeof Td<"u"?function(e){return Td.resolve(null).then(e).catch(D0)}:Ll;function D0(e){setTimeout(function(){throw e})}function Fl(e,n){var s=n,l=0;do{var c=s.nextSibling;if(e.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"){if(l===0){e.removeChild(c),ti(n);return}l--}else s!=="$"&&s!=="$?"&&s!=="$!"||l++;s=c}while(s);ti(n)}function mn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Rd(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}var hr=Math.random().toString(36).slice(2),Wt="__reactFiber$"+hr,hi="__reactProps$"+hr,Kt="__reactContainer$"+hr,jl="__reactEvents$"+hr,M0="__reactListeners$"+hr,A0="__reactHandles$"+hr;function Ln(e){var n=e[Wt];if(n)return n;for(var s=e.parentNode;s;){if(n=s[Kt]||s[Wt]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=Rd(e);e!==null;){if(s=e[Wt])return s;e=Rd(e)}return n}e=s,s=e.parentNode}return null}function fi(e){return e=e[Wt]||e[Kt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function fr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function Is(e){return e[hi]||null}var zl=[],pr=-1;function gn(e){return{current:e}}function Ce(e){0>pr||(e.current=zl[pr],zl[pr]=null,pr--)}function ye(e,n){pr++,zl[pr]=e.current,e.current=n}var _n={},qe=gn(_n),rt=gn(!1),Fn=_n;function mr(e,n){var s=e.type.contextTypes;if(!s)return _n;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===n)return l.__reactInternalMemoizedMaskedChildContext;var c={},h;for(h in s)c[h]=n[h];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=c),c}function it(e){return e=e.childContextTypes,e!=null}function Ts(){Ce(rt),Ce(qe)}function Pd(e,n,s){if(qe.current!==_n)throw Error(r(168));ye(qe,n),ye(rt,s)}function Dd(e,n,s){var l=e.stateNode;if(n=n.childContextTypes,typeof l.getChildContext!="function")return s;l=l.getChildContext();for(var c in l)if(!(c in n))throw Error(r(108,_e(e)||"Unknown",c));return V({},s,l)}function Rs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_n,Fn=qe.current,ye(qe,e),ye(rt,rt.current),!0}function Md(e,n,s){var l=e.stateNode;if(!l)throw Error(r(169));s?(e=Dd(e,n,Fn),l.__reactInternalMemoizedMergedChildContext=e,Ce(rt),Ce(qe),ye(qe,e)):Ce(rt),ye(rt,s)}var qt=null,Ps=!1,Ul=!1;function Ad(e){qt===null?qt=[e]:qt.push(e)}function b0(e){Ps=!0,Ad(e)}function yn(){if(!Ul&&qt!==null){Ul=!0;var e=0,n=pe;try{var s=qt;for(pe=1;e<s.length;e++){var l=s[e];do l=l(!0);while(l!==null)}qt=null,Ps=!1}catch(c){throw qt!==null&&(qt=qt.slice(e+1)),Oc(al,yn),c}finally{pe=n,Ul=!1}}return null}var gr=[],_r=0,Ds=null,Ms=0,Ct=[],Et=0,jn=null,Yt=1,Xt="";function zn(e,n){gr[_r++]=Ms,gr[_r++]=Ds,Ds=e,Ms=n}function bd(e,n,s){Ct[Et++]=Yt,Ct[Et++]=Xt,Ct[Et++]=jn,jn=e;var l=Yt;e=Xt;var c=32-Pt(l)-1;l&=~(1<<c),s+=1;var h=32-Pt(n)+c;if(30<h){var p=c-c%5;h=(l&(1<<p)-1).toString(32),l>>=p,c-=p,Yt=1<<32-Pt(n)+c|s<<c|l,Xt=h+e}else Yt=1<<h|s<<c|l,Xt=e}function Bl(e){e.return!==null&&(zn(e,1),bd(e,1,0))}function Vl(e){for(;e===Ds;)Ds=gr[--_r],gr[_r]=null,Ms=gr[--_r],gr[_r]=null;for(;e===jn;)jn=Ct[--Et],Ct[Et]=null,Xt=Ct[--Et],Ct[Et]=null,Yt=Ct[--Et],Ct[Et]=null}var _t=null,yt=null,Ne=!1,Mt=null;function Od(e,n){var s=It(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function Ld(e,n){switch(e.tag){case 5:var s=e.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,_t=e,yt=mn(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,_t=e,yt=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=jn!==null?{id:Yt,overflow:Xt}:null,e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=It(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,_t=e,yt=null,!0):!1;default:return!1}}function Wl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Hl(e){if(Ne){var n=yt;if(n){var s=n;if(!Ld(e,n)){if(Wl(e))throw Error(r(418));n=mn(s.nextSibling);var l=_t;n&&Ld(e,n)?Od(l,s):(e.flags=e.flags&-4097|2,Ne=!1,_t=e)}}else{if(Wl(e))throw Error(r(418));e.flags=e.flags&-4097|2,Ne=!1,_t=e}}}function Fd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;_t=e}function As(e){if(e!==_t)return!1;if(!Ne)return Fd(e),Ne=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!Ol(e.type,e.memoizedProps)),n&&(n=yt)){if(Wl(e))throw jd(),Error(r(418));for(;n;)Od(e,n),n=mn(n.nextSibling)}if(Fd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(n===0){yt=mn(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}e=e.nextSibling}yt=null}}else yt=_t?mn(e.stateNode.nextSibling):null;return!0}function jd(){for(var e=yt;e;)e=mn(e.nextSibling)}function yr(){yt=_t=null,Ne=!1}function $l(e){Mt===null?Mt=[e]:Mt.push(e)}var O0=he.ReactCurrentBatchConfig;function pi(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(r(309));var l=s.stateNode}if(!l)throw Error(r(147,e));var c=l,h=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===h?n.ref:(n=function(p){var w=c.refs;p===null?delete w[h]:w[h]=p},n._stringRef=h,n)}if(typeof e!="string")throw Error(r(284));if(!s._owner)throw Error(r(290,e))}return e}function bs(e,n){throw e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function zd(e){var n=e._init;return n(e._payload)}function Ud(e){function n(k,E){if(e){var N=k.deletions;N===null?(k.deletions=[E],k.flags|=16):N.push(E)}}function s(k,E){if(!e)return null;for(;E!==null;)n(k,E),E=E.sibling;return null}function l(k,E){for(k=new Map;E!==null;)E.key!==null?k.set(E.key,E):k.set(E.index,E),E=E.sibling;return k}function c(k,E){return k=Nn(k,E),k.index=0,k.sibling=null,k}function h(k,E,N){return k.index=N,e?(N=k.alternate,N!==null?(N=N.index,N<E?(k.flags|=2,E):N):(k.flags|=2,E)):(k.flags|=1048576,E)}function p(k){return e&&k.alternate===null&&(k.flags|=2),k}function w(k,E,N,L){return E===null||E.tag!==6?(E=La(N,k.mode,L),E.return=k,E):(E=c(E,N),E.return=k,E)}function x(k,E,N,L){var $=N.type;return $===Se?b(k,E,N.props.children,L,N.key):E!==null&&(E.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===nt&&zd($)===E.type)?(L=c(E,N.props),L.ref=pi(k,E,N),L.return=k,L):(L=io(N.type,N.key,N.props,null,k.mode,L),L.ref=pi(k,E,N),L.return=k,L)}function I(k,E,N,L){return E===null||E.tag!==4||E.stateNode.containerInfo!==N.containerInfo||E.stateNode.implementation!==N.implementation?(E=Fa(N,k.mode,L),E.return=k,E):(E=c(E,N.children||[]),E.return=k,E)}function b(k,E,N,L,$){return E===null||E.tag!==7?(E=Gn(N,k.mode,L,$),E.return=k,E):(E=c(E,N),E.return=k,E)}function O(k,E,N){if(typeof E=="string"&&E!==""||typeof E=="number")return E=La(""+E,k.mode,N),E.return=k,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case He:return N=io(E.type,E.key,E.props,null,k.mode,N),N.ref=pi(k,null,E),N.return=k,N;case me:return E=Fa(E,k.mode,N),E.return=k,E;case nt:var L=E._init;return O(k,L(E._payload),N)}if(Wr(E)||Y(E))return E=Gn(E,k.mode,N,null),E.return=k,E;bs(k,E)}return null}function M(k,E,N,L){var $=E!==null?E.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return $!==null?null:w(k,E,""+N,L);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case He:return N.key===$?x(k,E,N,L):null;case me:return N.key===$?I(k,E,N,L):null;case nt:return $=N._init,M(k,E,$(N._payload),L)}if(Wr(N)||Y(N))return $!==null?null:b(k,E,N,L,null);bs(k,N)}return null}function U(k,E,N,L,$){if(typeof L=="string"&&L!==""||typeof L=="number")return k=k.get(N)||null,w(E,k,""+L,$);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case He:return k=k.get(L.key===null?N:L.key)||null,x(E,k,L,$);case me:return k=k.get(L.key===null?N:L.key)||null,I(E,k,L,$);case nt:var K=L._init;return U(k,E,N,K(L._payload),$)}if(Wr(L)||Y(L))return k=k.get(N)||null,b(E,k,L,$,null);bs(E,L)}return null}function W(k,E,N,L){for(var $=null,K=null,q=E,J=E=0,Ue=null;q!==null&&J<N.length;J++){q.index>J?(Ue=q,q=null):Ue=q.sibling;var ue=M(k,q,N[J],L);if(ue===null){q===null&&(q=Ue);break}e&&q&&ue.alternate===null&&n(k,q),E=h(ue,E,J),K===null?$=ue:K.sibling=ue,K=ue,q=Ue}if(J===N.length)return s(k,q),Ne&&zn(k,J),$;if(q===null){for(;J<N.length;J++)q=O(k,N[J],L),q!==null&&(E=h(q,E,J),K===null?$=q:K.sibling=q,K=q);return Ne&&zn(k,J),$}for(q=l(k,q);J<N.length;J++)Ue=U(q,k,J,N[J],L),Ue!==null&&(e&&Ue.alternate!==null&&q.delete(Ue.key===null?J:Ue.key),E=h(Ue,E,J),K===null?$=Ue:K.sibling=Ue,K=Ue);return e&&q.forEach(function(In){return n(k,In)}),Ne&&zn(k,J),$}function H(k,E,N,L){var $=Y(N);if(typeof $!="function")throw Error(r(150));if(N=$.call(N),N==null)throw Error(r(151));for(var K=$=null,q=E,J=E=0,Ue=null,ue=N.next();q!==null&&!ue.done;J++,ue=N.next()){q.index>J?(Ue=q,q=null):Ue=q.sibling;var In=M(k,q,ue.value,L);if(In===null){q===null&&(q=Ue);break}e&&q&&In.alternate===null&&n(k,q),E=h(In,E,J),K===null?$=In:K.sibling=In,K=In,q=Ue}if(ue.done)return s(k,q),Ne&&zn(k,J),$;if(q===null){for(;!ue.done;J++,ue=N.next())ue=O(k,ue.value,L),ue!==null&&(E=h(ue,E,J),K===null?$=ue:K.sibling=ue,K=ue);return Ne&&zn(k,J),$}for(q=l(k,q);!ue.done;J++,ue=N.next())ue=U(q,k,J,ue.value,L),ue!==null&&(e&&ue.alternate!==null&&q.delete(ue.key===null?J:ue.key),E=h(ue,E,J),K===null?$=ue:K.sibling=ue,K=ue);return e&&q.forEach(function(p_){return n(k,p_)}),Ne&&zn(k,J),$}function Ae(k,E,N,L){if(typeof N=="object"&&N!==null&&N.type===Se&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case He:e:{for(var $=N.key,K=E;K!==null;){if(K.key===$){if($=N.type,$===Se){if(K.tag===7){s(k,K.sibling),E=c(K,N.props.children),E.return=k,k=E;break e}}else if(K.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===nt&&zd($)===K.type){s(k,K.sibling),E=c(K,N.props),E.ref=pi(k,K,N),E.return=k,k=E;break e}s(k,K);break}else n(k,K);K=K.sibling}N.type===Se?(E=Gn(N.props.children,k.mode,L,N.key),E.return=k,k=E):(L=io(N.type,N.key,N.props,null,k.mode,L),L.ref=pi(k,E,N),L.return=k,k=L)}return p(k);case me:e:{for(K=N.key;E!==null;){if(E.key===K)if(E.tag===4&&E.stateNode.containerInfo===N.containerInfo&&E.stateNode.implementation===N.implementation){s(k,E.sibling),E=c(E,N.children||[]),E.return=k,k=E;break e}else{s(k,E);break}else n(k,E);E=E.sibling}E=Fa(N,k.mode,L),E.return=k,k=E}return p(k);case nt:return K=N._init,Ae(k,E,K(N._payload),L)}if(Wr(N))return W(k,E,N,L);if(Y(N))return H(k,E,N,L);bs(k,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,E!==null&&E.tag===6?(s(k,E.sibling),E=c(E,N),E.return=k,k=E):(s(k,E),E=La(N,k.mode,L),E.return=k,k=E),p(k)):s(k,E)}return Ae}var vr=Ud(!0),Bd=Ud(!1),Os=gn(null),Ls=null,wr=null,Ql=null;function Gl(){Ql=wr=Ls=null}function Kl(e){var n=Os.current;Ce(Os),e._currentValue=n}function ql(e,n,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===s)break;e=e.return}}function xr(e,n){Ls=e,Ql=wr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(st=!0),e.firstContext=null)}function St(e){var n=e._currentValue;if(Ql!==e)if(e={context:e,memoizedValue:n,next:null},wr===null){if(Ls===null)throw Error(r(308));wr=e,Ls.dependencies={lanes:0,firstContext:e}}else wr=wr.next=e;return n}var Un=null;function Yl(e){Un===null?Un=[e]:Un.push(e)}function Vd(e,n,s,l){var c=n.interleaved;return c===null?(s.next=s,Yl(n)):(s.next=c.next,c.next=s),n.interleaved=s,Jt(e,l)}function Jt(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}var vn=!1;function Xl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wd(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zt(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function wn(e,n,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(oe&2)!==0){var c=l.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n,Jt(e,s)}return c=l.interleaved,c===null?(n.next=n,Yl(l)):(n.next=c.next,c.next=n),l.interleaved=n,Jt(e,s)}function Fs(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var l=n.lanes;l&=e.pendingLanes,s|=l,n.lanes=s,dl(e,s)}}function Hd(e,n){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var c=null,h=null;if(s=s.firstBaseUpdate,s!==null){do{var p={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};h===null?c=h=p:h=h.next=p,s=s.next}while(s!==null);h===null?c=h=n:h=h.next=n}else c=h=n;s={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:l.shared,effects:l.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function js(e,n,s,l){var c=e.updateQueue;vn=!1;var h=c.firstBaseUpdate,p=c.lastBaseUpdate,w=c.shared.pending;if(w!==null){c.shared.pending=null;var x=w,I=x.next;x.next=null,p===null?h=I:p.next=I,p=x;var b=e.alternate;b!==null&&(b=b.updateQueue,w=b.lastBaseUpdate,w!==p&&(w===null?b.firstBaseUpdate=I:w.next=I,b.lastBaseUpdate=x))}if(h!==null){var O=c.baseState;p=0,b=I=x=null,w=h;do{var M=w.lane,U=w.eventTime;if((l&M)===M){b!==null&&(b=b.next={eventTime:U,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var W=e,H=w;switch(M=n,U=s,H.tag){case 1:if(W=H.payload,typeof W=="function"){O=W.call(U,O,M);break e}O=W;break e;case 3:W.flags=W.flags&-65537|128;case 0:if(W=H.payload,M=typeof W=="function"?W.call(U,O,M):W,M==null)break e;O=V({},O,M);break e;case 2:vn=!0}}w.callback!==null&&w.lane!==0&&(e.flags|=64,M=c.effects,M===null?c.effects=[w]:M.push(w))}else U={eventTime:U,lane:M,tag:w.tag,payload:w.payload,callback:w.callback,next:null},b===null?(I=b=U,x=O):b=b.next=U,p|=M;if(w=w.next,w===null){if(w=c.shared.pending,w===null)break;M=w,w=M.next,M.next=null,c.lastBaseUpdate=M,c.shared.pending=null}}while(!0);if(b===null&&(x=O),c.baseState=x,c.firstBaseUpdate=I,c.lastBaseUpdate=b,n=c.shared.interleaved,n!==null){c=n;do p|=c.lane,c=c.next;while(c!==n)}else h===null&&(c.shared.lanes=0);Wn|=p,e.lanes=p,e.memoizedState=O}}function $d(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var l=e[n],c=l.callback;if(c!==null){if(l.callback=null,l=s,typeof c!="function")throw Error(r(191,c));c.call(l)}}}var mi={},Ht=gn(mi),gi=gn(mi),_i=gn(mi);function Bn(e){if(e===mi)throw Error(r(174));return e}function Jl(e,n){switch(ye(_i,n),ye(gi,e),ye(Ht,mi),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Zo(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=Zo(n,e)}Ce(Ht),ye(Ht,n)}function Cr(){Ce(Ht),Ce(gi),Ce(_i)}function Qd(e){Bn(_i.current);var n=Bn(Ht.current),s=Zo(n,e.type);n!==s&&(ye(gi,e),ye(Ht,s))}function Zl(e){gi.current===e&&(Ce(Ht),Ce(gi))}var Ie=gn(0);function zs(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ea=[];function ta(){for(var e=0;e<ea.length;e++)ea[e]._workInProgressVersionPrimary=null;ea.length=0}var Us=he.ReactCurrentDispatcher,na=he.ReactCurrentBatchConfig,Vn=0,Te=null,Oe=null,je=null,Bs=!1,yi=!1,vi=0,L0=0;function Ye(){throw Error(r(321))}function ra(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!Dt(e[s],n[s]))return!1;return!0}function ia(e,n,s,l,c,h){if(Vn=h,Te=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Us.current=e===null||e.memoizedState===null?U0:B0,e=s(l,c),yi){h=0;do{if(yi=!1,vi=0,25<=h)throw Error(r(301));h+=1,je=Oe=null,n.updateQueue=null,Us.current=V0,e=s(l,c)}while(yi)}if(Us.current=Hs,n=Oe!==null&&Oe.next!==null,Vn=0,je=Oe=Te=null,Bs=!1,n)throw Error(r(300));return e}function sa(){var e=vi!==0;return vi=0,e}function $t(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?Te.memoizedState=je=e:je=je.next=e,je}function kt(){if(Oe===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=Oe.next;var n=je===null?Te.memoizedState:je.next;if(n!==null)je=n,Oe=e;else{if(e===null)throw Error(r(310));Oe=e,e={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},je===null?Te.memoizedState=je=e:je=je.next=e}return je}function wi(e,n){return typeof n=="function"?n(e):n}function oa(e){var n=kt(),s=n.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=e;var l=Oe,c=l.baseQueue,h=s.pending;if(h!==null){if(c!==null){var p=c.next;c.next=h.next,h.next=p}l.baseQueue=c=h,s.pending=null}if(c!==null){h=c.next,l=l.baseState;var w=p=null,x=null,I=h;do{var b=I.lane;if((Vn&b)===b)x!==null&&(x=x.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),l=I.hasEagerState?I.eagerState:e(l,I.action);else{var O={lane:b,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};x===null?(w=x=O,p=l):x=x.next=O,Te.lanes|=b,Wn|=b}I=I.next}while(I!==null&&I!==h);x===null?p=l:x.next=w,Dt(l,n.memoizedState)||(st=!0),n.memoizedState=l,n.baseState=p,n.baseQueue=x,s.lastRenderedState=l}if(e=s.interleaved,e!==null){c=e;do h=c.lane,Te.lanes|=h,Wn|=h,c=c.next;while(c!==e)}else c===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function la(e){var n=kt(),s=n.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=e;var l=s.dispatch,c=s.pending,h=n.memoizedState;if(c!==null){s.pending=null;var p=c=c.next;do h=e(h,p.action),p=p.next;while(p!==c);Dt(h,n.memoizedState)||(st=!0),n.memoizedState=h,n.baseQueue===null&&(n.baseState=h),s.lastRenderedState=h}return[h,l]}function Gd(){}function Kd(e,n){var s=Te,l=kt(),c=n(),h=!Dt(l.memoizedState,c);if(h&&(l.memoizedState=c,st=!0),l=l.queue,aa(Xd.bind(null,s,l,e),[e]),l.getSnapshot!==n||h||je!==null&&je.memoizedState.tag&1){if(s.flags|=2048,xi(9,Yd.bind(null,s,l,c,n),void 0,null),ze===null)throw Error(r(349));(Vn&30)!==0||qd(s,n,c)}return c}function qd(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=Te.updateQueue,n===null?(n={lastEffect:null,stores:null},Te.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function Yd(e,n,s,l){n.value=s,n.getSnapshot=l,Jd(n)&&Zd(e)}function Xd(e,n,s){return s(function(){Jd(n)&&Zd(e)})}function Jd(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!Dt(e,s)}catch{return!0}}function Zd(e){var n=Jt(e,1);n!==null&&Lt(n,e,1,-1)}function eh(e){var n=$t();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:e},n.queue=e,e=e.dispatch=z0.bind(null,Te,e),[n.memoizedState,e]}function xi(e,n,s,l){return e={tag:e,create:n,destroy:s,deps:l,next:null},n=Te.updateQueue,n===null?(n={lastEffect:null,stores:null},Te.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,n.lastEffect=e)),e}function th(){return kt().memoizedState}function Vs(e,n,s,l){var c=$t();Te.flags|=e,c.memoizedState=xi(1|n,s,void 0,l===void 0?null:l)}function Ws(e,n,s,l){var c=kt();l=l===void 0?null:l;var h=void 0;if(Oe!==null){var p=Oe.memoizedState;if(h=p.destroy,l!==null&&ra(l,p.deps)){c.memoizedState=xi(n,s,h,l);return}}Te.flags|=e,c.memoizedState=xi(1|n,s,h,l)}function nh(e,n){return Vs(8390656,8,e,n)}function aa(e,n){return Ws(2048,8,e,n)}function rh(e,n){return Ws(4,2,e,n)}function ih(e,n){return Ws(4,4,e,n)}function sh(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function oh(e,n,s){return s=s!=null?s.concat([e]):null,Ws(4,4,sh.bind(null,n,e),s)}function ua(){}function lh(e,n){var s=kt();n=n===void 0?null:n;var l=s.memoizedState;return l!==null&&n!==null&&ra(n,l[1])?l[0]:(s.memoizedState=[e,n],e)}function ah(e,n){var s=kt();n=n===void 0?null:n;var l=s.memoizedState;return l!==null&&n!==null&&ra(n,l[1])?l[0]:(e=e(),s.memoizedState=[e,n],e)}function uh(e,n,s){return(Vn&21)===0?(e.baseState&&(e.baseState=!1,st=!0),e.memoizedState=s):(Dt(s,n)||(s=zc(),Te.lanes|=s,Wn|=s,e.baseState=!0),n)}function F0(e,n){var s=pe;pe=s!==0&&4>s?s:4,e(!0);var l=na.transition;na.transition={};try{e(!1),n()}finally{pe=s,na.transition=l}}function ch(){return kt().memoizedState}function j0(e,n,s){var l=Sn(e);if(s={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null},dh(e))hh(n,s);else if(s=Vd(e,n,s,l),s!==null){var c=tt();Lt(s,e,l,c),fh(s,n,l)}}function z0(e,n,s){var l=Sn(e),c={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null};if(dh(e))hh(n,c);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=n.lastRenderedReducer,h!==null))try{var p=n.lastRenderedState,w=h(p,s);if(c.hasEagerState=!0,c.eagerState=w,Dt(w,p)){var x=n.interleaved;x===null?(c.next=c,Yl(n)):(c.next=x.next,x.next=c),n.interleaved=c;return}}catch{}finally{}s=Vd(e,n,c,l),s!==null&&(c=tt(),Lt(s,e,l,c),fh(s,n,l))}}function dh(e){var n=e.alternate;return e===Te||n!==null&&n===Te}function hh(e,n){yi=Bs=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function fh(e,n,s){if((s&4194240)!==0){var l=n.lanes;l&=e.pendingLanes,s|=l,n.lanes=s,dl(e,s)}}var Hs={readContext:St,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},U0={readContext:St,useCallback:function(e,n){return $t().memoizedState=[e,n===void 0?null:n],e},useContext:St,useEffect:nh,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,Vs(4194308,4,sh.bind(null,n,e),s)},useLayoutEffect:function(e,n){return Vs(4194308,4,e,n)},useInsertionEffect:function(e,n){return Vs(4,2,e,n)},useMemo:function(e,n){var s=$t();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var l=$t();return n=s!==void 0?s(n):n,l.memoizedState=l.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},l.queue=e,e=e.dispatch=j0.bind(null,Te,e),[l.memoizedState,e]},useRef:function(e){var n=$t();return e={current:e},n.memoizedState=e},useState:eh,useDebugValue:ua,useDeferredValue:function(e){return $t().memoizedState=e},useTransition:function(){var e=eh(!1),n=e[0];return e=F0.bind(null,e[1]),$t().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var l=Te,c=$t();if(Ne){if(s===void 0)throw Error(r(407));s=s()}else{if(s=n(),ze===null)throw Error(r(349));(Vn&30)!==0||qd(l,n,s)}c.memoizedState=s;var h={value:s,getSnapshot:n};return c.queue=h,nh(Xd.bind(null,l,h,e),[e]),l.flags|=2048,xi(9,Yd.bind(null,l,h,s,n),void 0,null),s},useId:function(){var e=$t(),n=ze.identifierPrefix;if(Ne){var s=Xt,l=Yt;s=(l&~(1<<32-Pt(l)-1)).toString(32)+s,n=":"+n+"R"+s,s=vi++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=L0++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},B0={readContext:St,useCallback:lh,useContext:St,useEffect:aa,useImperativeHandle:oh,useInsertionEffect:rh,useLayoutEffect:ih,useMemo:ah,useReducer:oa,useRef:th,useState:function(){return oa(wi)},useDebugValue:ua,useDeferredValue:function(e){var n=kt();return uh(n,Oe.memoizedState,e)},useTransition:function(){var e=oa(wi)[0],n=kt().memoizedState;return[e,n]},useMutableSource:Gd,useSyncExternalStore:Kd,useId:ch,unstable_isNewReconciler:!1},V0={readContext:St,useCallback:lh,useContext:St,useEffect:aa,useImperativeHandle:oh,useInsertionEffect:rh,useLayoutEffect:ih,useMemo:ah,useReducer:la,useRef:th,useState:function(){return la(wi)},useDebugValue:ua,useDeferredValue:function(e){var n=kt();return Oe===null?n.memoizedState=e:uh(n,Oe.memoizedState,e)},useTransition:function(){var e=la(wi)[0],n=kt().memoizedState;return[e,n]},useMutableSource:Gd,useSyncExternalStore:Kd,useId:ch,unstable_isNewReconciler:!1};function At(e,n){if(e&&e.defaultProps){n=V({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}function ca(e,n,s,l){n=e.memoizedState,s=s(l,n),s=s==null?n:V({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var $s={isMounted:function(e){return(e=e._reactInternals)?On(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var l=tt(),c=Sn(e),h=Zt(l,c);h.payload=n,s!=null&&(h.callback=s),n=wn(e,h,c),n!==null&&(Lt(n,e,c,l),Fs(n,e,c))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var l=tt(),c=Sn(e),h=Zt(l,c);h.tag=1,h.payload=n,s!=null&&(h.callback=s),n=wn(e,h,c),n!==null&&(Lt(n,e,c,l),Fs(n,e,c))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=tt(),l=Sn(e),c=Zt(s,l);c.tag=2,n!=null&&(c.callback=n),n=wn(e,c,l),n!==null&&(Lt(n,e,l,s),Fs(n,e,l))}};function ph(e,n,s,l,c,h,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,h,p):n.prototype&&n.prototype.isPureReactComponent?!li(s,l)||!li(c,h):!0}function mh(e,n,s){var l=!1,c=_n,h=n.contextType;return typeof h=="object"&&h!==null?h=St(h):(c=it(n)?Fn:qe.current,l=n.contextTypes,h=(l=l!=null)?mr(e,c):_n),n=new n(s,h),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=$s,e.stateNode=n,n._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=h),n}function gh(e,n,s,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,l),n.state!==e&&$s.enqueueReplaceState(n,n.state,null)}function da(e,n,s,l){var c=e.stateNode;c.props=s,c.state=e.memoizedState,c.refs={},Xl(e);var h=n.contextType;typeof h=="object"&&h!==null?c.context=St(h):(h=it(n)?Fn:qe.current,c.context=mr(e,h)),c.state=e.memoizedState,h=n.getDerivedStateFromProps,typeof h=="function"&&(ca(e,n,h,s),c.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(n=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),n!==c.state&&$s.enqueueReplaceState(c,c.state,null),js(e,s,c,l),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Er(e,n){try{var s="",l=n;do s+=le(l),l=l.return;while(l);var c=s}catch(h){c=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:n,stack:c,digest:null}}function ha(e,n,s){return{value:e,source:null,stack:s??null,digest:n??null}}function fa(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var W0=typeof WeakMap=="function"?WeakMap:Map;function _h(e,n,s){s=Zt(-1,s),s.tag=3,s.payload={element:null};var l=n.value;return s.callback=function(){Js||(Js=!0,Ta=l),fa(e,n)},s}function yh(e,n,s){s=Zt(-1,s),s.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var c=n.value;s.payload=function(){return l(c)},s.callback=function(){fa(e,n)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(s.callback=function(){fa(e,n),typeof l!="function"&&(Cn===null?Cn=new Set([this]):Cn.add(this));var p=n.stack;this.componentDidCatch(n.value,{componentStack:p!==null?p:""})}),s}function vh(e,n,s){var l=e.pingCache;if(l===null){l=e.pingCache=new W0;var c=new Set;l.set(n,c)}else c=l.get(n),c===void 0&&(c=new Set,l.set(n,c));c.has(s)||(c.add(s),e=r_.bind(null,e,n,s),n.then(e,e))}function wh(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function xh(e,n,s,l,c){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=Zt(-1,1),n.tag=2,wn(s,n,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=c,e)}var H0=he.ReactCurrentOwner,st=!1;function et(e,n,s,l){n.child=e===null?Bd(n,null,s,l):vr(n,e.child,s,l)}function Ch(e,n,s,l,c){s=s.render;var h=n.ref;return xr(n,c),l=ia(e,n,s,l,h,c),s=sa(),e!==null&&!st?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~c,en(e,n,c)):(Ne&&s&&Bl(n),n.flags|=1,et(e,n,l,c),n.child)}function Eh(e,n,s,l,c){if(e===null){var h=s.type;return typeof h=="function"&&!Oa(h)&&h.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=h,Sh(e,n,h,l,c)):(e=io(s.type,null,l,n,n.mode,c),e.ref=n.ref,e.return=n,n.child=e)}if(h=e.child,(e.lanes&c)===0){var p=h.memoizedProps;if(s=s.compare,s=s!==null?s:li,s(p,l)&&e.ref===n.ref)return en(e,n,c)}return n.flags|=1,e=Nn(h,l),e.ref=n.ref,e.return=n,n.child=e}function Sh(e,n,s,l,c){if(e!==null){var h=e.memoizedProps;if(li(h,l)&&e.ref===n.ref)if(st=!1,n.pendingProps=l=h,(e.lanes&c)!==0)(e.flags&131072)!==0&&(st=!0);else return n.lanes=e.lanes,en(e,n,c)}return pa(e,n,s,l,c)}function kh(e,n,s){var l=n.pendingProps,c=l.children,h=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(kr,vt),vt|=s;else{if((s&1073741824)===0)return e=h!==null?h.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,ye(kr,vt),vt|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=h!==null?h.baseLanes:s,ye(kr,vt),vt|=l}else h!==null?(l=h.baseLanes|s,n.memoizedState=null):l=s,ye(kr,vt),vt|=l;return et(e,n,c,s),n.child}function Nh(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function pa(e,n,s,l,c){var h=it(s)?Fn:qe.current;return h=mr(n,h),xr(n,c),s=ia(e,n,s,l,h,c),l=sa(),e!==null&&!st?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~c,en(e,n,c)):(Ne&&l&&Bl(n),n.flags|=1,et(e,n,s,c),n.child)}function Ih(e,n,s,l,c){if(it(s)){var h=!0;Rs(n)}else h=!1;if(xr(n,c),n.stateNode===null)Gs(e,n),mh(n,s,l),da(n,s,l,c),l=!0;else if(e===null){var p=n.stateNode,w=n.memoizedProps;p.props=w;var x=p.context,I=s.contextType;typeof I=="object"&&I!==null?I=St(I):(I=it(s)?Fn:qe.current,I=mr(n,I));var b=s.getDerivedStateFromProps,O=typeof b=="function"||typeof p.getSnapshotBeforeUpdate=="function";O||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w!==l||x!==I)&&gh(n,p,l,I),vn=!1;var M=n.memoizedState;p.state=M,js(n,l,p,c),x=n.memoizedState,w!==l||M!==x||rt.current||vn?(typeof b=="function"&&(ca(n,s,b,l),x=n.memoizedState),(w=vn||ph(n,s,w,l,M,x,I))?(O||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(n.flags|=4194308)):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=x),p.props=l,p.state=x,p.context=I,l=w):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{p=n.stateNode,Wd(e,n),w=n.memoizedProps,I=n.type===n.elementType?w:At(n.type,w),p.props=I,O=n.pendingProps,M=p.context,x=s.contextType,typeof x=="object"&&x!==null?x=St(x):(x=it(s)?Fn:qe.current,x=mr(n,x));var U=s.getDerivedStateFromProps;(b=typeof U=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w!==O||M!==x)&&gh(n,p,l,x),vn=!1,M=n.memoizedState,p.state=M,js(n,l,p,c);var W=n.memoizedState;w!==O||M!==W||rt.current||vn?(typeof U=="function"&&(ca(n,s,U,l),W=n.memoizedState),(I=vn||ph(n,s,I,l,M,W,x)||!1)?(b||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,W,x),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,W,x)),typeof p.componentDidUpdate=="function"&&(n.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof p.componentDidUpdate!="function"||w===e.memoizedProps&&M===e.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&M===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=W),p.props=l,p.state=W,p.context=x,l=I):(typeof p.componentDidUpdate!="function"||w===e.memoizedProps&&M===e.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&M===e.memoizedState||(n.flags|=1024),l=!1)}return ma(e,n,s,l,h,c)}function ma(e,n,s,l,c,h){Nh(e,n);var p=(n.flags&128)!==0;if(!l&&!p)return c&&Md(n,s,!1),en(e,n,h);l=n.stateNode,H0.current=n;var w=p&&typeof s.getDerivedStateFromError!="function"?null:l.render();return n.flags|=1,e!==null&&p?(n.child=vr(n,e.child,null,h),n.child=vr(n,null,w,h)):et(e,n,w,h),n.memoizedState=l.state,c&&Md(n,s,!0),n.child}function Th(e){var n=e.stateNode;n.pendingContext?Pd(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Pd(e,n.context,!1),Jl(e,n.containerInfo)}function Rh(e,n,s,l,c){return yr(),$l(c),n.flags|=256,et(e,n,s,l),n.child}var ga={dehydrated:null,treeContext:null,retryLane:0};function _a(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ph(e,n,s){var l=n.pendingProps,c=Ie.current,h=!1,p=(n.flags&128)!==0,w;if((w=p)||(w=e!==null&&e.memoizedState===null?!1:(c&2)!==0),w?(h=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),ye(Ie,c&1),e===null)return Hl(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(p=l.children,e=l.fallback,h?(l=n.mode,h=n.child,p={mode:"hidden",children:p},(l&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=p):h=so(p,l,0,null),e=Gn(e,l,s,null),h.return=n,e.return=n,h.sibling=e,n.child=h,n.child.memoizedState=_a(s),n.memoizedState=ga,e):ya(n,p));if(c=e.memoizedState,c!==null&&(w=c.dehydrated,w!==null))return $0(e,n,p,l,w,c,s);if(h){h=l.fallback,p=n.mode,c=e.child,w=c.sibling;var x={mode:"hidden",children:l.children};return(p&1)===0&&n.child!==c?(l=n.child,l.childLanes=0,l.pendingProps=x,n.deletions=null):(l=Nn(c,x),l.subtreeFlags=c.subtreeFlags&14680064),w!==null?h=Nn(w,h):(h=Gn(h,p,s,null),h.flags|=2),h.return=n,l.return=n,l.sibling=h,n.child=l,l=h,h=n.child,p=e.child.memoizedState,p=p===null?_a(s):{baseLanes:p.baseLanes|s,cachePool:null,transitions:p.transitions},h.memoizedState=p,h.childLanes=e.childLanes&~s,n.memoizedState=ga,l}return h=e.child,e=h.sibling,l=Nn(h,{mode:"visible",children:l.children}),(n.mode&1)===0&&(l.lanes=s),l.return=n,l.sibling=null,e!==null&&(s=n.deletions,s===null?(n.deletions=[e],n.flags|=16):s.push(e)),n.child=l,n.memoizedState=null,l}function ya(e,n){return n=so({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Qs(e,n,s,l){return l!==null&&$l(l),vr(n,e.child,null,s),e=ya(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function $0(e,n,s,l,c,h,p){if(s)return n.flags&256?(n.flags&=-257,l=ha(Error(r(422))),Qs(e,n,p,l)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(h=l.fallback,c=n.mode,l=so({mode:"visible",children:l.children},c,0,null),h=Gn(h,c,p,null),h.flags|=2,l.return=n,h.return=n,l.sibling=h,n.child=l,(n.mode&1)!==0&&vr(n,e.child,null,p),n.child.memoizedState=_a(p),n.memoizedState=ga,h);if((n.mode&1)===0)return Qs(e,n,p,null);if(c.data==="$!"){if(l=c.nextSibling&&c.nextSibling.dataset,l)var w=l.dgst;return l=w,h=Error(r(419)),l=ha(h,l,void 0),Qs(e,n,p,l)}if(w=(p&e.childLanes)!==0,st||w){if(l=ze,l!==null){switch(p&-p){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=(c&(l.suspendedLanes|p))!==0?0:c,c!==0&&c!==h.retryLane&&(h.retryLane=c,Jt(e,c),Lt(l,e,c,-1))}return ba(),l=ha(Error(r(421))),Qs(e,n,p,l)}return c.data==="$?"?(n.flags|=128,n.child=e.child,n=i_.bind(null,e),c._reactRetry=n,null):(e=h.treeContext,yt=mn(c.nextSibling),_t=n,Ne=!0,Mt=null,e!==null&&(Ct[Et++]=Yt,Ct[Et++]=Xt,Ct[Et++]=jn,Yt=e.id,Xt=e.overflow,jn=n),n=ya(n,l.children),n.flags|=4096,n)}function Dh(e,n,s){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),ql(e.return,n,s)}function va(e,n,s,l,c){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:c}:(h.isBackwards=n,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=s,h.tailMode=c)}function Mh(e,n,s){var l=n.pendingProps,c=l.revealOrder,h=l.tail;if(et(e,n,l.children,s),l=Ie.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dh(e,s,n);else if(e.tag===19)Dh(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(ye(Ie,l),(n.mode&1)===0)n.memoizedState=null;else switch(c){case"forwards":for(s=n.child,c=null;s!==null;)e=s.alternate,e!==null&&zs(e)===null&&(c=s),s=s.sibling;s=c,s===null?(c=n.child,n.child=null):(c=s.sibling,s.sibling=null),va(n,!1,c,s,h);break;case"backwards":for(s=null,c=n.child,n.child=null;c!==null;){if(e=c.alternate,e!==null&&zs(e)===null){n.child=c;break}e=c.sibling,c.sibling=s,s=c,c=e}va(n,!0,s,null,h);break;case"together":va(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Gs(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function en(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),Wn|=n.lanes,(s&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,s=Nn(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=Nn(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function Q0(e,n,s){switch(n.tag){case 3:Th(n),yr();break;case 5:Qd(n);break;case 1:it(n.type)&&Rs(n);break;case 4:Jl(n,n.stateNode.containerInfo);break;case 10:var l=n.type._context,c=n.memoizedProps.value;ye(Os,l._currentValue),l._currentValue=c;break;case 13:if(l=n.memoizedState,l!==null)return l.dehydrated!==null?(ye(Ie,Ie.current&1),n.flags|=128,null):(s&n.child.childLanes)!==0?Ph(e,n,s):(ye(Ie,Ie.current&1),e=en(e,n,s),e!==null?e.sibling:null);ye(Ie,Ie.current&1);break;case 19:if(l=(s&n.childLanes)!==0,(e.flags&128)!==0){if(l)return Mh(e,n,s);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),ye(Ie,Ie.current),l)break;return null;case 22:case 23:return n.lanes=0,kh(e,n,s)}return en(e,n,s)}var Ah,wa,bh,Oh;Ah=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},wa=function(){},bh=function(e,n,s,l){var c=e.memoizedProps;if(c!==l){e=n.stateNode,Bn(Ht.current);var h=null;switch(s){case"input":c=qo(e,c),l=qo(e,l),h=[];break;case"select":c=V({},c,{value:void 0}),l=V({},l,{value:void 0}),h=[];break;case"textarea":c=Jo(e,c),l=Jo(e,l),h=[];break;default:typeof c.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=Ns)}el(s,l);var p;s=null;for(I in c)if(!l.hasOwnProperty(I)&&c.hasOwnProperty(I)&&c[I]!=null)if(I==="style"){var w=c[I];for(p in w)w.hasOwnProperty(p)&&(s||(s={}),s[p]="")}else I!=="dangerouslySetInnerHTML"&&I!=="children"&&I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(a.hasOwnProperty(I)?h||(h=[]):(h=h||[]).push(I,null));for(I in l){var x=l[I];if(w=c!=null?c[I]:void 0,l.hasOwnProperty(I)&&x!==w&&(x!=null||w!=null))if(I==="style")if(w){for(p in w)!w.hasOwnProperty(p)||x&&x.hasOwnProperty(p)||(s||(s={}),s[p]="");for(p in x)x.hasOwnProperty(p)&&w[p]!==x[p]&&(s||(s={}),s[p]=x[p])}else s||(h||(h=[]),h.push(I,s)),s=x;else I==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,w=w?w.__html:void 0,x!=null&&w!==x&&(h=h||[]).push(I,x)):I==="children"?typeof x!="string"&&typeof x!="number"||(h=h||[]).push(I,""+x):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&(a.hasOwnProperty(I)?(x!=null&&I==="onScroll"&&xe("scroll",e),h||w===x||(h=[])):(h=h||[]).push(I,x))}s&&(h=h||[]).push("style",s);var I=h;(n.updateQueue=I)&&(n.flags|=4)}},Oh=function(e,n,s,l){s!==l&&(n.flags|=4)};function Ci(e,n){if(!Ne)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Xe(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(n)for(var c=e.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags&14680064,l|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=l,e.childLanes=s,n}function G0(e,n,s){var l=n.pendingProps;switch(Vl(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(n),null;case 1:return it(n.type)&&Ts(),Xe(n),null;case 3:return l=n.stateNode,Cr(),Ce(rt),Ce(qe),ta(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(As(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Mt!==null&&(Da(Mt),Mt=null))),wa(e,n),Xe(n),null;case 5:Zl(n);var c=Bn(_i.current);if(s=n.type,e!==null&&n.stateNode!=null)bh(e,n,s,l,c),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!l){if(n.stateNode===null)throw Error(r(166));return Xe(n),null}if(e=Bn(Ht.current),As(n)){l=n.stateNode,s=n.type;var h=n.memoizedProps;switch(l[Wt]=n,l[hi]=h,e=(n.mode&1)!==0,s){case"dialog":xe("cancel",l),xe("close",l);break;case"iframe":case"object":case"embed":xe("load",l);break;case"video":case"audio":for(c=0;c<ui.length;c++)xe(ui[c],l);break;case"source":xe("error",l);break;case"img":case"image":case"link":xe("error",l),xe("load",l);break;case"details":xe("toggle",l);break;case"input":mc(l,h),xe("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!h.multiple},xe("invalid",l);break;case"textarea":yc(l,h),xe("invalid",l)}el(s,h),c=null;for(var p in h)if(h.hasOwnProperty(p)){var w=h[p];p==="children"?typeof w=="string"?l.textContent!==w&&(h.suppressHydrationWarning!==!0&&ks(l.textContent,w,e),c=["children",w]):typeof w=="number"&&l.textContent!==""+w&&(h.suppressHydrationWarning!==!0&&ks(l.textContent,w,e),c=["children",""+w]):a.hasOwnProperty(p)&&w!=null&&p==="onScroll"&&xe("scroll",l)}switch(s){case"input":ns(l),_c(l,h,!0);break;case"textarea":ns(l),wc(l);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(l.onclick=Ns)}l=c,n.updateQueue=l,l!==null&&(n.flags|=4)}else{p=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xc(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=p.createElement(s,{is:l.is}):(e=p.createElement(s),s==="select"&&(p=e,l.multiple?p.multiple=!0:l.size&&(p.size=l.size))):e=p.createElementNS(e,s),e[Wt]=n,e[hi]=l,Ah(e,n,!1,!1),n.stateNode=e;e:{switch(p=tl(s,l),s){case"dialog":xe("cancel",e),xe("close",e),c=l;break;case"iframe":case"object":case"embed":xe("load",e),c=l;break;case"video":case"audio":for(c=0;c<ui.length;c++)xe(ui[c],e);c=l;break;case"source":xe("error",e),c=l;break;case"img":case"image":case"link":xe("error",e),xe("load",e),c=l;break;case"details":xe("toggle",e),c=l;break;case"input":mc(e,l),c=qo(e,l),xe("invalid",e);break;case"option":c=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},c=V({},l,{value:void 0}),xe("invalid",e);break;case"textarea":yc(e,l),c=Jo(e,l),xe("invalid",e);break;default:c=l}el(s,c),w=c;for(h in w)if(w.hasOwnProperty(h)){var x=w[h];h==="style"?Sc(e,x):h==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&Cc(e,x)):h==="children"?typeof x=="string"?(s!=="textarea"||x!=="")&&Hr(e,x):typeof x=="number"&&Hr(e,""+x):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(a.hasOwnProperty(h)?x!=null&&h==="onScroll"&&xe("scroll",e):x!=null&&ee(e,h,x,p))}switch(s){case"input":ns(e),_c(e,l,!1);break;case"textarea":ns(e),wc(e);break;case"option":l.value!=null&&e.setAttribute("value",""+fe(l.value));break;case"select":e.multiple=!!l.multiple,h=l.value,h!=null?rr(e,!!l.multiple,h,!1):l.defaultValue!=null&&rr(e,!!l.multiple,l.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Ns)}switch(s){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Xe(n),null;case 6:if(e&&n.stateNode!=null)Oh(e,n,e.memoizedProps,l);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(s=Bn(_i.current),Bn(Ht.current),As(n)){if(l=n.stateNode,s=n.memoizedProps,l[Wt]=n,(h=l.nodeValue!==s)&&(e=_t,e!==null))switch(e.tag){case 3:ks(l.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ks(l.nodeValue,s,(e.mode&1)!==0)}h&&(n.flags|=4)}else l=(s.nodeType===9?s:s.ownerDocument).createTextNode(l),l[Wt]=n,n.stateNode=l}return Xe(n),null;case 13:if(Ce(Ie),l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ne&&yt!==null&&(n.mode&1)!==0&&(n.flags&128)===0)jd(),yr(),n.flags|=98560,h=!1;else if(h=As(n),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(r(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Wt]=n}else yr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Xe(n),h=!1}else Mt!==null&&(Da(Mt),Mt=null),h=!0;if(!h)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=s,n):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(Ie.current&1)!==0?Le===0&&(Le=3):ba())),n.updateQueue!==null&&(n.flags|=4),Xe(n),null);case 4:return Cr(),wa(e,n),e===null&&ci(n.stateNode.containerInfo),Xe(n),null;case 10:return Kl(n.type._context),Xe(n),null;case 17:return it(n.type)&&Ts(),Xe(n),null;case 19:if(Ce(Ie),h=n.memoizedState,h===null)return Xe(n),null;if(l=(n.flags&128)!==0,p=h.rendering,p===null)if(l)Ci(h,!1);else{if(Le!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(p=zs(e),p!==null){for(n.flags|=128,Ci(h,!1),l=p.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),n.subtreeFlags=0,l=s,s=n.child;s!==null;)h=s,e=l,h.flags&=14680066,p=h.alternate,p===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=p.childLanes,h.lanes=p.lanes,h.child=p.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=p.memoizedProps,h.memoizedState=p.memoizedState,h.updateQueue=p.updateQueue,h.type=p.type,e=p.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return ye(Ie,Ie.current&1|2),n.child}e=e.sibling}h.tail!==null&&Me()>Nr&&(n.flags|=128,l=!0,Ci(h,!1),n.lanes=4194304)}else{if(!l)if(e=zs(p),e!==null){if(n.flags|=128,l=!0,s=e.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),Ci(h,!0),h.tail===null&&h.tailMode==="hidden"&&!p.alternate&&!Ne)return Xe(n),null}else 2*Me()-h.renderingStartTime>Nr&&s!==1073741824&&(n.flags|=128,l=!0,Ci(h,!1),n.lanes=4194304);h.isBackwards?(p.sibling=n.child,n.child=p):(s=h.last,s!==null?s.sibling=p:n.child=p,h.last=p)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=Me(),n.sibling=null,s=Ie.current,ye(Ie,l?s&1|2:s&1),n):(Xe(n),null);case 22:case 23:return Aa(),l=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(n.flags|=8192),l&&(n.mode&1)!==0?(vt&1073741824)!==0&&(Xe(n),n.subtreeFlags&6&&(n.flags|=8192)):Xe(n),null;case 24:return null;case 25:return null}throw Error(r(156,n.tag))}function K0(e,n){switch(Vl(n),n.tag){case 1:return it(n.type)&&Ts(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Cr(),Ce(rt),Ce(qe),ta(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return Zl(n),null;case 13:if(Ce(Ie),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));yr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Ce(Ie),null;case 4:return Cr(),null;case 10:return Kl(n.type._context),null;case 22:case 23:return Aa(),null;case 24:return null;default:return null}}var Ks=!1,Je=!1,q0=typeof WeakSet=="function"?WeakSet:Set,B=null;function Sr(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(l){Pe(e,n,l)}else s.current=null}function xa(e,n,s){try{s()}catch(l){Pe(e,n,l)}}var Lh=!1;function Y0(e,n){if(Al=ps,e=pd(),kl(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var c=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{s.nodeType,h.nodeType}catch{s=null;break e}var p=0,w=-1,x=-1,I=0,b=0,O=e,M=null;t:for(;;){for(var U;O!==s||c!==0&&O.nodeType!==3||(w=p+c),O!==h||l!==0&&O.nodeType!==3||(x=p+l),O.nodeType===3&&(p+=O.nodeValue.length),(U=O.firstChild)!==null;)M=O,O=U;for(;;){if(O===e)break t;if(M===s&&++I===c&&(w=p),M===h&&++b===l&&(x=p),(U=O.nextSibling)!==null)break;O=M,M=O.parentNode}O=U}s=w===-1||x===-1?null:{start:w,end:x}}else s=null}s=s||{start:0,end:0}}else s=null;for(bl={focusedElem:e,selectionRange:s},ps=!1,B=n;B!==null;)if(n=B,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,B=e;else for(;B!==null;){n=B;try{var W=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(W!==null){var H=W.memoizedProps,Ae=W.memoizedState,k=n.stateNode,E=k.getSnapshotBeforeUpdate(n.elementType===n.type?H:At(n.type,H),Ae);k.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var N=n.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(L){Pe(n,n.return,L)}if(e=n.sibling,e!==null){e.return=n.return,B=e;break}B=n.return}return W=Lh,Lh=!1,W}function Ei(e,n,s){var l=n.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var c=l=l.next;do{if((c.tag&e)===e){var h=c.destroy;c.destroy=void 0,h!==void 0&&xa(n,s,h)}c=c.next}while(c!==l)}}function qs(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var l=s.create;s.destroy=l()}s=s.next}while(s!==n)}}function Ca(e){var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof n=="function"?n(e):n.current=e}}function Fh(e){var n=e.alternate;n!==null&&(e.alternate=null,Fh(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Wt],delete n[hi],delete n[jl],delete n[M0],delete n[A0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jh(e){return e.tag===5||e.tag===3||e.tag===4}function zh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ea(e,n,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Ns));else if(l!==4&&(e=e.child,e!==null))for(Ea(e,n,s),e=e.sibling;e!==null;)Ea(e,n,s),e=e.sibling}function Sa(e,n,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(Sa(e,n,s),e=e.sibling;e!==null;)Sa(e,n,s),e=e.sibling}var $e=null,bt=!1;function xn(e,n,s){for(s=s.child;s!==null;)Uh(e,n,s),s=s.sibling}function Uh(e,n,s){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(as,s)}catch{}switch(s.tag){case 5:Je||Sr(s,n);case 6:var l=$e,c=bt;$e=null,xn(e,n,s),$e=l,bt=c,$e!==null&&(bt?(e=$e,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):$e.removeChild(s.stateNode));break;case 18:$e!==null&&(bt?(e=$e,s=s.stateNode,e.nodeType===8?Fl(e.parentNode,s):e.nodeType===1&&Fl(e,s),ti(e)):Fl($e,s.stateNode));break;case 4:l=$e,c=bt,$e=s.stateNode.containerInfo,bt=!0,xn(e,n,s),$e=l,bt=c;break;case 0:case 11:case 14:case 15:if(!Je&&(l=s.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){c=l=l.next;do{var h=c,p=h.destroy;h=h.tag,p!==void 0&&((h&2)!==0||(h&4)!==0)&&xa(s,n,p),c=c.next}while(c!==l)}xn(e,n,s);break;case 1:if(!Je&&(Sr(s,n),l=s.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=s.memoizedProps,l.state=s.memoizedState,l.componentWillUnmount()}catch(w){Pe(s,n,w)}xn(e,n,s);break;case 21:xn(e,n,s);break;case 22:s.mode&1?(Je=(l=Je)||s.memoizedState!==null,xn(e,n,s),Je=l):xn(e,n,s);break;default:xn(e,n,s)}}function Bh(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new q0),n.forEach(function(l){var c=s_.bind(null,e,l);s.has(l)||(s.add(l),l.then(c,c))})}}function Ot(e,n){var s=n.deletions;if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];try{var h=e,p=n,w=p;e:for(;w!==null;){switch(w.tag){case 5:$e=w.stateNode,bt=!1;break e;case 3:$e=w.stateNode.containerInfo,bt=!0;break e;case 4:$e=w.stateNode.containerInfo,bt=!0;break e}w=w.return}if($e===null)throw Error(r(160));Uh(h,p,c),$e=null,bt=!1;var x=c.alternate;x!==null&&(x.return=null),c.return=null}catch(I){Pe(c,n,I)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Vh(n,e),n=n.sibling}function Vh(e,n){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ot(n,e),Qt(e),l&4){try{Ei(3,e,e.return),qs(3,e)}catch(H){Pe(e,e.return,H)}try{Ei(5,e,e.return)}catch(H){Pe(e,e.return,H)}}break;case 1:Ot(n,e),Qt(e),l&512&&s!==null&&Sr(s,s.return);break;case 5:if(Ot(n,e),Qt(e),l&512&&s!==null&&Sr(s,s.return),e.flags&32){var c=e.stateNode;try{Hr(c,"")}catch(H){Pe(e,e.return,H)}}if(l&4&&(c=e.stateNode,c!=null)){var h=e.memoizedProps,p=s!==null?s.memoizedProps:h,w=e.type,x=e.updateQueue;if(e.updateQueue=null,x!==null)try{w==="input"&&h.type==="radio"&&h.name!=null&&gc(c,h),tl(w,p);var I=tl(w,h);for(p=0;p<x.length;p+=2){var b=x[p],O=x[p+1];b==="style"?Sc(c,O):b==="dangerouslySetInnerHTML"?Cc(c,O):b==="children"?Hr(c,O):ee(c,b,O,I)}switch(w){case"input":Yo(c,h);break;case"textarea":vc(c,h);break;case"select":var M=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!h.multiple;var U=h.value;U!=null?rr(c,!!h.multiple,U,!1):M!==!!h.multiple&&(h.defaultValue!=null?rr(c,!!h.multiple,h.defaultValue,!0):rr(c,!!h.multiple,h.multiple?[]:"",!1))}c[hi]=h}catch(H){Pe(e,e.return,H)}}break;case 6:if(Ot(n,e),Qt(e),l&4){if(e.stateNode===null)throw Error(r(162));c=e.stateNode,h=e.memoizedProps;try{c.nodeValue=h}catch(H){Pe(e,e.return,H)}}break;case 3:if(Ot(n,e),Qt(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{ti(n.containerInfo)}catch(H){Pe(e,e.return,H)}break;case 4:Ot(n,e),Qt(e);break;case 13:Ot(n,e),Qt(e),c=e.child,c.flags&8192&&(h=c.memoizedState!==null,c.stateNode.isHidden=h,!h||c.alternate!==null&&c.alternate.memoizedState!==null||(Ia=Me())),l&4&&Bh(e);break;case 22:if(b=s!==null&&s.memoizedState!==null,e.mode&1?(Je=(I=Je)||b,Ot(n,e),Je=I):Ot(n,e),Qt(e),l&8192){if(I=e.memoizedState!==null,(e.stateNode.isHidden=I)&&!b&&(e.mode&1)!==0)for(B=e,b=e.child;b!==null;){for(O=B=b;B!==null;){switch(M=B,U=M.child,M.tag){case 0:case 11:case 14:case 15:Ei(4,M,M.return);break;case 1:Sr(M,M.return);var W=M.stateNode;if(typeof W.componentWillUnmount=="function"){l=M,s=M.return;try{n=l,W.props=n.memoizedProps,W.state=n.memoizedState,W.componentWillUnmount()}catch(H){Pe(l,s,H)}}break;case 5:Sr(M,M.return);break;case 22:if(M.memoizedState!==null){$h(O);continue}}U!==null?(U.return=M,B=U):$h(O)}b=b.sibling}e:for(b=null,O=e;;){if(O.tag===5){if(b===null){b=O;try{c=O.stateNode,I?(h=c.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(w=O.stateNode,x=O.memoizedProps.style,p=x!=null&&x.hasOwnProperty("display")?x.display:null,w.style.display=Ec("display",p))}catch(H){Pe(e,e.return,H)}}}else if(O.tag===6){if(b===null)try{O.stateNode.nodeValue=I?"":O.memoizedProps}catch(H){Pe(e,e.return,H)}}else if((O.tag!==22&&O.tag!==23||O.memoizedState===null||O===e)&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===e)break e;for(;O.sibling===null;){if(O.return===null||O.return===e)break e;b===O&&(b=null),O=O.return}b===O&&(b=null),O.sibling.return=O.return,O=O.sibling}}break;case 19:Ot(n,e),Qt(e),l&4&&Bh(e);break;case 21:break;default:Ot(n,e),Qt(e)}}function Qt(e){var n=e.flags;if(n&2){try{e:{for(var s=e.return;s!==null;){if(jh(s)){var l=s;break e}s=s.return}throw Error(r(160))}switch(l.tag){case 5:var c=l.stateNode;l.flags&32&&(Hr(c,""),l.flags&=-33);var h=zh(e);Sa(e,h,c);break;case 3:case 4:var p=l.stateNode.containerInfo,w=zh(e);Ea(e,w,p);break;default:throw Error(r(161))}}catch(x){Pe(e,e.return,x)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function X0(e,n,s){B=e,Wh(e)}function Wh(e,n,s){for(var l=(e.mode&1)!==0;B!==null;){var c=B,h=c.child;if(c.tag===22&&l){var p=c.memoizedState!==null||Ks;if(!p){var w=c.alternate,x=w!==null&&w.memoizedState!==null||Je;w=Ks;var I=Je;if(Ks=p,(Je=x)&&!I)for(B=c;B!==null;)p=B,x=p.child,p.tag===22&&p.memoizedState!==null?Qh(c):x!==null?(x.return=p,B=x):Qh(c);for(;h!==null;)B=h,Wh(h),h=h.sibling;B=c,Ks=w,Je=I}Hh(e)}else(c.subtreeFlags&8772)!==0&&h!==null?(h.return=c,B=h):Hh(e)}}function Hh(e){for(;B!==null;){var n=B;if((n.flags&8772)!==0){var s=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:Je||qs(5,n);break;case 1:var l=n.stateNode;if(n.flags&4&&!Je)if(s===null)l.componentDidMount();else{var c=n.elementType===n.type?s.memoizedProps:At(n.type,s.memoizedProps);l.componentDidUpdate(c,s.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var h=n.updateQueue;h!==null&&$d(n,h,l);break;case 3:var p=n.updateQueue;if(p!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}$d(n,p,s)}break;case 5:var w=n.stateNode;if(s===null&&n.flags&4){s=w;var x=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&s.focus();break;case"img":x.src&&(s.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var I=n.alternate;if(I!==null){var b=I.memoizedState;if(b!==null){var O=b.dehydrated;O!==null&&ti(O)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Je||n.flags&512&&Ca(n)}catch(M){Pe(n,n.return,M)}}if(n===e){B=null;break}if(s=n.sibling,s!==null){s.return=n.return,B=s;break}B=n.return}}function $h(e){for(;B!==null;){var n=B;if(n===e){B=null;break}var s=n.sibling;if(s!==null){s.return=n.return,B=s;break}B=n.return}}function Qh(e){for(;B!==null;){var n=B;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{qs(4,n)}catch(x){Pe(n,s,x)}break;case 1:var l=n.stateNode;if(typeof l.componentDidMount=="function"){var c=n.return;try{l.componentDidMount()}catch(x){Pe(n,c,x)}}var h=n.return;try{Ca(n)}catch(x){Pe(n,h,x)}break;case 5:var p=n.return;try{Ca(n)}catch(x){Pe(n,p,x)}}}catch(x){Pe(n,n.return,x)}if(n===e){B=null;break}var w=n.sibling;if(w!==null){w.return=n.return,B=w;break}B=n.return}}var J0=Math.ceil,Ys=he.ReactCurrentDispatcher,ka=he.ReactCurrentOwner,Nt=he.ReactCurrentBatchConfig,oe=0,ze=null,be=null,Qe=0,vt=0,kr=gn(0),Le=0,Si=null,Wn=0,Xs=0,Na=0,ki=null,ot=null,Ia=0,Nr=1/0,tn=null,Js=!1,Ta=null,Cn=null,Zs=!1,En=null,eo=0,Ni=0,Ra=null,to=-1,no=0;function tt(){return(oe&6)!==0?Me():to!==-1?to:to=Me()}function Sn(e){return(e.mode&1)===0?1:(oe&2)!==0&&Qe!==0?Qe&-Qe:O0.transition!==null?(no===0&&(no=zc()),no):(e=pe,e!==0||(e=window.event,e=e===void 0?16:Kc(e.type)),e)}function Lt(e,n,s,l){if(50<Ni)throw Ni=0,Ra=null,Error(r(185));Yr(e,s,l),((oe&2)===0||e!==ze)&&(e===ze&&((oe&2)===0&&(Xs|=s),Le===4&&kn(e,Qe)),lt(e,l),s===1&&oe===0&&(n.mode&1)===0&&(Nr=Me()+500,Ps&&yn()))}function lt(e,n){var s=e.callbackNode;Og(e,n);var l=ds(e,e===ze?Qe:0);if(l===0)s!==null&&Lc(s),e.callbackNode=null,e.callbackPriority=0;else if(n=l&-l,e.callbackPriority!==n){if(s!=null&&Lc(s),n===1)e.tag===0?b0(Kh.bind(null,e)):Ad(Kh.bind(null,e)),P0(function(){(oe&6)===0&&yn()}),s=null;else{switch(Uc(l)){case 1:s=al;break;case 4:s=Fc;break;case 16:s=ls;break;case 536870912:s=jc;break;default:s=ls}s=nf(s,Gh.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function Gh(e,n){if(to=-1,no=0,(oe&6)!==0)throw Error(r(327));var s=e.callbackNode;if(Ir()&&e.callbackNode!==s)return null;var l=ds(e,e===ze?Qe:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||n)n=ro(e,l);else{n=l;var c=oe;oe|=2;var h=Yh();(ze!==e||Qe!==n)&&(tn=null,Nr=Me()+500,$n(e,n));do try{t_();break}catch(w){qh(e,w)}while(!0);Gl(),Ys.current=h,oe=c,be!==null?n=0:(ze=null,Qe=0,n=Le)}if(n!==0){if(n===2&&(c=ul(e),c!==0&&(l=c,n=Pa(e,c))),n===1)throw s=Si,$n(e,0),kn(e,l),lt(e,Me()),s;if(n===6)kn(e,l);else{if(c=e.current.alternate,(l&30)===0&&!Z0(c)&&(n=ro(e,l),n===2&&(h=ul(e),h!==0&&(l=h,n=Pa(e,h))),n===1))throw s=Si,$n(e,0),kn(e,l),lt(e,Me()),s;switch(e.finishedWork=c,e.finishedLanes=l,n){case 0:case 1:throw Error(r(345));case 2:Qn(e,ot,tn);break;case 3:if(kn(e,l),(l&130023424)===l&&(n=Ia+500-Me(),10<n)){if(ds(e,0)!==0)break;if(c=e.suspendedLanes,(c&l)!==l){tt(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Ll(Qn.bind(null,e,ot,tn),n);break}Qn(e,ot,tn);break;case 4:if(kn(e,l),(l&4194240)===l)break;for(n=e.eventTimes,c=-1;0<l;){var p=31-Pt(l);h=1<<p,p=n[p],p>c&&(c=p),l&=~h}if(l=c,l=Me()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*J0(l/1960))-l,10<l){e.timeoutHandle=Ll(Qn.bind(null,e,ot,tn),l);break}Qn(e,ot,tn);break;case 5:Qn(e,ot,tn);break;default:throw Error(r(329))}}}return lt(e,Me()),e.callbackNode===s?Gh.bind(null,e):null}function Pa(e,n){var s=ki;return e.current.memoizedState.isDehydrated&&($n(e,n).flags|=256),e=ro(e,n),e!==2&&(n=ot,ot=s,n!==null&&Da(n)),e}function Da(e){ot===null?ot=e:ot.push.apply(ot,e)}function Z0(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var l=0;l<s.length;l++){var c=s[l],h=c.getSnapshot;c=c.value;try{if(!Dt(h(),c))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function kn(e,n){for(n&=~Na,n&=~Xs,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-Pt(n),l=1<<s;e[s]=-1,n&=~l}}function Kh(e){if((oe&6)!==0)throw Error(r(327));Ir();var n=ds(e,0);if((n&1)===0)return lt(e,Me()),null;var s=ro(e,n);if(e.tag!==0&&s===2){var l=ul(e);l!==0&&(n=l,s=Pa(e,l))}if(s===1)throw s=Si,$n(e,0),kn(e,n),lt(e,Me()),s;if(s===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Qn(e,ot,tn),lt(e,Me()),null}function Ma(e,n){var s=oe;oe|=1;try{return e(n)}finally{oe=s,oe===0&&(Nr=Me()+500,Ps&&yn())}}function Hn(e){En!==null&&En.tag===0&&(oe&6)===0&&Ir();var n=oe;oe|=1;var s=Nt.transition,l=pe;try{if(Nt.transition=null,pe=1,e)return e()}finally{pe=l,Nt.transition=s,oe=n,(oe&6)===0&&yn()}}function Aa(){vt=kr.current,Ce(kr)}function $n(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,R0(s)),be!==null)for(s=be.return;s!==null;){var l=s;switch(Vl(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&Ts();break;case 3:Cr(),Ce(rt),Ce(qe),ta();break;case 5:Zl(l);break;case 4:Cr();break;case 13:Ce(Ie);break;case 19:Ce(Ie);break;case 10:Kl(l.type._context);break;case 22:case 23:Aa()}s=s.return}if(ze=e,be=e=Nn(e.current,null),Qe=vt=n,Le=0,Si=null,Na=Xs=Wn=0,ot=ki=null,Un!==null){for(n=0;n<Un.length;n++)if(s=Un[n],l=s.interleaved,l!==null){s.interleaved=null;var c=l.next,h=s.pending;if(h!==null){var p=h.next;h.next=c,l.next=p}s.pending=l}Un=null}return e}function qh(e,n){do{var s=be;try{if(Gl(),Us.current=Hs,Bs){for(var l=Te.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}Bs=!1}if(Vn=0,je=Oe=Te=null,yi=!1,vi=0,ka.current=null,s===null||s.return===null){Le=1,Si=n,be=null;break}e:{var h=e,p=s.return,w=s,x=n;if(n=Qe,w.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var I=x,b=w,O=b.tag;if((b.mode&1)===0&&(O===0||O===11||O===15)){var M=b.alternate;M?(b.updateQueue=M.updateQueue,b.memoizedState=M.memoizedState,b.lanes=M.lanes):(b.updateQueue=null,b.memoizedState=null)}var U=wh(p);if(U!==null){U.flags&=-257,xh(U,p,w,h,n),U.mode&1&&vh(h,I,n),n=U,x=I;var W=n.updateQueue;if(W===null){var H=new Set;H.add(x),n.updateQueue=H}else W.add(x);break e}else{if((n&1)===0){vh(h,I,n),ba();break e}x=Error(r(426))}}else if(Ne&&w.mode&1){var Ae=wh(p);if(Ae!==null){(Ae.flags&65536)===0&&(Ae.flags|=256),xh(Ae,p,w,h,n),$l(Er(x,w));break e}}h=x=Er(x,w),Le!==4&&(Le=2),ki===null?ki=[h]:ki.push(h),h=p;do{switch(h.tag){case 3:h.flags|=65536,n&=-n,h.lanes|=n;var k=_h(h,x,n);Hd(h,k);break e;case 1:w=x;var E=h.type,N=h.stateNode;if((h.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Cn===null||!Cn.has(N)))){h.flags|=65536,n&=-n,h.lanes|=n;var L=yh(h,w,n);Hd(h,L);break e}}h=h.return}while(h!==null)}Jh(s)}catch($){n=$,be===s&&s!==null&&(be=s=s.return);continue}break}while(!0)}function Yh(){var e=Ys.current;return Ys.current=Hs,e===null?Hs:e}function ba(){(Le===0||Le===3||Le===2)&&(Le=4),ze===null||(Wn&268435455)===0&&(Xs&268435455)===0||kn(ze,Qe)}function ro(e,n){var s=oe;oe|=2;var l=Yh();(ze!==e||Qe!==n)&&(tn=null,$n(e,n));do try{e_();break}catch(c){qh(e,c)}while(!0);if(Gl(),oe=s,Ys.current=l,be!==null)throw Error(r(261));return ze=null,Qe=0,Le}function e_(){for(;be!==null;)Xh(be)}function t_(){for(;be!==null&&!Ng();)Xh(be)}function Xh(e){var n=tf(e.alternate,e,vt);e.memoizedProps=e.pendingProps,n===null?Jh(e):be=n,ka.current=null}function Jh(e){var n=e;do{var s=n.alternate;if(e=n.return,(n.flags&32768)===0){if(s=G0(s,n,vt),s!==null){be=s;return}}else{if(s=K0(s,n),s!==null){s.flags&=32767,be=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Le=6,be=null;return}}if(n=n.sibling,n!==null){be=n;return}be=n=e}while(n!==null);Le===0&&(Le=5)}function Qn(e,n,s){var l=pe,c=Nt.transition;try{Nt.transition=null,pe=1,n_(e,n,s,l)}finally{Nt.transition=c,pe=l}return null}function n_(e,n,s,l){do Ir();while(En!==null);if((oe&6)!==0)throw Error(r(327));s=e.finishedWork;var c=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var h=s.lanes|s.childLanes;if(Lg(e,h),e===ze&&(be=ze=null,Qe=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Zs||(Zs=!0,nf(ls,function(){return Ir(),null})),h=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||h){h=Nt.transition,Nt.transition=null;var p=pe;pe=1;var w=oe;oe|=4,ka.current=null,Y0(e,s),Vh(s,e),C0(bl),ps=!!Al,bl=Al=null,e.current=s,X0(s),Ig(),oe=w,pe=p,Nt.transition=h}else e.current=s;if(Zs&&(Zs=!1,En=e,eo=c),h=e.pendingLanes,h===0&&(Cn=null),Pg(s.stateNode),lt(e,Me()),n!==null)for(l=e.onRecoverableError,s=0;s<n.length;s++)c=n[s],l(c.value,{componentStack:c.stack,digest:c.digest});if(Js)throw Js=!1,e=Ta,Ta=null,e;return(eo&1)!==0&&e.tag!==0&&Ir(),h=e.pendingLanes,(h&1)!==0?e===Ra?Ni++:(Ni=0,Ra=e):Ni=0,yn(),null}function Ir(){if(En!==null){var e=Uc(eo),n=Nt.transition,s=pe;try{if(Nt.transition=null,pe=16>e?16:e,En===null)var l=!1;else{if(e=En,En=null,eo=0,(oe&6)!==0)throw Error(r(331));var c=oe;for(oe|=4,B=e.current;B!==null;){var h=B,p=h.child;if((B.flags&16)!==0){var w=h.deletions;if(w!==null){for(var x=0;x<w.length;x++){var I=w[x];for(B=I;B!==null;){var b=B;switch(b.tag){case 0:case 11:case 15:Ei(8,b,h)}var O=b.child;if(O!==null)O.return=b,B=O;else for(;B!==null;){b=B;var M=b.sibling,U=b.return;if(Fh(b),b===I){B=null;break}if(M!==null){M.return=U,B=M;break}B=U}}}var W=h.alternate;if(W!==null){var H=W.child;if(H!==null){W.child=null;do{var Ae=H.sibling;H.sibling=null,H=Ae}while(H!==null)}}B=h}}if((h.subtreeFlags&2064)!==0&&p!==null)p.return=h,B=p;else e:for(;B!==null;){if(h=B,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:Ei(9,h,h.return)}var k=h.sibling;if(k!==null){k.return=h.return,B=k;break e}B=h.return}}var E=e.current;for(B=E;B!==null;){p=B;var N=p.child;if((p.subtreeFlags&2064)!==0&&N!==null)N.return=p,B=N;else e:for(p=E;B!==null;){if(w=B,(w.flags&2048)!==0)try{switch(w.tag){case 0:case 11:case 15:qs(9,w)}}catch($){Pe(w,w.return,$)}if(w===p){B=null;break e}var L=w.sibling;if(L!==null){L.return=w.return,B=L;break e}B=w.return}}if(oe=c,yn(),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(as,e)}catch{}l=!0}return l}finally{pe=s,Nt.transition=n}}return!1}function Zh(e,n,s){n=Er(s,n),n=_h(e,n,1),e=wn(e,n,1),n=tt(),e!==null&&(Yr(e,1,n),lt(e,n))}function Pe(e,n,s){if(e.tag===3)Zh(e,e,s);else for(;n!==null;){if(n.tag===3){Zh(n,e,s);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Cn===null||!Cn.has(l))){e=Er(s,e),e=yh(n,e,1),n=wn(n,e,1),e=tt(),n!==null&&(Yr(n,1,e),lt(n,e));break}}n=n.return}}function r_(e,n,s){var l=e.pingCache;l!==null&&l.delete(n),n=tt(),e.pingedLanes|=e.suspendedLanes&s,ze===e&&(Qe&s)===s&&(Le===4||Le===3&&(Qe&130023424)===Qe&&500>Me()-Ia?$n(e,0):Na|=s),lt(e,n)}function ef(e,n){n===0&&((e.mode&1)===0?n=1:(n=cs,cs<<=1,(cs&130023424)===0&&(cs=4194304)));var s=tt();e=Jt(e,n),e!==null&&(Yr(e,n,s),lt(e,s))}function i_(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),ef(e,s)}function s_(e,n){var s=0;switch(e.tag){case 13:var l=e.stateNode,c=e.memoizedState;c!==null&&(s=c.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(r(314))}l!==null&&l.delete(n),ef(e,s)}var tf;tf=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||rt.current)st=!0;else{if((e.lanes&s)===0&&(n.flags&128)===0)return st=!1,Q0(e,n,s);st=(e.flags&131072)!==0}else st=!1,Ne&&(n.flags&1048576)!==0&&bd(n,Ms,n.index);switch(n.lanes=0,n.tag){case 2:var l=n.type;Gs(e,n),e=n.pendingProps;var c=mr(n,qe.current);xr(n,s),c=ia(null,n,l,e,c,s);var h=sa();return n.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,it(l)?(h=!0,Rs(n)):h=!1,n.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,Xl(n),c.updater=$s,n.stateNode=c,c._reactInternals=n,da(n,l,e,s),n=ma(null,n,l,!0,h,s)):(n.tag=0,Ne&&h&&Bl(n),et(null,n,c,s),n=n.child),n;case 16:l=n.elementType;e:{switch(Gs(e,n),e=n.pendingProps,c=l._init,l=c(l._payload),n.type=l,c=n.tag=l_(l),e=At(l,e),c){case 0:n=pa(null,n,l,e,s);break e;case 1:n=Ih(null,n,l,e,s);break e;case 11:n=Ch(null,n,l,e,s);break e;case 14:n=Eh(null,n,l,At(l.type,e),s);break e}throw Error(r(306,l,""))}return n;case 0:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:At(l,c),pa(e,n,l,c,s);case 1:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:At(l,c),Ih(e,n,l,c,s);case 3:e:{if(Th(n),e===null)throw Error(r(387));l=n.pendingProps,h=n.memoizedState,c=h.element,Wd(e,n),js(n,l,null,s);var p=n.memoizedState;if(l=p.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},n.updateQueue.baseState=h,n.memoizedState=h,n.flags&256){c=Er(Error(r(423)),n),n=Rh(e,n,l,s,c);break e}else if(l!==c){c=Er(Error(r(424)),n),n=Rh(e,n,l,s,c);break e}else for(yt=mn(n.stateNode.containerInfo.firstChild),_t=n,Ne=!0,Mt=null,s=Bd(n,null,l,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(yr(),l===c){n=en(e,n,s);break e}et(e,n,l,s)}n=n.child}return n;case 5:return Qd(n),e===null&&Hl(n),l=n.type,c=n.pendingProps,h=e!==null?e.memoizedProps:null,p=c.children,Ol(l,c)?p=null:h!==null&&Ol(l,h)&&(n.flags|=32),Nh(e,n),et(e,n,p,s),n.child;case 6:return e===null&&Hl(n),null;case 13:return Ph(e,n,s);case 4:return Jl(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=vr(n,null,l,s):et(e,n,l,s),n.child;case 11:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:At(l,c),Ch(e,n,l,c,s);case 7:return et(e,n,n.pendingProps,s),n.child;case 8:return et(e,n,n.pendingProps.children,s),n.child;case 12:return et(e,n,n.pendingProps.children,s),n.child;case 10:e:{if(l=n.type._context,c=n.pendingProps,h=n.memoizedProps,p=c.value,ye(Os,l._currentValue),l._currentValue=p,h!==null)if(Dt(h.value,p)){if(h.children===c.children&&!rt.current){n=en(e,n,s);break e}}else for(h=n.child,h!==null&&(h.return=n);h!==null;){var w=h.dependencies;if(w!==null){p=h.child;for(var x=w.firstContext;x!==null;){if(x.context===l){if(h.tag===1){x=Zt(-1,s&-s),x.tag=2;var I=h.updateQueue;if(I!==null){I=I.shared;var b=I.pending;b===null?x.next=x:(x.next=b.next,b.next=x),I.pending=x}}h.lanes|=s,x=h.alternate,x!==null&&(x.lanes|=s),ql(h.return,s,n),w.lanes|=s;break}x=x.next}}else if(h.tag===10)p=h.type===n.type?null:h.child;else if(h.tag===18){if(p=h.return,p===null)throw Error(r(341));p.lanes|=s,w=p.alternate,w!==null&&(w.lanes|=s),ql(p,s,n),p=h.sibling}else p=h.child;if(p!==null)p.return=h;else for(p=h;p!==null;){if(p===n){p=null;break}if(h=p.sibling,h!==null){h.return=p.return,p=h;break}p=p.return}h=p}et(e,n,c.children,s),n=n.child}return n;case 9:return c=n.type,l=n.pendingProps.children,xr(n,s),c=St(c),l=l(c),n.flags|=1,et(e,n,l,s),n.child;case 14:return l=n.type,c=At(l,n.pendingProps),c=At(l.type,c),Eh(e,n,l,c,s);case 15:return Sh(e,n,n.type,n.pendingProps,s);case 17:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:At(l,c),Gs(e,n),n.tag=1,it(l)?(e=!0,Rs(n)):e=!1,xr(n,s),mh(n,l,c),da(n,l,c,s),ma(null,n,l,!0,e,s);case 19:return Mh(e,n,s);case 22:return kh(e,n,s)}throw Error(r(156,n.tag))};function nf(e,n){return Oc(e,n)}function o_(e,n,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(e,n,s,l){return new o_(e,n,s,l)}function Oa(e){return e=e.prototype,!(!e||!e.isReactComponent)}function l_(e){if(typeof e=="function")return Oa(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xt)return 11;if(e===Bt)return 14}return 2}function Nn(e,n){var s=e.alternate;return s===null?(s=It(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function io(e,n,s,l,c,h){var p=2;if(l=e,typeof e=="function")Oa(e)&&(p=1);else if(typeof e=="string")p=5;else e:switch(e){case Se:return Gn(s.children,c,h,n);case Ke:p=8,c|=8;break;case Tt:return e=It(12,s,n,c|2),e.elementType=Tt,e.lanes=h,e;case pt:return e=It(13,s,n,c),e.elementType=pt,e.lanes=h,e;case Rt:return e=It(19,s,n,c),e.elementType=Rt,e.lanes=h,e;case Re:return so(s,c,h,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wt:p=10;break e;case Gt:p=9;break e;case xt:p=11;break e;case Bt:p=14;break e;case nt:p=16,l=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return n=It(p,s,n,c),n.elementType=e,n.type=l,n.lanes=h,n}function Gn(e,n,s,l){return e=It(7,e,l,n),e.lanes=s,e}function so(e,n,s,l){return e=It(22,e,l,n),e.elementType=Re,e.lanes=s,e.stateNode={isHidden:!1},e}function La(e,n,s){return e=It(6,e,null,n),e.lanes=s,e}function Fa(e,n,s){return n=It(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function a_(e,n,s,l,c){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cl(0),this.expirationTimes=cl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cl(0),this.identifierPrefix=l,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function ja(e,n,s,l,c,h,p,w,x){return e=new a_(e,n,s,w,x),n===1?(n=1,h===!0&&(n|=8)):n=0,h=It(3,null,null,n),e.current=h,h.stateNode=e,h.memoizedState={element:l,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xl(h),e}function u_(e,n,s){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:me,key:l==null?null:""+l,children:e,containerInfo:n,implementation:s}}function rf(e){if(!e)return _n;e=e._reactInternals;e:{if(On(e)!==e||e.tag!==1)throw Error(r(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(it(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(r(171))}if(e.tag===1){var s=e.type;if(it(s))return Dd(e,s,n)}return n}function sf(e,n,s,l,c,h,p,w,x){return e=ja(s,l,!0,e,c,h,p,w,x),e.context=rf(null),s=e.current,l=tt(),c=Sn(s),h=Zt(l,c),h.callback=n??null,wn(s,h,c),e.current.lanes=c,Yr(e,c,l),lt(e,l),e}function oo(e,n,s,l){var c=n.current,h=tt(),p=Sn(c);return s=rf(s),n.context===null?n.context=s:n.pendingContext=s,n=Zt(h,p),n.payload={element:e},l=l===void 0?null:l,l!==null&&(n.callback=l),e=wn(c,n,p),e!==null&&(Lt(e,c,p,h),Fs(e,c,p)),p}function lo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function of(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function za(e,n){of(e,n),(e=e.alternate)&&of(e,n)}function c_(){return null}var lf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ua(e){this._internalRoot=e}ao.prototype.render=Ua.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));oo(e,n,null,null)},ao.prototype.unmount=Ua.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Hn(function(){oo(null,e,null,null)}),n[Kt]=null}};function ao(e){this._internalRoot=e}ao.prototype.unstable_scheduleHydration=function(e){if(e){var n=Wc();e={blockedOn:null,target:e,priority:n};for(var s=0;s<hn.length&&n!==0&&n<hn[s].priority;s++);hn.splice(s,0,e),s===0&&Qc(e)}};function Ba(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function uo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function af(){}function d_(e,n,s,l,c){if(c){if(typeof l=="function"){var h=l;l=function(){var I=lo(p);h.call(I)}}var p=sf(n,l,e,0,null,!1,!1,"",af);return e._reactRootContainer=p,e[Kt]=p.current,ci(e.nodeType===8?e.parentNode:e),Hn(),p}for(;c=e.lastChild;)e.removeChild(c);if(typeof l=="function"){var w=l;l=function(){var I=lo(x);w.call(I)}}var x=ja(e,0,!1,null,null,!1,!1,"",af);return e._reactRootContainer=x,e[Kt]=x.current,ci(e.nodeType===8?e.parentNode:e),Hn(function(){oo(n,x,s,l)}),x}function co(e,n,s,l,c){var h=s._reactRootContainer;if(h){var p=h;if(typeof c=="function"){var w=c;c=function(){var x=lo(p);w.call(x)}}oo(n,p,e,c)}else p=d_(s,n,e,c,l);return lo(p)}Bc=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=qr(n.pendingLanes);s!==0&&(dl(n,s|1),lt(n,Me()),(oe&6)===0&&(Nr=Me()+500,yn()))}break;case 13:Hn(function(){var l=Jt(e,1);if(l!==null){var c=tt();Lt(l,e,1,c)}}),za(e,1)}},hl=function(e){if(e.tag===13){var n=Jt(e,134217728);if(n!==null){var s=tt();Lt(n,e,134217728,s)}za(e,134217728)}},Vc=function(e){if(e.tag===13){var n=Sn(e),s=Jt(e,n);if(s!==null){var l=tt();Lt(s,e,n,l)}za(e,n)}},Wc=function(){return pe},Hc=function(e,n){var s=pe;try{return pe=e,n()}finally{pe=s}},il=function(e,n,s){switch(n){case"input":if(Yo(e,s),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var l=s[n];if(l!==e&&l.form===e.form){var c=Is(l);if(!c)throw Error(r(90));pc(l),Yo(l,c)}}}break;case"textarea":vc(e,s);break;case"select":n=s.value,n!=null&&rr(e,!!s.multiple,n,!1)}},Tc=Ma,Rc=Hn;var h_={usingClientEntryPoint:!1,Events:[fi,fr,Is,Nc,Ic,Ma]},Ii={findFiberByHostInstance:Ln,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},f_={bundleType:Ii.bundleType,version:Ii.version,rendererPackageName:Ii.rendererPackageName,rendererConfig:Ii.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:he.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ac(e),e===null?null:e.stateNode},findFiberByHostInstance:Ii.findFiberByHostInstance||c_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ho=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ho.isDisabled&&ho.supportsFiber)try{as=ho.inject(f_),Vt=ho}catch{}}return at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h_,at.createPortal=function(e,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ba(n))throw Error(r(200));return u_(e,n,null,s)},at.createRoot=function(e,n){if(!Ba(e))throw Error(r(299));var s=!1,l="",c=lf;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),n=ja(e,1,!1,null,null,s,!1,l,c),e[Kt]=n.current,ci(e.nodeType===8?e.parentNode:e),new Ua(n)},at.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=Ac(n),e=e===null?null:e.stateNode,e},at.flushSync=function(e){return Hn(e)},at.hydrate=function(e,n,s){if(!uo(n))throw Error(r(200));return co(null,e,n,!0,s)},at.hydrateRoot=function(e,n,s){if(!Ba(e))throw Error(r(405));var l=s!=null&&s.hydratedSources||null,c=!1,h="",p=lf;if(s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(p=s.onRecoverableError)),n=sf(n,null,e,1,s??null,c,!1,h,p),e[Kt]=n.current,ci(e),l)for(e=0;e<l.length;e++)s=l[e],c=s._getVersion,c=c(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,c]:n.mutableSourceEagerHydrationData.push(s,c);return new ao(n)},at.render=function(e,n,s){if(!uo(n))throw Error(r(200));return co(null,e,n,!1,s)},at.unmountComponentAtNode=function(e){if(!uo(e))throw Error(r(40));return e._reactRootContainer?(Hn(function(){co(null,null,e,!1,function(){e._reactRootContainer=null,e[Kt]=null})}),!0):!1},at.unstable_batchedUpdates=Ma,at.unstable_renderSubtreeIntoContainer=function(e,n,s,l){if(!uo(s))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return co(e,n,s,!1,l)},at.version="18.3.1-next-f1338f8080-20240426",at}var gf;function kp(){if(gf)return Ha.exports;gf=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Ha.exports=C_(),Ha.exports}var _f;function E_(){if(_f)return fo;_f=1;var i=kp();return fo.createRoot=i.createRoot,fo.hydrateRoot=i.hydrateRoot,fo}var S_=E_();const k_=Ep(S_);kp();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _o(){return _o=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},_o.apply(this,arguments)}var Tn;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Tn||(Tn={}));const yf="popstate";function N_(i){i===void 0&&(i={});function t(a,u){let{pathname:d="/",search:f="",hash:m=""}=Ki(a.location.hash.substr(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),ou("",{pathname:d,search:f,hash:m},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function r(a,u){let d=a.document.querySelector("base"),f="";if(d&&d.getAttribute("href")){let m=a.location.href,g=m.indexOf("#");f=g===-1?m:m.slice(0,g)}return f+"#"+(typeof u=="string"?u:Np(u))}function o(a,u){Ru(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(u)+")")}return T_(t,r,o,i)}function ht(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function Ru(i,t){if(!i){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function I_(){return Math.random().toString(36).substr(2,8)}function vf(i,t){return{usr:i.state,key:i.key,idx:t}}function ou(i,t,r,o){return r===void 0&&(r=null),_o({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof t=="string"?Ki(t):t,{state:r,key:t&&t.key||o||I_()})}function Np(i){let{pathname:t="/",search:r="",hash:o=""}=i;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function Ki(i){let t={};if(i){let r=i.indexOf("#");r>=0&&(t.hash=i.substr(r),i=i.substr(0,r));let o=i.indexOf("?");o>=0&&(t.search=i.substr(o),i=i.substr(0,o)),i&&(t.pathname=i)}return t}function T_(i,t,r,o){o===void 0&&(o={});let{window:a=document.defaultView,v5Compat:u=!1}=o,d=a.history,f=Tn.Pop,m=null,g=C();g==null&&(g=0,d.replaceState(_o({},d.state,{idx:g}),""));function C(){return(d.state||{idx:null}).idx}function y(){f=Tn.Pop;let P=C(),Q=P==null?null:P-g;g=P,m&&m({action:f,location:D.location,delta:Q})}function _(P,Q){f=Tn.Push;let G=ou(D.location,P,Q);r&&r(G,P),g=C()+1;let ee=vf(G,g),he=D.createHref(G);try{d.pushState(ee,"",he)}catch(He){if(He instanceof DOMException&&He.name==="DataCloneError")throw He;a.location.assign(he)}u&&m&&m({action:f,location:D.location,delta:1})}function T(P,Q){f=Tn.Replace;let G=ou(D.location,P,Q);r&&r(G,P),g=C();let ee=vf(G,g),he=D.createHref(G);d.replaceState(ee,"",he),u&&m&&m({action:f,location:D.location,delta:0})}function R(P){let Q=a.location.origin!=="null"?a.location.origin:a.location.href,G=typeof P=="string"?P:Np(P);return G=G.replace(/ $/,"%20"),ht(Q,"No window.location.(origin|href) available to create URL for href: "+G),new URL(G,Q)}let D={get action(){return f},get location(){return i(a,d)},listen(P){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(yf,y),m=P,()=>{a.removeEventListener(yf,y),m=null}},createHref(P){return t(a,P)},createURL:R,encodeLocation(P){let Q=R(P);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:_,replace:T,go(P){return d.go(P)}};return D}var wf;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(wf||(wf={}));function R_(i,t,r){return r===void 0&&(r="/"),P_(i,t,r)}function P_(i,t,r,o){let a=typeof t=="string"?Ki(t):t,u=Rp(a.pathname||"/",r);if(u==null)return null;let d=Ip(i);D_(d);let f=null;for(let m=0;f==null&&m<d.length;++m){let g=W_(u);f=U_(d[m],g)}return f}function Ip(i,t,r,o){t===void 0&&(t=[]),r===void 0&&(r=[]),o===void 0&&(o="");let a=(u,d,f)=>{let m={relativePath:f===void 0?u.path||"":f,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};m.relativePath.startsWith("/")&&(ht(m.relativePath.startsWith(o),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(o.length));let g=Pr([o,m.relativePath]),C=r.concat(m);u.children&&u.children.length>0&&(ht(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),Ip(u.children,t,C,g)),!(u.path==null&&!u.index)&&t.push({path:g,score:j_(g,u.index),routesMeta:C})};return i.forEach((u,d)=>{var f;if(u.path===""||!((f=u.path)!=null&&f.includes("?")))a(u,d);else for(let m of Tp(u.path))a(u,d,m)}),t}function Tp(i){let t=i.split("/");if(t.length===0)return[];let[r,...o]=t,a=r.endsWith("?"),u=r.replace(/\?$/,"");if(o.length===0)return a?[u,""]:[u];let d=Tp(o.join("/")),f=[];return f.push(...d.map(m=>m===""?u:[u,m].join("/"))),a&&f.push(...d),f.map(m=>i.startsWith("/")&&m===""?"/":m)}function D_(i){i.sort((t,r)=>t.score!==r.score?r.score-t.score:z_(t.routesMeta.map(o=>o.childrenIndex),r.routesMeta.map(o=>o.childrenIndex)))}const M_=/^:[\w-]+$/,A_=3,b_=2,O_=1,L_=10,F_=-2,xf=i=>i==="*";function j_(i,t){let r=i.split("/"),o=r.length;return r.some(xf)&&(o+=F_),t&&(o+=b_),r.filter(a=>!xf(a)).reduce((a,u)=>a+(M_.test(u)?A_:u===""?O_:L_),o)}function z_(i,t){return i.length===t.length&&i.slice(0,-1).every((o,a)=>o===t[a])?i[i.length-1]-t[t.length-1]:0}function U_(i,t,r){let{routesMeta:o}=i,a={},u="/",d=[];for(let f=0;f<o.length;++f){let m=o[f],g=f===o.length-1,C=u==="/"?t:t.slice(u.length)||"/",y=B_({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},C),_=m.route;if(!y)return null;Object.assign(a,y.params),d.push({params:a,pathname:Pr([u,y.pathname]),pathnameBase:H_(Pr([u,y.pathnameBase])),route:_}),y.pathnameBase!=="/"&&(u=Pr([u,y.pathnameBase]))}return d}function B_(i,t){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[r,o]=V_(i.path,i.caseSensitive,i.end),a=t.match(r);if(!a)return null;let u=a[0],d=u.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:o.reduce((g,C,y)=>{let{paramName:_,isOptional:T}=C;if(_==="*"){let D=f[y]||"";d=u.slice(0,u.length-D.length).replace(/(.)\/+$/,"$1")}const R=f[y];return T&&!R?g[_]=void 0:g[_]=(R||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:d,pattern:i}}function V_(i,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Ru(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let o=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,f,m)=>(o.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(o.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),o]}function W_(i){try{return i.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ru(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),i}}function Rp(i,t){if(t==="/")return i;if(!i.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,o=i.charAt(r);return o&&o!=="/"?null:i.slice(r)||"/"}const Pr=i=>i.join("/").replace(/\/\/+/g,"/"),H_=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/");function $_(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const Pp=["post","put","patch","delete"];new Set(Pp);const Q_=["get",...Pp];new Set(Q_);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yo(){return yo=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},yo.apply(this,arguments)}const G_=F.createContext(null),K_=F.createContext(null),Dp=F.createContext(null),Fo=F.createContext(null),jo=F.createContext({outlet:null,matches:[],isDataRoute:!1}),Mp=F.createContext(null);function Pu(){return F.useContext(Fo)!=null}function Ap(){return Pu()||ht(!1),F.useContext(Fo).location}function q_(i,t){return Y_(i,t)}function Y_(i,t,r,o){Pu()||ht(!1);let{navigator:a}=F.useContext(Dp),{matches:u}=F.useContext(jo),d=u[u.length-1],f=d?d.params:{};d&&d.pathname;let m=d?d.pathnameBase:"/";d&&d.route;let g=Ap(),C;if(t){var y;let P=typeof t=="string"?Ki(t):t;m==="/"||(y=P.pathname)!=null&&y.startsWith(m)||ht(!1),C=P}else C=g;let _=C.pathname||"/",T=_;if(m!=="/"){let P=m.replace(/^\//,"").split("/");T="/"+_.replace(/^\//,"").split("/").slice(P.length).join("/")}let R=R_(i,{pathname:T}),D=ty(R&&R.map(P=>Object.assign({},P,{params:Object.assign({},f,P.params),pathname:Pr([m,a.encodeLocation?a.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?m:Pr([m,a.encodeLocation?a.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),u,r,o);return t&&D?F.createElement(Fo.Provider,{value:{location:yo({pathname:"/",search:"",hash:"",state:null,key:"default"},C),navigationType:Tn.Pop}},D):D}function X_(){let i=sy(),t=$_(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),r=i instanceof Error?i.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},t),r?F.createElement("pre",{style:a},r):null,null)}const J_=F.createElement(X_,null);class Z_ extends F.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?F.createElement(jo.Provider,{value:this.props.routeContext},F.createElement(Mp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ey(i){let{routeContext:t,match:r,children:o}=i,a=F.useContext(G_);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),F.createElement(jo.Provider,{value:t},o)}function ty(i,t,r,o){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),o===void 0&&(o=null),i==null){var u;if(!r)return null;if(r.errors)i=r.matches;else if((u=o)!=null&&u.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)i=r.matches;else return null}let d=i,f=(a=r)==null?void 0:a.errors;if(f!=null){let C=d.findIndex(y=>y.route.id&&(f==null?void 0:f[y.route.id])!==void 0);C>=0||ht(!1),d=d.slice(0,Math.min(d.length,C+1))}let m=!1,g=-1;if(r&&o&&o.v7_partialHydration)for(let C=0;C<d.length;C++){let y=d[C];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(g=C),y.route.id){let{loaderData:_,errors:T}=r,R=y.route.loader&&_[y.route.id]===void 0&&(!T||T[y.route.id]===void 0);if(y.route.lazy||R){m=!0,g>=0?d=d.slice(0,g+1):d=[d[0]];break}}}return d.reduceRight((C,y,_)=>{let T,R=!1,D=null,P=null;r&&(T=f&&y.route.id?f[y.route.id]:void 0,D=y.route.errorElement||J_,m&&(g<0&&_===0?(oy("route-fallback"),R=!0,P=null):g===_&&(R=!0,P=y.route.hydrateFallbackElement||null)));let Q=t.concat(d.slice(0,_+1)),G=()=>{let ee;return T?ee=D:R?ee=P:y.route.Component?ee=F.createElement(y.route.Component,null):y.route.element?ee=y.route.element:ee=C,F.createElement(ey,{match:y,routeContext:{outlet:C,matches:Q,isDataRoute:r!=null},children:ee})};return r&&(y.route.ErrorBoundary||y.route.errorElement||_===0)?F.createElement(Z_,{location:r.location,revalidation:r.revalidation,component:D,error:T,children:G(),routeContext:{outlet:null,matches:Q,isDataRoute:!0}}):G()},null)}var bp=(function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i})(bp||{});function ny(i){let t=F.useContext(K_);return t||ht(!1),t}function ry(i){let t=F.useContext(jo);return t||ht(!1),t}function iy(i){let t=ry(),r=t.matches[t.matches.length-1];return r.route.id||ht(!1),r.route.id}function sy(){var i;let t=F.useContext(Mp),r=ny(bp.UseRouteError),o=iy();return t!==void 0?t:(i=r.errors)==null?void 0:i[o]}const Cf={};function oy(i,t,r){Cf[i]||(Cf[i]=!0)}function ly(i,t){i==null||i.v7_startTransition,i==null||i.v7_relativeSplatPath}function lu(i){ht(!1)}function ay(i){let{basename:t="/",children:r=null,location:o,navigationType:a=Tn.Pop,navigator:u,static:d=!1,future:f}=i;Pu()&&ht(!1);let m=t.replace(/^\/*/,"/"),g=F.useMemo(()=>({basename:m,navigator:u,static:d,future:yo({v7_relativeSplatPath:!1},f)}),[m,f,u,d]);typeof o=="string"&&(o=Ki(o));let{pathname:C="/",search:y="",hash:_="",state:T=null,key:R="default"}=o,D=F.useMemo(()=>{let P=Rp(C,m);return P==null?null:{location:{pathname:P,search:y,hash:_,state:T,key:R},navigationType:a}},[m,C,y,_,T,R,a]);return D==null?null:F.createElement(Dp.Provider,{value:g},F.createElement(Fo.Provider,{children:r,value:D}))}function uy(i){let{children:t,location:r}=i;return q_(au(t),r)}new Promise(()=>{});function au(i,t){t===void 0&&(t=[]);let r=[];return F.Children.forEach(i,(o,a)=>{if(!F.isValidElement(o))return;let u=[...t,a];if(o.type===F.Fragment){r.push.apply(r,au(o.props.children,u));return}o.type!==lu&&ht(!1),!o.props.index||!o.props.children||ht(!1);let d={id:o.props.id||u.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(d.children=au(o.props.children,u)),r.push(d)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const cy="6";try{window.__reactRouterVersion=cy}catch{}const dy="startTransition",Ef=v_[dy];function hy(i){let{basename:t,children:r,future:o,window:a}=i,u=F.useRef();u.current==null&&(u.current=N_({window:a,v5Compat:!0}));let d=u.current,[f,m]=F.useState({action:d.action,location:d.location}),{v7_startTransition:g}=o||{},C=F.useCallback(y=>{g&&Ef?Ef(()=>m(y)):m(y)},[m,g]);return F.useLayoutEffect(()=>d.listen(C),[d,C]),F.useEffect(()=>ly(o),[o]),F.createElement(ay,{basename:t,children:r,location:f.location,navigationType:f.action,navigator:d,future:o})}var Sf;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(Sf||(Sf={}));var kf;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(kf||(kf={}));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=(...i)=>i.filter((t,r,o)=>!!t&&t.trim()!==""&&o.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,o)=>o?o.toUpperCase():r.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nf=i=>{const t=py(i);return t.charAt(0).toUpperCase()+t.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var my={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=i=>{for(const t in i)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=F.forwardRef(({color:i="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:a="",children:u,iconNode:d,...f},m)=>F.createElement("svg",{ref:m,...my,width:t,height:t,stroke:i,strokeWidth:o?Number(r)*24/Number(t):r,className:Op("lucide",a),...!u&&!gy(f)&&{"aria-hidden":"true"},...f},[...d.map(([g,C])=>F.createElement(g,C)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=(i,t)=>{const r=F.forwardRef(({className:o,...a},u)=>F.createElement(_y,{ref:u,iconNode:t,className:Op(`lucide-${fy(Nf(i))}`,`lucide-${i}`,o),...a}));return r.displayName=Nf(i),r};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],vy=de("beaker",yy);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=[["path",{d:"M17 3a2 2 0 0 1 2 2v15a1 1 0 0 1-1.496.868l-4.512-2.578a2 2 0 0 0-1.984 0l-4.512 2.578A1 1 0 0 1 5 20V5a2 2 0 0 1 2-2z",key:"oz39mx"}]],Lp=de("bookmark",wy);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Cy=de("chart-column",xy);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Sy=de("check",Ey);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ny=de("circle-alert",ky);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ty=de("circle-check-big",Iy);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Py=de("circle-x",Ry);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],If=de("clock",Dy);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Ay=de("copy",My);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Oy=de("external-link",by);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Fp=de("info",Ly);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],jy=de("key",Fy);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],Uy=de("keyboard",zy);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Tf=de("layers",By);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Wy=de("loader-circle",Vy);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=[["path",{d:"M14 3h2",key:"1d12a5"}],["path",{d:"M16 19h-2",key:"1agirb"}],["path",{d:"M2 12v-2",key:"1ey295"}],["path",{d:"M2 16v5.286a.71.71 0 0 0 1.212.502l1.149-1.149",key:"120k8q"}],["path",{d:"M20 19a2 2 0 0 0 2-2v-1",key:"ior8tn"}],["path",{d:"M22 10v2",key:"rmlecy"}],["path",{d:"M22 6V5a2 2 0 0 0-2-2",key:"sp3k6r"}],["path",{d:"M4 3a2 2 0 0 0-2 2v1",key:"11zt7s"}],["path",{d:"M8 19h2",key:"jnunrx"}],["path",{d:"M8 3h2",key:"ysbsee"}]],$y=de("message-square-dashed",Hy);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Gy=de("message-square",Qy);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],qy=de("mouse-pointer-2",Ky);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Xy=de("play",Yy);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Zy=de("radio",Jy);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],tv=de("save",ev);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],rv=de("send",nv);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],jp=de("settings",iv);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ov=de("shield-check",sv);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],av=de("sparkles",lv);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],zp=de("trash-2",uv);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=[["path",{d:"M21 2H3v16h5v4l4-4h5l4-4V2zm-10 9V7m5 4V7",key:"c0yzno"}]],Up=de("twitch",cv);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],hv=de("x",dv);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],Bp=de("youtube",fv);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],mv=de("zap",pv),gv=({message:i,onFeature:t,onMarkRead:r,onMarkTrash:o,onToggleInteresting:a})=>{const u=i.platform==="twitch",d=g=>{g.preventDefault(),i.isFeatured?r(i.id):t(i.id)},f=g=>{g.preventDefault(),a(i.id)},m=g=>{g.stopPropagation(),o(i.id)};return v.jsxs("div",{className:"relative group/container",children:[v.jsxs("button",{onClick:d,onContextMenu:f,className:`w-full text-left group relative p-4 rounded-xl transition-all border outline-none ring-offset-2 ring-offset-slate-900 ring-indigo-500 focus-visible:ring-2 ${i.isFeatured?"bg-indigo-600/30 border-indigo-500 shadow-lg shadow-indigo-500/10 z-10":i.isRead?"bg-slate-900/40 border-slate-800/40 opacity-50":i.isInteresting?"bg-amber-500/10 border-amber-500/30 hover:bg-amber-500/20":"bg-slate-800/80 border-slate-700/50 hover:bg-slate-800 hover:border-slate-500"}`,children:[v.jsxs("div",{className:"flex items-start gap-4",children:[v.jsxs("div",{className:"relative shrink-0",children:[v.jsxs("div",{className:"relative",children:[v.jsx("img",{src:i.avatarUrl,alt:i.author,className:`w-11 h-11 rounded-xl object-cover ring-2 transition-all ${i.isFeatured?"ring-indigo-500 shadow-md":"ring-transparent"}`}),!i.isRead&&!i.isFeatured&&v.jsx("div",{onClick:m,className:"absolute inset-0 z-20 flex items-center justify-center bg-red-600/90 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer shadow-xl border border-red-400/50 scale-105",title:"Trash (Mark as Done)",children:v.jsx(zp,{size:24,className:"text-white drop-shadow-md"})})]}),v.jsx("div",{className:`absolute -bottom-1 -right-1 w-5 h-5 rounded-full border-2 border-slate-900 flex items-center justify-center shadow-lg transition-transform ${u?"bg-[#9146FF]":"bg-[#FF0000]"}`,children:u?v.jsx("svg",{className:"w-2.5 h-2.5 text-white fill-current",viewBox:"0 0 24 24",children:v.jsx("path",{d:"M11.571 4.714h1.715v5.143H11.57V4.714zm4.715 0H18v5.143h-1.714V4.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0H6zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714v9.429z"})}):v.jsxs("svg",{className:"w-3 h-3 text-white fill-current",viewBox:"0 0 24 24",fill:"none",children:[v.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814z",fill:"white"}),v.jsx("path",{d:"M9.545 15.568V8.432L15.818 12l-6.273 3.568z",fill:"#FF0000"})]})})]}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-1.5 flex-wrap",children:[v.jsx("span",{className:"font-black text-sm tracking-tight truncate",style:{color:i.authorColor||(u?"#bf94ff":"#ff4d4d")},children:i.author}),i.isFirstMessage&&v.jsxs("span",{className:"flex items-center gap-0.5 text-[8px] font-black bg-amber-500/10 text-amber-500 px-1.5 py-0.5 rounded border border-amber-500/20 uppercase tracking-widest",children:[v.jsx(av,{size:8})," First Chat"]}),i.isInteresting&&v.jsxs("span",{className:"flex items-center gap-0.5 text-[8px] font-black bg-amber-500 text-slate-950 px-1.5 py-0.5 rounded uppercase tracking-widest shadow-sm",children:[v.jsx(Lp,{size:8,fill:"currentColor"})," Interesting"]}),v.jsx("span",{className:"text-[9px] text-slate-500 font-mono font-bold tracking-tighter opacity-70",children:i.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}),i.isFeatured&&v.jsx("div",{className:"ml-auto flex items-center gap-1.5",children:v.jsx("span",{className:"flex items-center gap-1 text-[9px] font-black text-white uppercase tracking-widest bg-indigo-500 px-1.5 py-0.5 rounded shadow-sm animate-pulse",children:"LIVE"})}),i.isRead&&!i.isFeatured&&v.jsx("div",{className:"ml-auto flex items-center gap-1",children:i.isTrashed?v.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:[v.jsx(Py,{size:10})," TRASHED"]}):v.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold text-emerald-500/80 uppercase tracking-widest",children:[v.jsx(Ty,{size:10})," FEATURED"]})})]}),v.jsx("p",{className:`text-[14px] break-words leading-snug font-semibold tracking-tight ${i.isFeatured?"text-white":"text-slate-200"}`,children:i.text})]})]}),v.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 items-center",children:[!i.isFeatured&&!i.isRead&&v.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-all",children:v.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] text-white font-black uppercase tracking-widest bg-indigo-600 px-2.5 py-1 rounded-lg border border-indigo-400/30 shadow-xl shadow-indigo-600/40",children:[v.jsx(rv,{size:10})," Feature"]})}),i.isFeatured&&v.jsx("div",{className:"animate-in slide-in-from-top-1",children:v.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] text-white font-black uppercase tracking-widest bg-red-600 px-2.5 py-1 rounded-lg border border-red-400/30 shadow-xl shadow-red-600/40",children:[v.jsx($y,{size:10})," Dismiss"]})})]})]}),i.isFeatured&&v.jsx("div",{className:"absolute left-[-1rem] top-1/2 -translate-y-1/2 w-4 h-px bg-indigo-500 shadow-[0_0_10px_rgba(99,102,241,0.5)]"})]})},_v=({duration:i,enabled:t,featuredAt:r})=>{const[o,a]=F.useState(100);return F.useEffect(()=>{if(!t||i<=0||!r)return;const u=setInterval(()=>{const f=Date.now()-r,m=i*1e3,g=Math.max(0,100-f/m*100);a(g)},50);return()=>clearInterval(u)},[i,t,r]),!t||!r?null:v.jsx("div",{className:"relative overflow-hidden flex items-center gap-1.5 px-3 py-1 bg-indigo-500/20 border border-indigo-500/30 rounded-full w-full",children:v.jsx("div",{className:"absolute inset-y-0 left-0 bg-indigo-500/40 transition-all duration-75 ease-linear",style:{width:`${o}%`}})})},Rf=({platform:i,stats:t,icon:r})=>{var f;const o=t.status==="online",a=t.status==="connecting",u=t.status==="error",d=(f=t.errorMessage)==null?void 0:f.includes("Quota");return v.jsxs("div",{className:`p-3 rounded-xl bg-slate-900 border transition-colors flex flex-col min-h-[84px] ${u?"border-red-500/50":o?"border-emerald-500/20":"border-slate-800"}`,children:[v.jsxs("div",{className:"text-slate-500 text-[10px] mb-1 flex items-center justify-between gap-1 uppercase font-bold tracking-wider",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[r," ",i]}),a&&v.jsx(Wy,{size:10,className:"animate-spin text-indigo-400"}),u&&v.jsx(Ny,{size:10,className:"text-red-500"})]}),u?v.jsxs("div",{className:"mt-auto flex flex-col",children:[v.jsx("span",{className:"text-red-400 text-[9px] leading-tight font-black uppercase",title:t.errorMessage,children:d?"Quota Exceeded":t.errorMessage||"Failed"}),d&&v.jsxs("a",{href:"https://console.cloud.google.com/apis/api/youtube.googleapis.com/quotas",target:"_blank",className:"text-[8px] text-indigo-400 hover:underline flex items-center gap-1 mt-0.5",children:["Check Limits ",v.jsx(Oy,{size:8})]})]}):v.jsxs("div",{className:"mt-auto flex flex-col",children:[v.jsx("span",{className:"text-white font-mono font-bold text-xl",children:t.viewers.toLocaleString()}),v.jsx("span",{className:`${o?"text-emerald-500":a?"text-indigo-400":"text-slate-600"} text-[9px] font-bold uppercase tracking-widest`,children:a?"connecting":o?"online":"offline"})]})]})},yv=({state:i,onFeature:t,onMarkRead:r,onMarkTrash:o,onToggleInteresting:a,onClearFeatured:u,onOpenSettings:d})=>{const[f,m]=F.useState(!1),g=()=>{const C=`${window.location.origin}${window.location.pathname}#/overlay`;navigator.clipboard.writeText(C),m(!0),setTimeout(()=>m(!1),2e3)};return i.messages.filter(C=>!C.isRead).length,v.jsx("div",{className:"flex flex-1 bg-slate-950 h-full overflow-hidden",children:v.jsxs("main",{className:"flex-1 flex flex-col md:flex-row h-full overflow-hidden",children:[v.jsxs("section",{className:"flex-1 flex flex-col min-w-0 border-r border-slate-800 bg-slate-900/50",children:[v.jsxs("header",{className:"p-4 border-b border-slate-800 flex flex-wrap justify-between items-center bg-slate-950/80 backdrop-blur-xl sticky top-0 z-20 gap-4",children:[v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-600 to-violet-700 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/20 group relative cursor-help",children:[v.jsx(Gy,{className:"text-white w-6 h-6"}),v.jsx("div",{className:"absolute top-full left-0 mt-2 w-max px-3 py-1.5 bg-slate-900 border border-slate-800 rounded-lg text-[10px] font-bold text-slate-400 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50 shadow-xl uppercase tracking-wider",children:"Live Feed Status"})]}),v.jsx("div",{children:v.jsxs("h1",{className:"text-lg font-black text-white flex items-center gap-2 tracking-tight",children:["STREAM FEED ",v.jsx("span",{className:`flex h-2 w-2 rounded-full ${i.messages.length>0?"bg-emerald-500 animate-pulse":"bg-red-500"}`,title:i.messages.length>0?"Feed Active":"No recent activity"})]})})]}),v.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[v.jsxs("div",{className:"hidden lg:flex items-center gap-2 px-3 py-1.5 bg-slate-900 rounded-lg border border-slate-800 mr-2",children:[v.jsx("div",{className:`w-2 h-2 rounded-full ${i.stats.twitch.status==="online"||i.stats.youtube.status==="online"?"bg-emerald-500 animate-pulse":"bg-slate-700"}`}),v.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Live Syncing"})]}),v.jsxs("button",{onClick:g,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-bold transition-all border ${f?"bg-emerald-500/20 border-emerald-500 text-emerald-400":"bg-slate-800 border-slate-700 text-slate-300 hover:bg-slate-700"}`,children:[f?v.jsx(Sy,{size:14}):v.jsx(Ay,{size:14}),f?"Copied!":"Copy Overlay Link"]}),v.jsx("div",{className:"w-px h-6 bg-slate-800 mx-1"}),v.jsx("button",{onClick:d,className:"p-2 text-slate-400 hover:text-white bg-slate-800 rounded-lg hover:bg-slate-700 transition-all",title:"Settings",children:v.jsx(jp,{size:20})})]})]}),v.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-3 pb-24",children:i.messages.length===0?v.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-600 space-y-4",children:[v.jsx("div",{className:"p-6 rounded-full bg-slate-800/50 animate-pulse",children:v.jsx(mv,{size:48,className:"opacity-20"})}),v.jsxs("div",{className:"text-center max-w-xs",children:[v.jsx("p",{className:"text-lg font-bold text-slate-400",children:"Feed is silent..."}),v.jsx("p",{className:"text-xs mt-2 leading-relaxed",children:"Connect your accounts in settings to start capturing live comments."}),v.jsx("button",{onClick:d,className:"mt-6 px-6 py-2.5 bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-bold rounded-xl transition-all shadow-xl shadow-indigo-600/20",children:"Configuration"})]})]}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2 px-3 py-2.5 mb-2 bg-indigo-500/5 rounded-xl border border-indigo-500/10",children:[v.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:[v.jsx(qy,{size:12,className:"text-indigo-500"}),"Click: Feature"]}),v.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:[v.jsx(Lp,{size:12,className:"text-amber-500"}),"Right-Click: Interesting"]}),v.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:[v.jsx(zp,{size:12,className:"text-red-500"}),"Trash Icon: Trash/Done"]}),v.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:[v.jsx(Uy,{size:12,className:"text-slate-200"}),"ESC: Clear Featured"]})]}),i.messages.map(C=>v.jsx(gv,{message:C,onFeature:t,onMarkRead:r,onMarkTrash:o,onToggleInteresting:a},C.id))]})})]}),v.jsxs("section",{className:"w-full md:w-80 lg:w-96 bg-slate-950 flex flex-col p-6 space-y-6 overflow-y-auto custom-scrollbar",children:[v.jsxs("div",{className:"space-y-4",children:[v.jsxs("h2",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500 flex items-center gap-2",children:[v.jsx(Cy,{size:12})," Live Audience"]}),v.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[v.jsx(Rf,{platform:"Twitch",stats:i.stats.twitch,icon:v.jsx("svg",{className:"w-3 h-3 text-purple-400 fill-current",viewBox:"0 0 24 24",children:v.jsx("path",{d:"M11.571 4.714h1.715v5.143H11.57V4.714zm4.715 0H18v5.143h-1.714V4.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0H6zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714v9.429z"})})}),v.jsx(Rf,{platform:"YouTube",stats:i.stats.youtube,icon:v.jsxs("svg",{className:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",children:[v.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814z",fill:"#FF0000"}),v.jsx("path",{d:"M9.545 15.568V8.432L15.818 12l-6.273 3.568z",fill:"white"})]})})]})]}),v.jsxs("div",{className:"flex-1 flex flex-col space-y-4",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("h2",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500 flex items-center gap-2",children:[v.jsx(Tf,{size:12})," OBS Overlay Preview"]}),i.featuredMessage&&v.jsx("button",{onClick:u,className:"text-[10px] text-red-400 hover:text-red-300 transition-colors uppercase font-bold px-2 py-1 bg-red-400/10 rounded border border-red-500/20",children:"Dismiss"})]}),v.jsxs("div",{className:`relative overflow-hidden p-6 rounded-3xl border transition-all flex flex-col justify-center items-center min-h-[220px] text-center ${i.featuredMessage?"bg-indigo-600/10 border-indigo-500 shadow-2xl shadow-indigo-500/10":"bg-slate-900/50 border-dashed border-slate-800"}`,children:[i.featuredMessage?v.jsxs("div",{className:"space-y-4 animate-in fade-in zoom-in duration-300 z-10 w-full px-4 flex flex-col items-center",children:[v.jsxs("div",{className:"relative inline-block",children:[v.jsx("img",{src:i.featuredMessage.avatarUrl,className:"w-16 h-16 rounded-2xl border-2 border-indigo-500/50 mx-auto object-cover",alt:"Author"}),v.jsx("div",{className:`absolute -bottom-1 -right-1 w-6 h-6 rounded-full border-2 border-slate-950 flex items-center justify-center ${i.featuredMessage.platform==="twitch"?"bg-purple-600":"bg-red-600"}`,children:i.featuredMessage.platform==="twitch"?v.jsx("svg",{className:"w-2.5 h-2.5 text-white fill-current",viewBox:"0 0 24 24",children:v.jsx("path",{d:"M11.571 4.714h1.715v5.143H11.57V4.714zm4.715 0H18v5.143h-1.714V4.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0H6zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714v9.429z"})}):v.jsxs("svg",{className:"w-2.5 h-2.5",viewBox:"0 0 24 24",fill:"none",children:[v.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814z",fill:"white"}),v.jsx("path",{d:"M9.545 15.568V8.432L15.818 12l-6.273 3.568z",fill:"#FF0000"})]})})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsxs("p",{className:"text-white text-lg font-black leading-tight break-words",children:['"',i.featuredMessage.text,'"']}),v.jsxs("p",{className:"text-indigo-400 text-xs font-bold uppercase tracking-widest",children:["@",i.featuredMessage.author]})]}),v.jsx("div",{className:"mt-4 w-full",children:v.jsx(_v,{duration:i.settings.autoDismissSeconds,enabled:i.settings.autoDismissEnabled,featuredAt:i.featuredMessage.featuredAt})})]}):v.jsxs("div",{className:"text-slate-600 space-y-3",children:[v.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-slate-800 flex items-center justify-center mx-auto mb-2",children:v.jsx(Tf,{size:20,className:"opacity-40"})}),v.jsx("p",{className:"text-xs font-medium px-4",children:"Click any message in the feed to push it to your stream overlay."}),v.jsx("p",{className:"text-[10px] text-slate-500",children:"Make sure the Overlay tab is open for sync to work."})]}),v.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03] bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.25)_50%),linear-gradient(90deg,rgba(255,0,0,0.06),rgba(0,255,0,0.02),rgba(0,0,118,0.06))] bg-[length:100%_2px,3px_100%]"})]})]})]})]})})},vv=()=>{};var Pf={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j=function(i,t){if(!i)throw zr(t)},zr=function(i){return new Error("Firebase Database ("+Vp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+i)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp=function(i){const t=[];let r=0;for(let o=0;o<i.length;o++){let a=i.charCodeAt(o);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&o+1<i.length&&(i.charCodeAt(o+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++o)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},wv=function(i){const t=[];let r=0,o=0;for(;r<i.length;){const a=i[r++];if(a<128)t[o++]=String.fromCharCode(a);else if(a>191&&a<224){const u=i[r++];t[o++]=String.fromCharCode((a&31)<<6|u&63)}else if(a>239&&a<365){const u=i[r++],d=i[r++],f=i[r++],m=((a&7)<<18|(u&63)<<12|(d&63)<<6|f&63)-65536;t[o++]=String.fromCharCode(55296+(m>>10)),t[o++]=String.fromCharCode(56320+(m&1023))}else{const u=i[r++],d=i[r++];t[o++]=String.fromCharCode((a&15)<<12|(u&63)<<6|d&63)}}return t.join("")},Du={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let a=0;a<i.length;a+=3){const u=i[a],d=a+1<i.length,f=d?i[a+1]:0,m=a+2<i.length,g=m?i[a+2]:0,C=u>>2,y=(u&3)<<4|f>>4;let _=(f&15)<<2|g>>6,T=g&63;m||(T=64,d||(_=64)),o.push(r[C],r[y],r[_],r[T])}return o.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(Wp(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):wv(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let a=0;a<i.length;){const u=r[i.charAt(a++)],f=a<i.length?r[i.charAt(a)]:0;++a;const g=a<i.length?r[i.charAt(a)]:64;++a;const y=a<i.length?r[i.charAt(a)]:64;if(++a,u==null||f==null||g==null||y==null)throw new xv;const _=u<<2|f>>4;if(o.push(_),g!==64){const T=f<<4&240|g>>2;if(o.push(T),y!==64){const R=g<<6&192|y;o.push(R)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class xv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Hp=function(i){const t=Wp(i);return Du.encodeByteArray(t,!0)},vo=function(i){return Hp(i).replace(/\./g,"")},uu=function(i){try{return Du.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(i){return $p(void 0,i)}function $p(i,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const r=t;return new Date(r.getTime());case Object:i===void 0&&(i={});break;case Array:i=[];break;default:return t}for(const r in t)!t.hasOwnProperty(r)||!Ev(r)||(i[r]=$p(i[r],t[r]));return i}function Ev(i){return i!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=()=>Sv().__FIREBASE_DEFAULTS__,Nv=()=>{if(typeof process>"u"||typeof Pf>"u")return;const i=Pf.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Iv=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&uu(i[1]);return t&&JSON.parse(t)},Qp=()=>{try{return vv()||kv()||Nv()||Iv()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Tv=i=>{var t,r;return(r=(t=Qp())==null?void 0:t.emulatorHosts)==null?void 0:r[i]},Rv=i=>{const t=Tv(i);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const o=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),o]:[t.substring(0,r),o]},Gp=()=>{var i;return(i=Qp())==null?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,o)=>{r?this.reject(r):this.resolve(o),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Pv(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},o=t||"demo-project",a=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${o}`,aud:o,iat:a,exp:a+3600,auth_time:a,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[vo(JSON.stringify(r)),vo(JSON.stringify(d)),""].join(".")}const Ai={};function Mv(){const i={prod:[],emulator:[]};for(const t of Object.keys(Ai))Ai[t]?i.emulator.push(t):i.prod.push(t);return i}function Av(i){let t=document.getElementById(i),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",i),r=!0),{created:r,element:t}}let Df=!1;function bv(i,t){if(typeof window>"u"||typeof document>"u"||!Mu(window.location.host)||Ai[i]===t||Ai[i]||Df)return;Ai[i]=t;function r(_){return`__firebase__banner__${_}`}const o="__firebase__banner",u=Mv().prod.length>0;function d(){const _=document.getElementById(o);_&&_.remove()}function f(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function m(_,T){_.setAttribute("width","24"),_.setAttribute("id",T),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function g(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Df=!0,d()},_}function C(_,T){_.setAttribute("id",T),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function y(){const _=Av(o),T=r("text"),R=document.getElementById(T)||document.createElement("span"),D=r("learnmore"),P=document.getElementById(D)||document.createElement("a"),Q=r("preprendIcon"),G=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const ee=_.element;f(ee),C(P,D);const he=g();m(G,Q),ee.append(G,R,P,he),document.body.appendChild(ee)}u?(R.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Kp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ov())}function Lv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Fv(){return Vp.NODE_ADMIN===!0}function jv(){try{return typeof indexedDB=="object"}catch{return!1}}function zv(){return new Promise((i,t)=>{try{let r=!0;const o="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(o);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(o),i(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var u;t(((u=a.error)==null?void 0:u.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="FirebaseError";class qi extends Error{constructor(t,r,o){super(r),this.code=t,this.customData=o,this.name=Uv,Object.setPrototypeOf(this,qi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qp.prototype.create)}}class qp{constructor(t,r,o){this.service=t,this.serviceName=r,this.errors=o}create(t,...r){const o=r[0]||{},a=`${this.service}/${t}`,u=this.errors[t],d=u?Bv(u,o):"Error",f=`${this.serviceName}: ${d} (${a}).`;return new qi(a,f,o)}}function Bv(i,t){return i.replace(Vv,(r,o)=>{const a=t[o];return a!=null?String(a):`<${o}?>`})}const Vv=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(i){return JSON.parse(i)}function We(i){return JSON.stringify(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp=function(i){let t={},r={},o={},a="";try{const u=i.split(".");t=zi(uu(u[0])||""),r=zi(uu(u[1])||""),a=u[2],o=r.d||{},delete r.d}catch{}return{header:t,claims:r,data:o,signature:a}},Wv=function(i){const t=Yp(i),r=t.claims;return!!r&&typeof r=="object"&&r.hasOwnProperty("iat")},Hv=function(i){const t=Yp(i).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(i,t){return Object.prototype.hasOwnProperty.call(i,t)}function Or(i,t){if(Object.prototype.hasOwnProperty.call(i,t))return i[t]}function Mf(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}function wo(i,t,r){const o={};for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&(o[a]=t.call(r,i[a],a,i));return o}function xo(i,t){if(i===t)return!0;const r=Object.keys(i),o=Object.keys(t);for(const a of r){if(!o.includes(a))return!1;const u=i[a],d=t[a];if(Af(u)&&Af(d)){if(!xo(u,d))return!1}else if(u!==d)return!1}for(const a of o)if(!r.includes(a))return!1;return!0}function Af(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(i){const t=[];for(const[r,o]of Object.entries(i))Array.isArray(o)?o.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(o));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,r){r||(r=0);const o=this.W_;if(typeof t=="string")for(let y=0;y<16;y++)o[y]=t.charCodeAt(r)<<24|t.charCodeAt(r+1)<<16|t.charCodeAt(r+2)<<8|t.charCodeAt(r+3),r+=4;else for(let y=0;y<16;y++)o[y]=t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3],r+=4;for(let y=16;y<80;y++){const _=o[y-3]^o[y-8]^o[y-14]^o[y-16];o[y]=(_<<1|_>>>31)&4294967295}let a=this.chain_[0],u=this.chain_[1],d=this.chain_[2],f=this.chain_[3],m=this.chain_[4],g,C;for(let y=0;y<80;y++){y<40?y<20?(g=f^u&(d^f),C=1518500249):(g=u^d^f,C=1859775393):y<60?(g=u&d|f&(u|d),C=2400959708):(g=u^d^f,C=3395469782);const _=(a<<5|a>>>27)+g+m+C+o[y]&4294967295;m=f,f=d,d=(u<<30|u>>>2)&4294967295,u=a,a=_}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+d&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(t,r){if(t==null)return;r===void 0&&(r=t.length);const o=r-this.blockSize;let a=0;const u=this.buf_;let d=this.inbuf_;for(;a<r;){if(d===0)for(;a<=o;)this.compress_(t,a),a+=this.blockSize;if(typeof t=="string"){for(;a<r;)if(u[d]=t.charCodeAt(a),++d,++a,d===this.blockSize){this.compress_(u),d=0;break}}else for(;a<r;)if(u[d]=t[a],++d,++a,d===this.blockSize){this.compress_(u),d=0;break}}this.inbuf_=d,this.total_+=r}digest(){const t=[];let r=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=r&255,r/=256;this.compress_(this.buf_);let o=0;for(let a=0;a<5;a++)for(let u=24;u>=0;u-=8)t[o]=this.chain_[a]>>u&255,++o;return t}}function Au(i,t){return`${i} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=function(i){const t=[];let r=0;for(let o=0;o<i.length;o++){let a=i.charCodeAt(o);if(a>=55296&&a<=56319){const u=a-55296;o++,j(o<i.length,"Surrogate pair missing trail surrogate.");const d=i.charCodeAt(o)-56320;a=65536+(u<<10)+d}a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):a<65536?(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},Uo=function(i){let t=0;for(let r=0;r<i.length;r++){const o=i.charCodeAt(r);o<128?t++:o<2048?t+=2:o>=55296&&o<=56319?(t+=4,r++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(i){return i&&i._delegate?i._delegate:i}class Ui{constructor(t,r,o){this.name=t,this.instanceFactory=r,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const o=new zo;if(this.instancesDeferred.set(r,o),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&o.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Yv(t))try{this.getOrInitializeService({instanceIdentifier:Kn})}catch{}for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const u=this.getOrInitializeService({instanceIdentifier:a});o.resolve(u)}catch{}}}}clearInstance(t=Kn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Kn){return this.instances.has(t)}getOptions(t=Kn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:o,options:r});for(const[u,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(u);o===f&&d.resolve(a)}return a}onInit(t,r){const o=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(o)??new Set;a.add(t),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&t(u,o),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const o=this.onInitCallbacks.get(r);if(o)for(const a of o)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let o=this.instances.get(t);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:qv(t),options:r}),this.instances.set(t,o),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(o,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,o)}catch{}return o||null}normalizeInstanceIdentifier(t=Kn){return this.component?this.component.multipleInstances?t:Kn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qv(i){return i===Kn?void 0:i}function Yv(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new Kv(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ve||(ve={}));const Jv={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},Zv=ve.INFO,e1={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},t1=(i,t,...r)=>{if(t<i.logLevel)return;const o=new Date().toISOString(),a=e1[t];if(a)console[a](`[${o}]  ${i.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Xp{constructor(t){this.name=t,this._logLevel=Zv,this._logHandler=t1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ve))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Jv[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...t),this._logHandler(this,ve.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...t),this._logHandler(this,ve.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...t),this._logHandler(this,ve.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...t),this._logHandler(this,ve.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...t),this._logHandler(this,ve.ERROR,...t)}}const n1=(i,t)=>t.some(r=>i instanceof r);let bf,Of;function r1(){return bf||(bf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function i1(){return Of||(Of=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jp=new WeakMap,cu=new WeakMap,Zp=new WeakMap,Ga=new WeakMap,bu=new WeakMap;function s1(i){const t=new Promise((r,o)=>{const a=()=>{i.removeEventListener("success",u),i.removeEventListener("error",d)},u=()=>{r(Rn(i.result)),a()},d=()=>{o(i.error),a()};i.addEventListener("success",u),i.addEventListener("error",d)});return t.then(r=>{r instanceof IDBCursor&&Jp.set(r,i)}).catch(()=>{}),bu.set(t,i),t}function o1(i){if(cu.has(i))return;const t=new Promise((r,o)=>{const a=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",d),i.removeEventListener("abort",d)},u=()=>{r(),a()},d=()=>{o(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",u),i.addEventListener("error",d),i.addEventListener("abort",d)});cu.set(i,t)}let du={get(i,t,r){if(i instanceof IDBTransaction){if(t==="done")return cu.get(i);if(t==="objectStoreNames")return i.objectStoreNames||Zp.get(i);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Rn(i[t])},set(i,t,r){return i[t]=r,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function l1(i){du=i(du)}function a1(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const o=i.call(Ka(this),t,...r);return Zp.set(o,t.sort?t.sort():[t]),Rn(o)}:i1().includes(i)?function(...t){return i.apply(Ka(this),t),Rn(Jp.get(this))}:function(...t){return Rn(i.apply(Ka(this),t))}}function u1(i){return typeof i=="function"?a1(i):(i instanceof IDBTransaction&&o1(i),n1(i,r1())?new Proxy(i,du):i)}function Rn(i){if(i instanceof IDBRequest)return s1(i);if(Ga.has(i))return Ga.get(i);const t=u1(i);return t!==i&&(Ga.set(i,t),bu.set(t,i)),t}const Ka=i=>bu.get(i);function c1(i,t,{blocked:r,upgrade:o,blocking:a,terminated:u}={}){const d=indexedDB.open(i,t),f=Rn(d);return o&&d.addEventListener("upgradeneeded",m=>{o(Rn(d.result),m.oldVersion,m.newVersion,Rn(d.transaction),m)}),r&&d.addEventListener("blocked",m=>r(m.oldVersion,m.newVersion,m)),f.then(m=>{u&&m.addEventListener("close",()=>u()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const d1=["get","getKey","getAll","getAllKeys","count"],h1=["put","add","delete","clear"],qa=new Map;function Lf(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(qa.get(t))return qa.get(t);const r=t.replace(/FromIndex$/,""),o=t!==r,a=h1.includes(r);if(!(r in(o?IDBIndex:IDBObjectStore).prototype)||!(a||d1.includes(r)))return;const u=async function(d,...f){const m=this.transaction(d,a?"readwrite":"readonly");let g=m.store;return o&&(g=g.index(f.shift())),(await Promise.all([g[r](...f),a&&m.done]))[0]};return qa.set(t,u),u}l1(i=>({...i,get:(t,r,o)=>Lf(t,r)||i.get(t,r,o),has:(t,r)=>!!Lf(t,r)||i.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(p1(r)){const o=r.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(r=>r).join(" ")}}function p1(i){const t=i.getComponent();return(t==null?void 0:t.type)==="VERSION"}const hu="@firebase/app",Ff="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn=new Xp("@firebase/app"),m1="@firebase/app-compat",g1="@firebase/analytics-compat",_1="@firebase/analytics",y1="@firebase/app-check-compat",v1="@firebase/app-check",w1="@firebase/auth",x1="@firebase/auth-compat",C1="@firebase/database",E1="@firebase/data-connect",S1="@firebase/database-compat",k1="@firebase/functions",N1="@firebase/functions-compat",I1="@firebase/installations",T1="@firebase/installations-compat",R1="@firebase/messaging",P1="@firebase/messaging-compat",D1="@firebase/performance",M1="@firebase/performance-compat",A1="@firebase/remote-config",b1="@firebase/remote-config-compat",O1="@firebase/storage",L1="@firebase/storage-compat",F1="@firebase/firestore",j1="@firebase/ai",z1="@firebase/firestore-compat",U1="firebase",B1="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu="[DEFAULT]",V1={[hu]:"fire-core",[m1]:"fire-core-compat",[_1]:"fire-analytics",[g1]:"fire-analytics-compat",[v1]:"fire-app-check",[y1]:"fire-app-check-compat",[w1]:"fire-auth",[x1]:"fire-auth-compat",[C1]:"fire-rtdb",[E1]:"fire-data-connect",[S1]:"fire-rtdb-compat",[k1]:"fire-fn",[N1]:"fire-fn-compat",[I1]:"fire-iid",[T1]:"fire-iid-compat",[R1]:"fire-fcm",[P1]:"fire-fcm-compat",[D1]:"fire-perf",[M1]:"fire-perf-compat",[A1]:"fire-rc",[b1]:"fire-rc-compat",[O1]:"fire-gcs",[L1]:"fire-gcs-compat",[F1]:"fire-fst",[z1]:"fire-fst-compat",[j1]:"fire-vertex","fire-js":"fire-js",[U1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=new Map,W1=new Map,pu=new Map;function jf(i,t){try{i.container.addComponent(t)}catch(r){sn.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,r)}}function Eo(i){const t=i.name;if(pu.has(t))return sn.debug(`There were multiple attempts to register component ${t}.`),!1;pu.set(t,i);for(const r of Co.values())jf(r,i);for(const r of W1.values())jf(r,i);return!0}function H1(i,t){const r=i.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),i.container.getProvider(t)}function $1(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pn=new qp("app","Firebase",Q1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(t,r,o){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Ui("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Pn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=B1;function em(i,t={}){let r=i;typeof t!="object"&&(t={name:t});const o={name:fu,automaticDataCollectionEnabled:!0,...t},a=o.name;if(typeof a!="string"||!a)throw Pn.create("bad-app-name",{appName:String(a)});if(r||(r=Gp()),!r)throw Pn.create("no-options");const u=Co.get(a);if(u){if(xo(r,u.options)&&xo(o,u.config))return u;throw Pn.create("duplicate-app",{appName:a})}const d=new Xv(a);for(const m of pu.values())d.addComponent(m);const f=new G1(r,o,d);return Co.set(a,f),f}function q1(i=fu){const t=Co.get(i);if(!t&&i===fu&&Gp())return em();if(!t)throw Pn.create("no-app",{appName:i});return t}function Dr(i,t,r){let o=V1[i]??i;r&&(o+=`-${r}`);const a=o.match(/\s|\//),u=t.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${t}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),sn.warn(d.join(" "));return}Eo(new Ui(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="firebase-heartbeat-database",X1=1,Bi="firebase-heartbeat-store";let Ya=null;function tm(){return Ya||(Ya=c1(Y1,X1,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(Bi)}catch(r){console.warn(r)}}}}).catch(i=>{throw Pn.create("idb-open",{originalErrorMessage:i.message})})),Ya}async function J1(i){try{const r=(await tm()).transaction(Bi),o=await r.objectStore(Bi).get(nm(i));return await r.done,o}catch(t){if(t instanceof qi)sn.warn(t.message);else{const r=Pn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});sn.warn(r.message)}}}async function zf(i,t){try{const o=(await tm()).transaction(Bi,"readwrite");await o.objectStore(Bi).put(t,nm(i)),await o.done}catch(r){if(r instanceof qi)sn.warn(r.message);else{const o=Pn.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});sn.warn(o.message)}}}function nm(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=1024,ew=30;class tw{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new rw(r),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Uf();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:a}),this._heartbeatsCache.heartbeats.length>ew){const d=iw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){sn.warn(o)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Uf(),{heartbeatsToSend:o,unsentEntries:a}=nw(this._heartbeatsCache.heartbeats),u=vo(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(r){return sn.warn(r),""}}}function Uf(){return new Date().toISOString().substring(0,10)}function nw(i,t=Z1){const r=[];let o=i.slice();for(const a of i){const u=r.find(d=>d.agent===a.agent);if(u){if(u.dates.push(a.date),Bf(r)>t){u.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),Bf(r)>t){r.pop();break}o=o.slice(1)}return{heartbeatsToSend:r,unsentEntries:o}}class rw{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jv()?zv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await J1(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const o=await this.read();return zf(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const o=await this.read();return zf(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function Bf(i){return vo(JSON.stringify({version:2,heartbeats:i})).length}function iw(i){if(i.length===0)return-1;let t=0,r=i[0].date;for(let o=1;o<i.length;o++)i[o].date<r&&(r=i[o].date,t=o);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(i){Eo(new Ui("platform-logger",t=>new f1(t),"PRIVATE")),Eo(new Ui("heartbeat",t=>new tw(t),"PRIVATE")),Dr(hu,Ff,i),Dr(hu,Ff,"esm2020"),Dr("fire-js","")}sw("");var Vf={};const Wf="@firebase/database",Hf="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rm="";function ow(i){rm=i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,r){r==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),We(r))}get(t){const r=this.domStorage_.getItem(this.prefixedName_(t));return r==null?null:zi(r)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,r){r==null?delete this.cache_[t]:this.cache_[t]=r}get(t){return an(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const t=window[i];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new lw(t)}}catch{}return new aw},Yn=im("localStorage"),uw=im("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr=new Xp("@firebase/database"),cw=(function(){let i=1;return function(){return i++}})(),sm=function(i){const t=Gv(i),r=new Qv;r.update(t);const o=r.digest();return Du.encodeByteArray(o)},Xi=function(...i){let t="";for(let r=0;r<i.length;r++){const o=i[r];Array.isArray(o)||o&&typeof o=="object"&&typeof o.length=="number"?t+=Xi.apply(null,o):typeof o=="object"?t+=We(o):t+=o,t+=" "}return t};let bi=null,$f=!0;const dw=function(i,t){j(!0,"Can't turn on custom loggers persistently."),Mr.logLevel=ve.VERBOSE,bi=Mr.log.bind(Mr)},Ze=function(...i){if($f===!0&&($f=!1,bi===null&&uw.get("logging_enabled")===!0&&dw()),bi){const t=Xi.apply(null,i);bi(t)}},Ji=function(i){return function(...t){Ze(i,...t)}},mu=function(...i){const t="FIREBASE INTERNAL ERROR: "+Xi(...i);Mr.error(t)},on=function(...i){const t=`FIREBASE FATAL ERROR: ${Xi(...i)}`;throw Mr.error(t),new Error(t)},dt=function(...i){const t="FIREBASE WARNING: "+Xi(...i);Mr.warn(t)},hw=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&dt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},om=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},fw=function(i){if(document.readyState==="complete")i();else{let t=!1;const r=function(){if(!document.body){setTimeout(r,Math.floor(10));return}t||(t=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&r()}),window.attachEvent("onload",r))}},Lr="[MIN_NAME]",Jn="[MAX_NAME]",Ur=function(i,t){if(i===t)return 0;if(i===Lr||t===Jn)return-1;if(t===Lr||i===Jn)return 1;{const r=Qf(i),o=Qf(t);return r!==null?o!==null?r-o===0?i.length-t.length:r-o:-1:o!==null?1:i<t?-1:1}},pw=function(i,t){return i===t?0:i<t?-1:1},Ri=function(i,t){if(t&&i in t)return t[i];throw new Error("Missing required key ("+i+") in object: "+We(t))},Ou=function(i){if(typeof i!="object"||i===null)return We(i);const t=[];for(const o in i)t.push(o);t.sort();let r="{";for(let o=0;o<t.length;o++)o!==0&&(r+=","),r+=We(t[o]),r+=":",r+=Ou(i[t[o]]);return r+="}",r},lm=function(i,t){const r=i.length;if(r<=t)return[i];const o=[];for(let a=0;a<r;a+=t)a+t>r?o.push(i.substring(a,r)):o.push(i.substring(a,a+t));return o};function ft(i,t){for(const r in i)i.hasOwnProperty(r)&&t(r,i[r])}const am=function(i){j(!om(i),"Invalid JSON number");const t=11,r=52,o=(1<<t-1)-1;let a,u,d,f,m;i===0?(u=0,d=0,a=1/i===-1/0?1:0):(a=i<0,i=Math.abs(i),i>=Math.pow(2,1-o)?(f=Math.min(Math.floor(Math.log(i)/Math.LN2),o),u=f+o,d=Math.round(i*Math.pow(2,r-f)-Math.pow(2,r))):(u=0,d=Math.round(i/Math.pow(2,1-o-r))));const g=[];for(m=r;m;m-=1)g.push(d%2?1:0),d=Math.floor(d/2);for(m=t;m;m-=1)g.push(u%2?1:0),u=Math.floor(u/2);g.push(a?1:0),g.reverse();const C=g.join("");let y="";for(m=0;m<64;m+=8){let _=parseInt(C.substr(m,8),2).toString(16);_.length===1&&(_="0"+_),y=y+_}return y.toLowerCase()},mw=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},gw=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function _w(i,t){let r="Unknown Error";i==="too_big"?r="The data requested exceeds the maximum size that can be accessed with a single request.":i==="permission_denied"?r="Client doesn't have permission to access the desired data.":i==="unavailable"&&(r="The service is unavailable");const o=new Error(i+" at "+t._path.toString()+": "+r);return o.code=i.toUpperCase(),o}const yw=new RegExp("^-?(0*)\\d{1,10}$"),vw=-2147483648,ww=2147483647,Qf=function(i){if(yw.test(i)){const t=Number(i);if(t>=vw&&t<=ww)return t}return null},Br=function(i){try{i()}catch(t){setTimeout(()=>{const r=t.stack||"";throw dt("Exception was thrown by user callback.",r),t},Math.floor(0))}},xw=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Oi=function(i,t){const r=setTimeout(i,t);return typeof r=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(r):typeof r=="object"&&r.unref&&r.unref(),r};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(t,r){this.appCheckProvider=r,this.appName=t.name,$1(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=r==null?void 0:r.getImmediate({optional:!0}),this.appCheck||r==null||r.get().then(o=>this.appCheck=o)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((r,o)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(r,o):r(null)},0)})}addTokenChangeListener(t){var r;(r=this.appCheckProvider)==null||r.get().then(o=>o.addTokenListener(t))}notifyForInvalidToken(){dt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(t,r,o){this.appName_=t,this.firebaseOptions_=r,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(a=>this.auth_=a)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(r=>r&&r.code==="auth/token-not-initialized"?(Ze("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,o)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(r,o):r(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(r=>r.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(r=>r.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',dt(t)}}class go{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}go.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu="5",um="v",cm="s",dm="r",hm="f",fm=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,pm="ls",mm="p",gu="ac",gm="websocket",_m="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(t,r,o,a,u=!1,d="",f=!1,m=!1,g=null){this.secure=r,this.namespace=o,this.webSocketOnly=a,this.nodeAdmin=u,this.persistenceKey=d,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=m,this.emulatorOptions=g,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Yn.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Yn.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${r}`}}function Sw(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function vm(i,t,r){j(typeof t=="string","typeof type must == string"),j(typeof r=="object","typeof params must == object");let o;if(t===gm)o=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(t===_m)o=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);Sw(i)&&(r.ns=i.namespace);const a=[];return ft(r,(u,d)=>{a.push(u+"="+d)}),o+a.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(){this.counters_={}}incrementCounter(t,r=1){an(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=r}get(){return Cv(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa={},Ja={};function Fu(i){const t=i.toString();return Xa[t]||(Xa[t]=new kw),Xa[t]}function Nw(i,t){const r=i.toString();return Ja[r]||(Ja[r]=t()),Ja[r]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,r){this.closeAfterResponse=t,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,r){for(this.pendingResponses[t]=r;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<o.length;++a)o[a]&&Br(()=>{this.onMessage_(o[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="start",Tw="close",Rw="pLPCommand",Pw="pRTLPCB",wm="id",xm="pw",Cm="ser",Dw="cb",Mw="seg",Aw="ts",bw="d",Ow="dframe",Em=1870,Sm=30,Lw=Em-Sm,Fw=25e3,jw=3e4;class Rr{constructor(t,r,o,a,u,d,f){this.connId=t,this.repoInfo=r,this.applicationId=o,this.appCheckToken=a,this.authToken=u,this.transportSessionId=d,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ji(t),this.stats_=Fu(r),this.urlFn=m=>(this.appCheckToken&&(m[gu]=this.appCheckToken),vm(r,_m,m))}open(t,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new Iw(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(jw)),fw(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ju((...u)=>{const[d,f,m,g,C]=u;if(this.incrementIncomingBytes_(u),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,d===Gf)this.id=f,this.password=m;else if(d===Tw)f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+d)},(...u)=>{const[d,f]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(d,f)},()=>{this.onClosed_()},this.urlFn);const o={};o[Gf]="t",o[Cm]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(o[Dw]=this.scriptTagHolder.uniqueCallbackIdentifier),o[um]=Lu,this.transportSessionId&&(o[cm]=this.transportSessionId),this.lastSessionId&&(o[pm]=this.lastSessionId),this.applicationId&&(o[mm]=this.applicationId),this.appCheckToken&&(o[gu]=this.appCheckToken),typeof location<"u"&&location.hostname&&fm.test(location.hostname)&&(o[dm]=hm);const a=this.urlFn(o);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Rr.forceAllow_=!0}static forceDisallow(){Rr.forceDisallow_=!0}static isAvailable(){return Rr.forceAllow_?!0:!Rr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!mw()&&!gw()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const r=We(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=Hp(r),a=lm(o,Lw);for(let u=0;u<a.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[u]),this.curSegmentNum++}addDisconnectPingFrame(t,r){this.myDisconnFrame=document.createElement("iframe");const o={};o[Ow]="t",o[wm]=t,o[xm]=r,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const r=We(t).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class ju{constructor(t,r,o,a){this.onDisconnect=o,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=cw(),window[Rw+this.uniqueCallbackIdentifier]=t,window[Pw+this.uniqueCallbackIdentifier]=r,this.myIFrame=ju.createIFrame_();let u="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(u='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(f){Ze("frame writing exception"),f.stack&&Ze(f.stack),Ze(f)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Ze("No IE domain setting required")}catch{const o=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,r){for(this.myID=t,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[wm]=this.myID,t[xm]=this.myPW,t[Cm]=this.currentSerial;let r=this.urlFn(t),o="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Sm+o.length<=Em;){const d=this.pendingSegs.shift();o=o+"&"+Mw+a+"="+d.seg+"&"+Aw+a+"="+d.ts+"&"+bw+a+"="+d.d,a++}return r=r+o,this.addLongPollTag_(r,this.currentSerial),!0}else return!1}enqueueSegment(t,r,o){this.pendingSegs.push({seg:t,ts:r,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(t,r){this.outstandingRequests.add(r);const o=()=>{this.outstandingRequests.delete(r),this.newRequest_()},a=setTimeout(o,Math.floor(Fw)),u=()=>{clearTimeout(a),o()};this.addTag(t,u)}addTag(t,r){setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=t,o.onload=o.onreadystatechange=function(){const a=o.readyState;(!a||a==="loaded"||a==="complete")&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),r())},o.onerror=()=>{Ze("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=16384,Uw=45e3;let So=null;typeof MozWebSocket<"u"?So=MozWebSocket:typeof WebSocket<"u"&&(So=WebSocket);class Ft{constructor(t,r,o,a,u,d,f){this.connId=t,this.applicationId=o,this.appCheckToken=a,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ji(this.connId),this.stats_=Fu(r),this.connURL=Ft.connectionURL_(r,d,f,a,o),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,a,u){const d={};return d[um]=Lu,typeof location<"u"&&location.hostname&&fm.test(location.hostname)&&(d[dm]=hm),r&&(d[cm]=r),o&&(d[pm]=o),a&&(d[gu]=a),u&&(d[mm]=u),vm(t,gm,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Yn.set("previous_websocket_failure",!0);try{let o;Fv(),this.mySock=new So(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const a=o.message||o.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const a=o.message||o.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){Ft.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=/Android ([0-9]{0,}\.[0-9]{0,})/,o=navigator.userAgent.match(r);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&So!==null&&!Ft.forceDisallow_}static previouslyFailed(){return Yn.isInMemoryStorage||Yn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Yn.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=zi(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(j(this.frames===null,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);o!==null&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=We(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=lm(r,zw);o.length>1&&this.sendString_(String(o.length));for(let a=0;a<o.length;a++)this.sendString_(o[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Uw))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ft.responsesRequiredToBeHealthy=2;Ft.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{static get ALL_TRANSPORTS(){return[Rr,Ft]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const r=Ft&&Ft.isAvailable();let o=r&&!Ft.previouslyFailed();if(t.webSocketOnly&&(r||dt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Ft];else{const a=this.transports_=[];for(const u of Vi.ALL_TRANSPORTS)u&&u.isAvailable()&&a.push(u);Vi.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Vi.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw=6e4,Vw=5e3,Ww=10*1024,Hw=100*1024,Za="t",Kf="d",$w="s",qf="r",Qw="e",Yf="o",Xf="a",Jf="n",Zf="p",Gw="h";class Kw{constructor(t,r,o,a,u,d,f,m,g,C){this.id=t,this.repoInfo_=r,this.applicationId_=o,this.appCheckToken_=a,this.authToken_=u,this.onMessage_=d,this.onReady_=f,this.onDisconnect_=m,this.onKill_=g,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ji("c:"+this.id+":"),this.transportManager_=new Vi(r),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,o)},Math.floor(0));const a=t.healthyTimeout||0;a>0&&(this.healthyTimeout_=Oi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Hw?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Ww?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return r=>{t===this.conn_?this.onConnectionLost_(r):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return r=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(r):t===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(t){const r={t:"d",d:t};this.sendData_(r)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Za in t){const r=t[Za];r===Xf?this.upgradeIfSecondaryHealthy_():r===qf?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):r===Yf&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const r=Ri("t",t),o=Ri("d",t);if(r==="c")this.onSecondaryControl_(o);else if(r==="d")this.pendingDataMessages.push(o);else throw new Error("Unknown protocol layer: "+r)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Zf,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Xf,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Jf,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const r=Ri("t",t),o=Ri("d",t);r==="c"?this.onControl_(o):r==="d"&&this.onDataMessage_(o)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const r=Ri(Za,t);if(Kf in t){const o=t[Kf];if(r===Gw){const a={...o};this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(r===Jf){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else r===$w?this.onConnectionShutdown_(o):r===qf?this.onReset_(o):r===Qw?mu("Server Error: "+o):r===Yf?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):mu("Unknown control packet command: "+r)}}onHandshake_(t){const r=t.ts,o=t.v,a=t.h;this.sessionId=t.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),Lu!==o&&dt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,o),Oi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Bw))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,r){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Oi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Vw))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Zf,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Yn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{put(t,r,o,a){}merge(t,r,o,a){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,r,o){}onDisconnectMerge(t,r,o){}onDisconnectCancel(t,r){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(t){this.allowedEvents_=t,this.listeners_={},j(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...r){if(Array.isArray(this.listeners_[t])){const o=[...this.listeners_[t]];for(let a=0;a<o.length;a++)o[a].callback.apply(o[a].context,r)}}on(t,r,o){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:r,context:o});const a=this.getInitialEvent(t);a&&r.apply(o,a)}off(t,r,o){this.validateEventType_(t);const a=this.listeners_[t]||[];for(let u=0;u<a.length;u++)if(a[u].callback===r&&(!o||o===a[u].context)){a.splice(u,1);return}}validateEventType_(t){j(this.allowedEvents_.find(r=>r===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko extends Nm{static getInstance(){return new ko}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Kp()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return j(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep=32,tp=768;class ge{constructor(t,r){if(r===void 0){this.pieces_=t.split("/");let o=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[o]=this.pieces_[a],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=r}toString(){let t="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)this.pieces_[r]!==""&&(t+="/"+this.pieces_[r]);return t||"/"}}function ce(){return new ge("")}function ne(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function Mn(i){return i.pieces_.length-i.pieceNum_}function we(i){let t=i.pieceNum_;return t<i.pieces_.length&&t++,new ge(i.pieces_,t)}function Im(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function qw(i){let t="";for(let r=i.pieceNum_;r<i.pieces_.length;r++)i.pieces_[r]!==""&&(t+="/"+encodeURIComponent(String(i.pieces_[r])));return t||"/"}function Tm(i,t=0){return i.pieces_.slice(i.pieceNum_+t)}function Rm(i){if(i.pieceNum_>=i.pieces_.length)return null;const t=[];for(let r=i.pieceNum_;r<i.pieces_.length-1;r++)t.push(i.pieces_[r]);return new ge(t,0)}function Fe(i,t){const r=[];for(let o=i.pieceNum_;o<i.pieces_.length;o++)r.push(i.pieces_[o]);if(t instanceof ge)for(let o=t.pieceNum_;o<t.pieces_.length;o++)r.push(t.pieces_[o]);else{const o=t.split("/");for(let a=0;a<o.length;a++)o[a].length>0&&r.push(o[a])}return new ge(r,0)}function se(i){return i.pieceNum_>=i.pieces_.length}function ut(i,t){const r=ne(i),o=ne(t);if(r===null)return t;if(r===o)return ut(we(i),we(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+i+")")}function zu(i,t){if(Mn(i)!==Mn(t))return!1;for(let r=i.pieceNum_,o=t.pieceNum_;r<=i.pieces_.length;r++,o++)if(i.pieces_[r]!==t.pieces_[o])return!1;return!0}function jt(i,t){let r=i.pieceNum_,o=t.pieceNum_;if(Mn(i)>Mn(t))return!1;for(;r<i.pieces_.length;){if(i.pieces_[r]!==t.pieces_[o])return!1;++r,++o}return!0}class Yw{constructor(t,r){this.errorPrefix_=r,this.parts_=Tm(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=Uo(this.parts_[o]);Pm(this)}}function Xw(i,t){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(t),i.byteLength_+=Uo(t),Pm(i)}function Jw(i){const t=i.parts_.pop();i.byteLength_-=Uo(t),i.parts_.length>0&&(i.byteLength_-=1)}function Pm(i){if(i.byteLength_>tp)throw new Error(i.errorPrefix_+"has a key path longer than "+tp+" bytes ("+i.byteLength_+").");if(i.parts_.length>ep)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ep+") or object contains a cycle "+qn(i))}function qn(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu extends Nm{static getInstance(){return new Uu}constructor(){super(["visible"]);let t,r;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const o=!document[t];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}getInitialEvent(t){return j(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=1e3,Zw=300*1e3,np=30*1e3,ex=1.3,tx=3e4,nx="server_kill",rp=3;class rn extends km{constructor(t,r,o,a,u,d,f,m){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=a,this.onServerInfoUpdate_=u,this.authTokenProvider_=d,this.appCheckTokenProvider_=f,this.authOverride_=m,this.id=rn.nextPersistentConnectionId_++,this.log_=Ji("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Pi,this.maxReconnectDelay_=Zw,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Uu.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&ko.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const a=++this.requestNumber_,u={r:a,a:t,b:r};this.log_(We(u)),j(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),o&&(this.requestCBHash_[a]=o)}get(t){this.initConnection_();const r=new zo,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:d=>{const f=d.d;d.s==="ok"?r.resolve(f):r.reject(f)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(u),r.promise}listen(t,r,o,a){this.initConnection_();const u=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+u),this.listens.has(d)||this.listens.set(d,new Map),j(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),j(!this.listens.get(d).has(u),"listen() called twice for same path/queryId.");const f={onComplete:a,hashFn:r,query:t,tag:o};this.listens.get(d).set(u,f),this.connected_&&this.sendListen_(f)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+o+" for "+a);const u={p:o},d="q";t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest(d,u,f=>{const m=f.d,g=f.s;rn.warnOnListenWarnings_(m,r),(this.listens.get(o)&&this.listens.get(o).get(a))===t&&(this.log_("listen response",f),g!=="ok"&&this.removeListen_(o,a),t.onComplete&&t.onComplete(g,m))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&an(t,"w")){const o=Or(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();dt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||Hv(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=np)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=Wv(t)?"auth":"gauth",o={cred:t};this.authOverride_===null?o.noauth=!0:typeof this.authOverride_=="object"&&(o.authvar=this.authOverride_),this.sendRequest(r,o,a=>{const u=a.s,d=a.d||"error";this.authToken_===t&&(u==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+a),j(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,a)&&this.connected_&&this.sendUnlisten_(o,a,t._queryObject,r)}sendUnlisten_(t,r,o,a){this.log_("Unlisten on "+t+" for "+r);const u={p:t},d="n";a&&(u.q=o,u.t=a),this.sendRequest(d,u)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,a){const u={p:r,d:o};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,d=>{a&&setTimeout(()=>{a(d.s,d.d)},Math.floor(0))})}put(t,r,o,a){this.putInternal("p",t,r,o,a)}merge(t,r,o,a){this.putInternal("m",t,r,o,a)}putInternal(t,r,o,a,u){this.initConnection_();const d={p:r,d:o};u!==void 0&&(d.h=u),this.outstandingPuts_.push({action:t,request:d,onComplete:a}),this.outstandingPutCount_++;const f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{if(o.s!=="ok"){const u=o.d;this.log_("reportStats","Error sending stats: "+u)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+We(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):mu("Unrecognized action received from server: "+We(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){j(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Pi,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Pi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>tx&&(this.reconnectDelay_=Pi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*ex)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),o=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+rn.nextConnectionId_++,u=this.lastSessionId;let d=!1,f=null;const m=function(){f?f.close():(d=!0,o())},g=function(y){j(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(y)};this.realtime_={close:m,sendRequest:g};const C=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[y,_]=await Promise.all([this.authTokenProvider_.getToken(C),this.appCheckTokenProvider_.getToken(C)]);d?Ze("getToken() completed but was canceled"):(Ze("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=_&&_.token,f=new Kw(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,o,T=>{dt(T+" ("+this.repoInfo_.toString()+")"),this.interrupt(nx)},u))}catch(y){this.log_("Failed to get token: "+y),d||(this.repoInfo_.nodeAdmin&&dt(y),m())}}}interrupt(t){Ze("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ze("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Mf(this.interruptReasons_)&&(this.reconnectDelay_=Pi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;r?o=r.map(u=>Ou(u)).join("$"):o="default";const a=this.removeListen_(t,o);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const o=new ge(t).toString();let a;if(this.listens.has(o)){const u=this.listens.get(o);a=u.get(r),u.delete(r),u.size===0&&this.listens.delete(o)}else a=void 0;return a}onAuthRevoked_(t,r){Ze("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=rp&&(this.reconnectDelay_=np,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ze("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=rp&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+rm.replace(/\./g,"-")]=1,Kp()?t["framework.cordova"]=1:Lv()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ko.getInstance().currentlyOnline();return Mf(this.interruptReasons_)&&t}}rn.nextPersistentConnectionId_=0;rn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t,r){this.name=t,this.node=r}static Wrap(t,r){return new re(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,r){const o=new re(Lr,t),a=new re(Lr,r);return this.compare(o,a)!==0}minPost(){return re.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let po;class Dm extends Bo{static get __EMPTY_NODE(){return po}static set __EMPTY_NODE(t){po=t}compare(t,r){return Ur(t.name,r.name)}isDefinedOn(t){throw zr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,r){return!1}minPost(){return re.MIN}maxPost(){return new re(Jn,po)}makePost(t,r){return j(typeof t=="string","KeyIndex indexValue must always be a string."),new re(t,po)}toString(){return".key"}}const Ar=new Dm;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(t,r,o,a,u=null){this.isReverse_=a,this.resultGenerator_=u,this.nodeStack_=[];let d=1;for(;!t.isEmpty();)if(t=t,d=r?o(t.key,r):1,a&&(d*=-1),d<0)this.isReverse_?t=t.left:t=t.right;else if(d===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),r;if(this.resultGenerator_?r=this.resultGenerator_(t.key,t.value):r={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Ve{constructor(t,r,o,a,u){this.key=t,this.value=r,this.color=o??Ve.RED,this.left=a??ct.EMPTY_NODE,this.right=u??ct.EMPTY_NODE}copy(t,r,o,a,u){return new Ve(t??this.key,r??this.value,o??this.color,a??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let a=this;const u=o(t,a.key);return u<0?a=a.copy(null,null,null,a.left.insert(t,r,o),null):u===0?a=a.copy(null,r,null,null,null):a=a.copy(null,null,null,null,a.right.insert(t,r,o)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return ct.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,a;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),r(t,o.key)===0){if(o.right.isEmpty())return ct.EMPTY_NODE;a=o.right.min_(),o=o.copy(a.key,a.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Ve.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Ve.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Ve.RED=!0;Ve.BLACK=!1;class rx{copy(t,r,o,a,u){return this}insert(t,r,o){return new Ve(t,r,null)}remove(t,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ct{constructor(t,r=ct.EMPTY_NODE){this.comparator_=t,this.root_=r}insert(t,r){return new ct(this.comparator_,this.root_.insert(t,r,this.comparator_).copy(null,null,Ve.BLACK,null,null))}remove(t){return new ct(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ve.BLACK,null,null))}get(t){let r,o=this.root_;for(;!o.isEmpty();){if(r=this.comparator_(t,o.key),r===0)return o.value;r<0?o=o.left:r>0&&(o=o.right)}return null}getPredecessorKey(t){let r,o=this.root_,a=null;for(;!o.isEmpty();)if(r=this.comparator_(t,o.key),r===0){if(o.left.isEmpty())return a?a.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}else r<0?o=o.left:r>0&&(a=o,o=o.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new mo(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,r){return new mo(this.root_,t,this.comparator_,!1,r)}getReverseIteratorFrom(t,r){return new mo(this.root_,t,this.comparator_,!0,r)}getReverseIterator(t){return new mo(this.root_,null,this.comparator_,!0,t)}}ct.EMPTY_NODE=new rx;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(i,t){return Ur(i.name,t.name)}function Bu(i,t){return Ur(i,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _u;function sx(i){_u=i}const Mm=function(i){return typeof i=="number"?"number:"+am(i):"string:"+i},Am=function(i){if(i.isLeafNode()){const t=i.val();j(typeof t=="string"||typeof t=="number"||typeof t=="object"&&an(t,".sv"),"Priority must be a string or number.")}else j(i===_u||i.isEmpty(),"priority of unexpected type.");j(i===_u||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ip;class Be{static set __childrenNodeConstructor(t){ip=t}static get __childrenNodeConstructor(){return ip}constructor(t,r=Be.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,j(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Am(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Be(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Be.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return se(t)?this:ne(t)===".priority"?this.priorityNode_:Be.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:Be.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=ne(t);return o===null?r:r.isEmpty()&&o!==".priority"?this:(j(o!==".priority"||Mn(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(o,Be.__childrenNodeConstructor.EMPTY_NODE.updateChild(we(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Mm(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",r==="number"?t+=am(this.value_):t+=this.value_,this.lazyHash_=sm(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Be.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Be.__childrenNodeConstructor?-1:(j(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,a=Be.VALUE_TYPE_ORDER.indexOf(r),u=Be.VALUE_TYPE_ORDER.indexOf(o);return j(a>=0,"Unknown leaf type: "+r),j(u>=0,"Unknown leaf type: "+o),a===u?o==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}Be.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bm,Om;function ox(i){bm=i}function lx(i){Om=i}class ax extends Bo{compare(t,r){const o=t.node.getPriority(),a=r.node.getPriority(),u=o.compareTo(a);return u===0?Ur(t.name,r.name):u}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,r){return!t.getPriority().equals(r.getPriority())}minPost(){return re.MIN}maxPost(){return new re(Jn,new Be("[PRIORITY-POST]",Om))}makePost(t,r){const o=bm(t);return new re(r,new Be("[PRIORITY-POST]",o))}toString(){return".priority"}}const De=new ax;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux=Math.log(2);class cx{constructor(t){const r=u=>parseInt(Math.log(u)/ux,10),o=u=>parseInt(Array(u+1).join("1"),2);this.count=r(t+1),this.current_=this.count-1;const a=o(this.count);this.bits_=t+1&a}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const No=function(i,t,r,o){i.sort(t);const a=function(m,g){const C=g-m;let y,_;if(C===0)return null;if(C===1)return y=i[m],_=r?r(y):y,new Ve(_,y.node,Ve.BLACK,null,null);{const T=parseInt(C/2,10)+m,R=a(m,T),D=a(T+1,g);return y=i[T],_=r?r(y):y,new Ve(_,y.node,Ve.BLACK,R,D)}},u=function(m){let g=null,C=null,y=i.length;const _=function(R,D){const P=y-R,Q=y;y-=R;const G=a(P+1,Q),ee=i[P],he=r?r(ee):ee;T(new Ve(he,ee.node,D,null,G))},T=function(R){g?(g.left=R,g=R):(C=R,g=R)};for(let R=0;R<m.count;++R){const D=m.nextBitIsOne(),P=Math.pow(2,m.count-(R+1));D?_(P,Ve.BLACK):(_(P,Ve.BLACK),_(P,Ve.RED))}return C},d=new cx(i.length),f=u(d);return new ct(o||t,f)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu;const Tr={};class nn{static get Default(){return j(Tr&&De,"ChildrenNode.ts has not been loaded"),eu=eu||new nn({".priority":Tr},{".priority":De}),eu}constructor(t,r){this.indexes_=t,this.indexSet_=r}get(t){const r=Or(this.indexes_,t);if(!r)throw new Error("No index defined for "+t);return r instanceof ct?r:null}hasIndex(t){return an(this.indexSet_,t.toString())}addIndex(t,r){j(t!==Ar,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let a=!1;const u=r.getIterator(re.Wrap);let d=u.getNext();for(;d;)a=a||t.isDefinedOn(d.node),o.push(d),d=u.getNext();let f;a?f=No(o,t.getCompare()):f=Tr;const m=t.toString(),g={...this.indexSet_};g[m]=t;const C={...this.indexes_};return C[m]=f,new nn(C,g)}addToIndexes(t,r){const o=wo(this.indexes_,(a,u)=>{const d=Or(this.indexSet_,u);if(j(d,"Missing index implementation for "+u),a===Tr)if(d.isDefinedOn(t.node)){const f=[],m=r.getIterator(re.Wrap);let g=m.getNext();for(;g;)g.name!==t.name&&f.push(g),g=m.getNext();return f.push(t),No(f,d.getCompare())}else return Tr;else{const f=r.get(t.name);let m=a;return f&&(m=m.remove(new re(t.name,f))),m.insert(t,t.node)}});return new nn(o,this.indexSet_)}removeFromIndexes(t,r){const o=wo(this.indexes_,a=>{if(a===Tr)return a;{const u=r.get(t.name);return u?a.remove(new re(t.name,u)):a}});return new nn(o,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Di;class X{static get EMPTY_NODE(){return Di||(Di=new X(new ct(Bu),null,nn.Default))}constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&Am(this.priorityNode_),this.children_.isEmpty()&&j(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Di}updatePriority(t){return this.children_.isEmpty()?this:new X(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const r=this.children_.get(t);return r===null?Di:r}}getChild(t){const r=ne(t);return r===null?this:this.getImmediateChild(r).getChild(we(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(j(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{const o=new re(t,r);let a,u;r.isEmpty()?(a=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(o,this.children_)):(a=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(o,this.children_));const d=a.isEmpty()?Di:this.priorityNode_;return new X(a,d,u)}}updateChild(t,r){const o=ne(t);if(o===null)return r;{j(ne(t)!==".priority"||Mn(t)===1,".priority must be the last token in a path");const a=this.getImmediateChild(o).updateChild(we(t),r);return this.updateImmediateChild(o,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,a=0,u=!0;if(this.forEachChild(De,(d,f)=>{r[d]=f.val(t),o++,u&&X.INTEGER_REGEXP_.test(d)?a=Math.max(a,Number(d)):u=!1}),!t&&u&&a<2*o){const d=[];for(const f in r)d[f]=r[f];return d}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Mm(this.getPriority().val())+":"),this.forEachChild(De,(r,o)=>{const a=o.hash();a!==""&&(t+=":"+r+":"+a)}),this.lazyHash_=t===""?"":sm(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const a=this.resolveIndex_(o);if(a){const u=a.getPredecessorKey(new re(t,r));return u?u.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}else return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new re(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}else return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new re(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,re.Wrap);let u=a.peek();for(;u!=null&&r.compare(u,t)<0;)a.getNext(),u=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,re.Wrap);let u=a.peek();for(;u!=null&&r.compare(u,t)>0;)a.getNext(),u=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Zi?-1:0}withIndex(t){if(t===Ar||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new X(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ar||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){const o=this.getIterator(De),a=r.getIterator(De);let u=o.getNext(),d=a.getNext();for(;u&&d;){if(u.name!==d.name||!u.node.equals(d.node))return!1;u=o.getNext(),d=a.getNext()}return u===null&&d===null}else return!1;else return!1}}resolveIndex_(t){return t===Ar?null:this.indexMap_.get(t.toString())}}X.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class dx extends X{constructor(){super(new ct(Bu),X.EMPTY_NODE,nn.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return X.EMPTY_NODE}isEmpty(){return!1}}const Zi=new dx;Object.defineProperties(re,{MIN:{value:new re(Lr,X.EMPTY_NODE)},MAX:{value:new re(Jn,Zi)}});Dm.__EMPTY_NODE=X.EMPTY_NODE;Be.__childrenNodeConstructor=X;sx(Zi);lx(Zi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx=!0;function Ge(i,t=null){if(i===null)return X.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(t=i[".priority"]),j(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){const r=i;return new Be(r,Ge(t))}if(!(i instanceof Array)&&hx){const r=[];let o=!1;if(ft(i,(d,f)=>{if(d.substring(0,1)!=="."){const m=Ge(f);m.isEmpty()||(o=o||!m.getPriority().isEmpty(),r.push(new re(d,m)))}}),r.length===0)return X.EMPTY_NODE;const u=No(r,ix,d=>d.name,Bu);if(o){const d=No(r,De.getCompare());return new X(u,Ge(t),new nn({".priority":d},{".priority":De}))}else return new X(u,Ge(t),nn.Default)}else{let r=X.EMPTY_NODE;return ft(i,(o,a)=>{if(an(i,o)&&o.substring(0,1)!=="."){const u=Ge(a);(u.isLeafNode()||!u.isEmpty())&&(r=r.updateImmediateChild(o,u))}}),r.updatePriority(Ge(t))}}ox(Ge);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx extends Bo{constructor(t){super(),this.indexPath_=t,j(!se(t)&&ne(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,r){const o=this.extractChild(t.node),a=this.extractChild(r.node),u=o.compareTo(a);return u===0?Ur(t.name,r.name):u}makePost(t,r){const o=Ge(t),a=X.EMPTY_NODE.updateChild(this.indexPath_,o);return new re(r,a)}maxPost(){const t=X.EMPTY_NODE.updateChild(this.indexPath_,Zi);return new re(Jn,t)}toString(){return Tm(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px extends Bo{compare(t,r){const o=t.node.compareTo(r.node);return o===0?Ur(t.name,r.name):o}isDefinedOn(t){return!0}indexedValueChanged(t,r){return!t.equals(r)}minPost(){return re.MIN}maxPost(){return re.MAX}makePost(t,r){const o=Ge(t);return new re(r,o)}toString(){return".value"}}const mx=new px;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(i){return{type:"value",snapshotNode:i}}function Fr(i,t){return{type:"child_added",snapshotNode:t,childName:i}}function Wi(i,t){return{type:"child_removed",snapshotNode:t,childName:i}}function Hi(i,t,r){return{type:"child_changed",snapshotNode:t,childName:i,oldSnap:r}}function gx(i,t){return{type:"child_moved",snapshotNode:t,childName:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(t){this.index_=t}updateChild(t,r,o,a,u,d){j(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=t.getImmediateChild(r);return f.getChild(a).equals(o.getChild(a))&&f.isEmpty()===o.isEmpty()||(d!=null&&(o.isEmpty()?t.hasChild(r)?d.trackChildChange(Wi(r,f)):j(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?d.trackChildChange(Fr(r,o)):d.trackChildChange(Hi(r,o,f))),t.isLeafNode()&&o.isEmpty())?t:t.updateImmediateChild(r,o).withIndex(this.index_)}updateFullNode(t,r,o){return o!=null&&(t.isLeafNode()||t.forEachChild(De,(a,u)=>{r.hasChild(a)||o.trackChildChange(Wi(a,u))}),r.isLeafNode()||r.forEachChild(De,(a,u)=>{if(t.hasChild(a)){const d=t.getImmediateChild(a);d.equals(u)||o.trackChildChange(Hi(a,u,d))}else o.trackChildChange(Fr(a,u))})),r.withIndex(this.index_)}updatePriority(t,r){return t.isEmpty()?X.EMPTY_NODE:t.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(t){this.indexedFilter_=new Vu(t.getIndex()),this.index_=t.getIndex(),this.startPost_=$i.getStartPost_(t),this.endPost_=$i.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const r=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,o=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return r&&o}updateChild(t,r,o,a,u,d){return this.matches(new re(r,o))||(o=X.EMPTY_NODE),this.indexedFilter_.updateChild(t,r,o,a,u,d)}updateFullNode(t,r,o){r.isLeafNode()&&(r=X.EMPTY_NODE);let a=r.withIndex(this.index_);a=a.updatePriority(X.EMPTY_NODE);const u=this;return r.forEachChild(De,(d,f)=>{u.matches(new re(d,f))||(a=a.updateImmediateChild(d,X.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,a,o)}updatePriority(t,r){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const r=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),r)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const r=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),r)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(t){this.withinDirectionalStart=r=>this.reverse_?this.withinEndPost(r):this.withinStartPost(r),this.withinDirectionalEnd=r=>this.reverse_?this.withinStartPost(r):this.withinEndPost(r),this.withinStartPost=r=>{const o=this.index_.compare(this.rangedFilter_.getStartPost(),r);return this.startIsInclusive_?o<=0:o<0},this.withinEndPost=r=>{const o=this.index_.compare(r,this.rangedFilter_.getEndPost());return this.endIsInclusive_?o<=0:o<0},this.rangedFilter_=new $i(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,r,o,a,u,d){return this.rangedFilter_.matches(new re(r,o))||(o=X.EMPTY_NODE),t.getImmediateChild(r).equals(o)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,r,o,a,u,d):this.fullLimitUpdateChild_(t,r,o,u,d)}updateFullNode(t,r,o){let a;if(r.isLeafNode()||r.isEmpty())a=X.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<r.numChildren()&&r.isIndexed(this.index_)){a=X.EMPTY_NODE.withIndex(this.index_);let u;this.reverse_?u=r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u=r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;u.hasNext()&&d<this.limit_;){const f=u.getNext();if(this.withinDirectionalStart(f))if(this.withinDirectionalEnd(f))a=a.updateImmediateChild(f.name,f.node),d++;else break;else continue}}else{a=r.withIndex(this.index_),a=a.updatePriority(X.EMPTY_NODE);let u;this.reverse_?u=a.getReverseIterator(this.index_):u=a.getIterator(this.index_);let d=0;for(;u.hasNext();){const f=u.getNext();d<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?d++:a=a.updateImmediateChild(f.name,X.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,a,o)}updatePriority(t,r){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,r,o,a,u){let d;if(this.reverse_){const y=this.index_.getCompare();d=(_,T)=>y(T,_)}else d=this.index_.getCompare();const f=t;j(f.numChildren()===this.limit_,"");const m=new re(r,o),g=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),C=this.rangedFilter_.matches(m);if(f.hasChild(r)){const y=f.getImmediateChild(r);let _=a.getChildAfterChild(this.index_,g,this.reverse_);for(;_!=null&&(_.name===r||f.hasChild(_.name));)_=a.getChildAfterChild(this.index_,_,this.reverse_);const T=_==null?1:d(_,m);if(C&&!o.isEmpty()&&T>=0)return u!=null&&u.trackChildChange(Hi(r,o,y)),f.updateImmediateChild(r,o);{u!=null&&u.trackChildChange(Wi(r,y));const D=f.updateImmediateChild(r,X.EMPTY_NODE);return _!=null&&this.rangedFilter_.matches(_)?(u!=null&&u.trackChildChange(Fr(_.name,_.node)),D.updateImmediateChild(_.name,_.node)):D}}else return o.isEmpty()?t:C&&d(g,m)>=0?(u!=null&&(u.trackChildChange(Wi(g.name,g.node)),u.trackChildChange(Fr(r,o))),f.updateImmediateChild(r,o).updateImmediateChild(g.name,X.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=De}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return j(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return j(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Lr}hasEnd(){return this.endSet_}getIndexEndValue(){return j(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return j(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Jn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return j(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===De}copy(){const t=new Wu;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function yx(i){return i.loadsAllData()?new Vu(i.getIndex()):i.hasLimit()?new _x(i):new $i(i)}function sp(i){const t={};if(i.isDefault())return t;let r;if(i.index_===De?r="$priority":i.index_===mx?r="$value":i.index_===Ar?r="$key":(j(i.index_ instanceof fx,"Unrecognized index type!"),r=i.index_.toString()),t.orderBy=We(r),i.startSet_){const o=i.startAfterSet_?"startAfter":"startAt";t[o]=We(i.indexStartValue_),i.startNameSet_&&(t[o]+=","+We(i.indexStartName_))}if(i.endSet_){const o=i.endBeforeSet_?"endBefore":"endAt";t[o]=We(i.indexEndValue_),i.endNameSet_&&(t[o]+=","+We(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?t.limitToFirst=i.limit_:t.limitToLast=i.limit_),t}function op(i){const t={};if(i.startSet_&&(t.sp=i.indexStartValue_,i.startNameSet_&&(t.sn=i.indexStartName_),t.sin=!i.startAfterSet_),i.endSet_&&(t.ep=i.indexEndValue_,i.endNameSet_&&(t.en=i.indexEndName_),t.ein=!i.endBeforeSet_),i.limitSet_){t.l=i.limit_;let r=i.viewFrom_;r===""&&(i.isViewFromLeft()?r="l":r="r"),t.vf=r}return i.index_!==De&&(t.i=i.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends km{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,r){return r!==void 0?"tag$"+r:(j(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,r,o,a){super(),this.repoInfo_=t,this.onDataUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.log_=Ji("p:rest:"),this.listens_={}}listen(t,r,o,a){const u=t._path.toString();this.log_("Listen called for "+u+" "+t._queryIdentifier);const d=Io.getListenId_(t,o),f={};this.listens_[d]=f;const m=sp(t._queryParams);this.restRequest_(u+".json",m,(g,C)=>{let y=C;if(g===404&&(y=null,g=null),g===null&&this.onDataUpdate_(u,y,!1,o),Or(this.listens_,d)===f){let _;g?g===401?_="permission_denied":_="rest_error:"+g:_="ok",a(_,null)}})}unlisten(t,r){const o=Io.getListenId_(t,r);delete this.listens_[o]}get(t){const r=sp(t._queryParams),o=t._path.toString(),a=new zo;return this.restRequest_(o+".json",r,(u,d)=>{let f=d;u===404&&(f=null,u=null),u===null?(this.onDataUpdate_(o,f,!1,null),a.resolve(f)):a.reject(new Error(f))}),a.promise}refreshAuthToken(t){}restRequest_(t,r={},o){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,u])=>{a&&a.accessToken&&(r.auth=a.accessToken),u&&u.token&&(r.ac=u.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+$v(r);this.log_("Sending REST request for "+d);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(o&&f.readyState===4){this.log_("REST Response for "+d+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=zi(f.responseText)}catch{dt("Failed to parse JSON response for "+d+": "+f.responseText)}o(null,m)}else f.status!==401&&f.status!==404&&dt("Got unsuccessful REST response for "+d+" Status: "+f.status),o(f.status);o=null}},f.open("GET",d,!0),f.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(){this.rootNode_=X.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,r){this.rootNode_=this.rootNode_.updateChild(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(){return{value:null,children:new Map}}function Fm(i,t,r){if(se(t))i.value=r,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(t,r);else{const o=ne(t);i.children.has(o)||i.children.set(o,To());const a=i.children.get(o);t=we(t),Fm(a,t,r)}}function yu(i,t,r){i.value!==null?r(t,i.value):wx(i,(o,a)=>{const u=new ge(t.toString()+"/"+o);yu(a,u,r)})}function wx(i,t){i.children.forEach((r,o)=>{t(o,r)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),r={...t};return this.last_&&ft(this.last_,(o,a)=>{r[o]=r[o]-a}),this.last_=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp=10*1e3,Cx=30*1e3,Ex=300*1e3;class Sx{constructor(t,r){this.server_=r,this.statsToReport_={},this.statsListener_=new xx(t);const o=lp+(Cx-lp)*Math.random();Oi(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const t=this.statsListener_.get(),r={};let o=!1;ft(t,(a,u)=>{u>0&&an(this.statsToReport_,a)&&(r[a]=u,o=!0)}),o&&this.server_.reportStats(r),Oi(this.reportStats_.bind(this),Math.floor(Math.random()*2*Ex))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt;(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(zt||(zt={}));function jm(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Hu(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function $u(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(t,r,o){this.path=t,this.affectedTree=r,this.revert=o,this.type=zt.ACK_USER_WRITE,this.source=jm()}operationForChild(t){if(se(this.path)){if(this.affectedTree.value!=null)return j(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new ge(t));return new Ro(ce(),r,this.revert)}}else return j(ne(this.path)===t,"operationForChild called for unrelated child."),new Ro(we(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(t,r){this.source=t,this.path=r,this.type=zt.LISTEN_COMPLETE}operationForChild(t){return se(this.path)?new Qi(this.source,ce()):new Qi(this.source,we(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(t,r,o){this.source=t,this.path=r,this.snap=o,this.type=zt.OVERWRITE}operationForChild(t){return se(this.path)?new Zn(this.source,ce(),this.snap.getImmediateChild(t)):new Zn(this.source,we(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(t,r,o){this.source=t,this.path=r,this.children=o,this.type=zt.MERGE}operationForChild(t){if(se(this.path)){const r=this.children.subtree(new ge(t));return r.isEmpty()?null:r.value?new Zn(this.source,ce(),r.value):new Gi(this.source,ce(),r)}else return j(ne(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Gi(this.source,we(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(t,r,o){this.node_=t,this.fullyInitialized_=r,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(se(t))return this.isFullyInitialized()&&!this.filtered_;const r=ne(t);return this.isCompleteForChild(r)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function Nx(i,t,r,o){const a=[],u=[];return t.forEach(d=>{d.type==="child_changed"&&i.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&u.push(gx(d.childName,d.snapshotNode))}),Mi(i,a,"child_removed",t,o,r),Mi(i,a,"child_added",t,o,r),Mi(i,a,"child_moved",u,o,r),Mi(i,a,"child_changed",t,o,r),Mi(i,a,"value",t,o,r),a}function Mi(i,t,r,o,a,u){const d=o.filter(f=>f.type===r);d.sort((f,m)=>Tx(i,f,m)),d.forEach(f=>{const m=Ix(i,f,u);a.forEach(g=>{g.respondsTo(f.type)&&t.push(g.createEvent(m,i.query_))})})}function Ix(i,t,r){return t.type==="value"||t.type==="child_removed"||(t.prevName=r.getPredecessorChildName(t.childName,t.snapshotNode,i.index_)),t}function Tx(i,t,r){if(t.childName==null||r.childName==null)throw zr("Should only compare child_ events.");const o=new re(t.childName,t.snapshotNode),a=new re(r.childName,r.snapshotNode);return i.index_.compare(o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(i,t){return{eventCache:i,serverCache:t}}function Li(i,t,r,o){return Vo(new er(t,r,o),i.serverCache)}function zm(i,t,r,o){return Vo(i.eventCache,new er(t,r,o))}function vu(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function tr(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tu;const Rx=()=>(tu||(tu=new ct(pw)),tu);class Ee{static fromObject(t){let r=new Ee(null);return ft(t,(o,a)=>{r=r.set(new ge(o),a)}),r}constructor(t,r=Rx()){this.value=t,this.children=r}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,r){if(this.value!=null&&r(this.value))return{path:ce(),value:this.value};if(se(t))return null;{const o=ne(t),a=this.children.get(o);if(a!==null){const u=a.findRootMostMatchingPathAndValue(we(t),r);return u!=null?{path:Fe(new ge(o),u.path),value:u.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(se(t))return this;{const r=ne(t),o=this.children.get(r);return o!==null?o.subtree(we(t)):new Ee(null)}}set(t,r){if(se(t))return new Ee(r,this.children);{const o=ne(t),u=(this.children.get(o)||new Ee(null)).set(we(t),r),d=this.children.insert(o,u);return new Ee(this.value,d)}}remove(t){if(se(t))return this.children.isEmpty()?new Ee(null):new Ee(null,this.children);{const r=ne(t),o=this.children.get(r);if(o){const a=o.remove(we(t));let u;return a.isEmpty()?u=this.children.remove(r):u=this.children.insert(r,a),this.value===null&&u.isEmpty()?new Ee(null):new Ee(this.value,u)}else return this}}get(t){if(se(t))return this.value;{const r=ne(t),o=this.children.get(r);return o?o.get(we(t)):null}}setTree(t,r){if(se(t))return r;{const o=ne(t),u=(this.children.get(o)||new Ee(null)).setTree(we(t),r);let d;return u.isEmpty()?d=this.children.remove(o):d=this.children.insert(o,u),new Ee(this.value,d)}}fold(t){return this.fold_(ce(),t)}fold_(t,r){const o={};return this.children.inorderTraversal((a,u)=>{o[a]=u.fold_(Fe(t,a),r)}),r(t,this.value,o)}findOnPath(t,r){return this.findOnPath_(t,ce(),r)}findOnPath_(t,r,o){const a=this.value?o(r,this.value):!1;if(a)return a;if(se(t))return null;{const u=ne(t),d=this.children.get(u);return d?d.findOnPath_(we(t),Fe(r,u),o):null}}foreachOnPath(t,r){return this.foreachOnPath_(t,ce(),r)}foreachOnPath_(t,r,o){if(se(t))return this;{this.value&&o(r,this.value);const a=ne(t),u=this.children.get(a);return u?u.foreachOnPath_(we(t),Fe(r,a),o):new Ee(null)}}foreach(t){this.foreach_(ce(),t)}foreach_(t,r){this.children.inorderTraversal((o,a)=>{a.foreach_(Fe(t,o),r)}),this.value&&r(t,this.value)}foreachChild(t){this.children.inorderTraversal((r,o)=>{o.value&&t(r,o.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(t){this.writeTree_=t}static empty(){return new Ut(new Ee(null))}}function Fi(i,t,r){if(se(t))return new Ut(new Ee(r));{const o=i.writeTree_.findRootMostValueAndPath(t);if(o!=null){const a=o.path;let u=o.value;const d=ut(a,t);return u=u.updateChild(d,r),new Ut(i.writeTree_.set(a,u))}else{const a=new Ee(r),u=i.writeTree_.setTree(t,a);return new Ut(u)}}}function ap(i,t,r){let o=i;return ft(r,(a,u)=>{o=Fi(o,Fe(t,a),u)}),o}function up(i,t){if(se(t))return Ut.empty();{const r=i.writeTree_.setTree(t,new Ee(null));return new Ut(r)}}function wu(i,t){return nr(i,t)!=null}function nr(i,t){const r=i.writeTree_.findRootMostValueAndPath(t);return r!=null?i.writeTree_.get(r.path).getChild(ut(r.path,t)):null}function cp(i){const t=[],r=i.writeTree_.value;return r!=null?r.isLeafNode()||r.forEachChild(De,(o,a)=>{t.push(new re(o,a))}):i.writeTree_.children.inorderTraversal((o,a)=>{a.value!=null&&t.push(new re(o,a.value))}),t}function Dn(i,t){if(se(t))return i;{const r=nr(i,t);return r!=null?new Ut(new Ee(r)):new Ut(i.writeTree_.subtree(t))}}function xu(i){return i.writeTree_.isEmpty()}function jr(i,t){return Um(ce(),i.writeTree_,t)}function Um(i,t,r){if(t.value!=null)return r.updateChild(i,t.value);{let o=null;return t.children.inorderTraversal((a,u)=>{a===".priority"?(j(u.value!==null,"Priority writes must always be leaf nodes"),o=u.value):r=Um(Fe(i,a),u,r)}),!r.getChild(i).isEmpty()&&o!==null&&(r=r.updateChild(Fe(i,".priority"),o)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(i,t){return Hm(t,i)}function Px(i,t,r,o,a){j(o>i.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),i.allWrites.push({path:t,snap:r,writeId:o,visible:a}),a&&(i.visibleWrites=Fi(i.visibleWrites,t,r)),i.lastWriteId=o}function Dx(i,t){for(let r=0;r<i.allWrites.length;r++){const o=i.allWrites[r];if(o.writeId===t)return o}return null}function Mx(i,t){const r=i.allWrites.findIndex(f=>f.writeId===t);j(r>=0,"removeWrite called with nonexistent writeId.");const o=i.allWrites[r];i.allWrites.splice(r,1);let a=o.visible,u=!1,d=i.allWrites.length-1;for(;a&&d>=0;){const f=i.allWrites[d];f.visible&&(d>=r&&Ax(f,o.path)?a=!1:jt(o.path,f.path)&&(u=!0)),d--}if(a){if(u)return bx(i),!0;if(o.snap)i.visibleWrites=up(i.visibleWrites,o.path);else{const f=o.children;ft(f,m=>{i.visibleWrites=up(i.visibleWrites,Fe(o.path,m))})}return!0}else return!1}function Ax(i,t){if(i.snap)return jt(i.path,t);for(const r in i.children)if(i.children.hasOwnProperty(r)&&jt(Fe(i.path,r),t))return!0;return!1}function bx(i){i.visibleWrites=Bm(i.allWrites,Ox,ce()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function Ox(i){return i.visible}function Bm(i,t,r){let o=Ut.empty();for(let a=0;a<i.length;++a){const u=i[a];if(t(u)){const d=u.path;let f;if(u.snap)jt(r,d)?(f=ut(r,d),o=Fi(o,f,u.snap)):jt(d,r)&&(f=ut(d,r),o=Fi(o,ce(),u.snap.getChild(f)));else if(u.children){if(jt(r,d))f=ut(r,d),o=ap(o,f,u.children);else if(jt(d,r))if(f=ut(d,r),se(f))o=ap(o,ce(),u.children);else{const m=Or(u.children,ne(f));if(m){const g=m.getChild(we(f));o=Fi(o,ce(),g)}}}else throw zr("WriteRecord should have .snap or .children")}}return o}function Vm(i,t,r,o,a){if(!o&&!a){const u=nr(i.visibleWrites,t);if(u!=null)return u;{const d=Dn(i.visibleWrites,t);if(xu(d))return r;if(r==null&&!wu(d,ce()))return null;{const f=r||X.EMPTY_NODE;return jr(d,f)}}}else{const u=Dn(i.visibleWrites,t);if(!a&&xu(u))return r;if(!a&&r==null&&!wu(u,ce()))return null;{const d=function(g){return(g.visible||a)&&(!o||!~o.indexOf(g.writeId))&&(jt(g.path,t)||jt(t,g.path))},f=Bm(i.allWrites,d,t),m=r||X.EMPTY_NODE;return jr(f,m)}}}function Lx(i,t,r){let o=X.EMPTY_NODE;const a=nr(i.visibleWrites,t);if(a)return a.isLeafNode()||a.forEachChild(De,(u,d)=>{o=o.updateImmediateChild(u,d)}),o;if(r){const u=Dn(i.visibleWrites,t);return r.forEachChild(De,(d,f)=>{const m=jr(Dn(u,new ge(d)),f);o=o.updateImmediateChild(d,m)}),cp(u).forEach(d=>{o=o.updateImmediateChild(d.name,d.node)}),o}else{const u=Dn(i.visibleWrites,t);return cp(u).forEach(d=>{o=o.updateImmediateChild(d.name,d.node)}),o}}function Fx(i,t,r,o,a){j(o||a,"Either existingEventSnap or existingServerSnap must exist");const u=Fe(t,r);if(wu(i.visibleWrites,u))return null;{const d=Dn(i.visibleWrites,u);return xu(d)?a.getChild(r):jr(d,a.getChild(r))}}function jx(i,t,r,o){const a=Fe(t,r),u=nr(i.visibleWrites,a);if(u!=null)return u;if(o.isCompleteForChild(r)){const d=Dn(i.visibleWrites,a);return jr(d,o.getNode().getImmediateChild(r))}else return null}function zx(i,t){return nr(i.visibleWrites,t)}function Ux(i,t,r,o,a,u,d){let f;const m=Dn(i.visibleWrites,t),g=nr(m,ce());if(g!=null)f=g;else if(r!=null)f=jr(m,r);else return[];if(f=f.withIndex(d),!f.isEmpty()&&!f.isLeafNode()){const C=[],y=d.getCompare(),_=u?f.getReverseIteratorFrom(o,d):f.getIteratorFrom(o,d);let T=_.getNext();for(;T&&C.length<a;)y(T,o)!==0&&C.push(T),T=_.getNext();return C}else return[]}function Bx(){return{visibleWrites:Ut.empty(),allWrites:[],lastWriteId:-1}}function Po(i,t,r,o){return Vm(i.writeTree,i.treePath,t,r,o)}function Gu(i,t){return Lx(i.writeTree,i.treePath,t)}function dp(i,t,r,o){return Fx(i.writeTree,i.treePath,t,r,o)}function Do(i,t){return zx(i.writeTree,Fe(i.treePath,t))}function Vx(i,t,r,o,a,u){return Ux(i.writeTree,i.treePath,t,r,o,a,u)}function Ku(i,t,r){return jx(i.writeTree,i.treePath,t,r)}function Wm(i,t){return Hm(Fe(i.treePath,t),i.writeTree)}function Hm(i,t){return{treePath:i,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(){this.changeMap=new Map}trackChildChange(t){const r=t.type,o=t.childName;j(r==="child_added"||r==="child_changed"||r==="child_removed","Only child changes supported for tracking"),j(o!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(o);if(a){const u=a.type;if(r==="child_added"&&u==="child_removed")this.changeMap.set(o,Hi(o,t.snapshotNode,a.snapshotNode));else if(r==="child_removed"&&u==="child_added")this.changeMap.delete(o);else if(r==="child_removed"&&u==="child_changed")this.changeMap.set(o,Wi(o,a.oldSnap));else if(r==="child_changed"&&u==="child_added")this.changeMap.set(o,Fr(o,t.snapshotNode));else if(r==="child_changed"&&u==="child_changed")this.changeMap.set(o,Hi(o,t.snapshotNode,a.oldSnap));else throw zr("Illegal combination of changes: "+t+" occurred after "+a)}else this.changeMap.set(o,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{getCompleteChild(t){return null}getChildAfterChild(t,r,o){return null}}const $m=new Hx;class qu{constructor(t,r,o=null){this.writes_=t,this.viewCache_=r,this.optCompleteServerCache_=o}getCompleteChild(t){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(t))return r.getNode().getImmediateChild(t);{const o=this.optCompleteServerCache_!=null?new er(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ku(this.writes_,t,o)}}getChildAfterChild(t,r,o){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:tr(this.viewCache_),u=Vx(this.writes_,a,r,1,o,t);return u.length===0?null:u[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(i){return{filter:i}}function Qx(i,t){j(t.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),j(t.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function Gx(i,t,r,o,a){const u=new Wx;let d,f;if(r.type===zt.OVERWRITE){const g=r;g.source.fromUser?d=Cu(i,t,g.path,g.snap,o,a,u):(j(g.source.fromServer,"Unknown source."),f=g.source.tagged||t.serverCache.isFiltered()&&!se(g.path),d=Mo(i,t,g.path,g.snap,o,a,f,u))}else if(r.type===zt.MERGE){const g=r;g.source.fromUser?d=qx(i,t,g.path,g.children,o,a,u):(j(g.source.fromServer,"Unknown source."),f=g.source.tagged||t.serverCache.isFiltered(),d=Eu(i,t,g.path,g.children,o,a,f,u))}else if(r.type===zt.ACK_USER_WRITE){const g=r;g.revert?d=Jx(i,t,g.path,o,a,u):d=Yx(i,t,g.path,g.affectedTree,o,a,u)}else if(r.type===zt.LISTEN_COMPLETE)d=Xx(i,t,r.path,o,u);else throw zr("Unknown operation type: "+r.type);const m=u.getChanges();return Kx(t,d,m),{viewCache:d,changes:m}}function Kx(i,t,r){const o=t.eventCache;if(o.isFullyInitialized()){const a=o.getNode().isLeafNode()||o.getNode().isEmpty(),u=vu(i);(r.length>0||!i.eventCache.isFullyInitialized()||a&&!o.getNode().equals(u)||!o.getNode().getPriority().equals(u.getPriority()))&&r.push(Lm(vu(t)))}}function Qm(i,t,r,o,a,u){const d=t.eventCache;if(Do(o,r)!=null)return t;{let f,m;if(se(r))if(j(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const g=tr(t),C=g instanceof X?g:X.EMPTY_NODE,y=Gu(o,C);f=i.filter.updateFullNode(t.eventCache.getNode(),y,u)}else{const g=Po(o,tr(t));f=i.filter.updateFullNode(t.eventCache.getNode(),g,u)}else{const g=ne(r);if(g===".priority"){j(Mn(r)===1,"Can't have a priority with additional path components");const C=d.getNode();m=t.serverCache.getNode();const y=dp(o,r,C,m);y!=null?f=i.filter.updatePriority(C,y):f=d.getNode()}else{const C=we(r);let y;if(d.isCompleteForChild(g)){m=t.serverCache.getNode();const _=dp(o,r,d.getNode(),m);_!=null?y=d.getNode().getImmediateChild(g).updateChild(C,_):y=d.getNode().getImmediateChild(g)}else y=Ku(o,g,t.serverCache);y!=null?f=i.filter.updateChild(d.getNode(),g,y,C,a,u):f=d.getNode()}}return Li(t,f,d.isFullyInitialized()||se(r),i.filter.filtersNodes())}}function Mo(i,t,r,o,a,u,d,f){const m=t.serverCache;let g;const C=d?i.filter:i.filter.getIndexedFilter();if(se(r))g=C.updateFullNode(m.getNode(),o,null);else if(C.filtersNodes()&&!m.isFiltered()){const T=m.getNode().updateChild(r,o);g=C.updateFullNode(m.getNode(),T,null)}else{const T=ne(r);if(!m.isCompleteForPath(r)&&Mn(r)>1)return t;const R=we(r),P=m.getNode().getImmediateChild(T).updateChild(R,o);T===".priority"?g=C.updatePriority(m.getNode(),P):g=C.updateChild(m.getNode(),T,P,R,$m,null)}const y=zm(t,g,m.isFullyInitialized()||se(r),C.filtersNodes()),_=new qu(a,y,u);return Qm(i,y,r,a,_,f)}function Cu(i,t,r,o,a,u,d){const f=t.eventCache;let m,g;const C=new qu(a,t,u);if(se(r))g=i.filter.updateFullNode(t.eventCache.getNode(),o,d),m=Li(t,g,!0,i.filter.filtersNodes());else{const y=ne(r);if(y===".priority")g=i.filter.updatePriority(t.eventCache.getNode(),o),m=Li(t,g,f.isFullyInitialized(),f.isFiltered());else{const _=we(r),T=f.getNode().getImmediateChild(y);let R;if(se(_))R=o;else{const D=C.getCompleteChild(y);D!=null?Im(_)===".priority"&&D.getChild(Rm(_)).isEmpty()?R=D:R=D.updateChild(_,o):R=X.EMPTY_NODE}if(T.equals(R))m=t;else{const D=i.filter.updateChild(f.getNode(),y,R,_,C,d);m=Li(t,D,f.isFullyInitialized(),i.filter.filtersNodes())}}}return m}function hp(i,t){return i.eventCache.isCompleteForChild(t)}function qx(i,t,r,o,a,u,d){let f=t;return o.foreach((m,g)=>{const C=Fe(r,m);hp(t,ne(C))&&(f=Cu(i,f,C,g,a,u,d))}),o.foreach((m,g)=>{const C=Fe(r,m);hp(t,ne(C))||(f=Cu(i,f,C,g,a,u,d))}),f}function fp(i,t,r){return r.foreach((o,a)=>{t=t.updateChild(o,a)}),t}function Eu(i,t,r,o,a,u,d,f){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let m=t,g;se(r)?g=o:g=new Ee(null).setTree(r,o);const C=t.serverCache.getNode();return g.children.inorderTraversal((y,_)=>{if(C.hasChild(y)){const T=t.serverCache.getNode().getImmediateChild(y),R=fp(i,T,_);m=Mo(i,m,new ge(y),R,a,u,d,f)}}),g.children.inorderTraversal((y,_)=>{const T=!t.serverCache.isCompleteForChild(y)&&_.value===null;if(!C.hasChild(y)&&!T){const R=t.serverCache.getNode().getImmediateChild(y),D=fp(i,R,_);m=Mo(i,m,new ge(y),D,a,u,d,f)}}),m}function Yx(i,t,r,o,a,u,d){if(Do(a,r)!=null)return t;const f=t.serverCache.isFiltered(),m=t.serverCache;if(o.value!=null){if(se(r)&&m.isFullyInitialized()||m.isCompleteForPath(r))return Mo(i,t,r,m.getNode().getChild(r),a,u,f,d);if(se(r)){let g=new Ee(null);return m.getNode().forEachChild(Ar,(C,y)=>{g=g.set(new ge(C),y)}),Eu(i,t,r,g,a,u,f,d)}else return t}else{let g=new Ee(null);return o.foreach((C,y)=>{const _=Fe(r,C);m.isCompleteForPath(_)&&(g=g.set(C,m.getNode().getChild(_)))}),Eu(i,t,r,g,a,u,f,d)}}function Xx(i,t,r,o,a){const u=t.serverCache,d=zm(t,u.getNode(),u.isFullyInitialized()||se(r),u.isFiltered());return Qm(i,d,r,o,$m,a)}function Jx(i,t,r,o,a,u){let d;if(Do(o,r)!=null)return t;{const f=new qu(o,t,a),m=t.eventCache.getNode();let g;if(se(r)||ne(r)===".priority"){let C;if(t.serverCache.isFullyInitialized())C=Po(o,tr(t));else{const y=t.serverCache.getNode();j(y instanceof X,"serverChildren would be complete if leaf node"),C=Gu(o,y)}C=C,g=i.filter.updateFullNode(m,C,u)}else{const C=ne(r);let y=Ku(o,C,t.serverCache);y==null&&t.serverCache.isCompleteForChild(C)&&(y=m.getImmediateChild(C)),y!=null?g=i.filter.updateChild(m,C,y,we(r),f,u):t.eventCache.getNode().hasChild(C)?g=i.filter.updateChild(m,C,X.EMPTY_NODE,we(r),f,u):g=m,g.isEmpty()&&t.serverCache.isFullyInitialized()&&(d=Po(o,tr(t)),d.isLeafNode()&&(g=i.filter.updateFullNode(g,d,u)))}return d=t.serverCache.isFullyInitialized()||Do(o,ce())!=null,Li(t,g,d,i.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(t,r){this.query_=t,this.eventRegistrations_=[];const o=this.query_._queryParams,a=new Vu(o.getIndex()),u=yx(o);this.processor_=$x(u);const d=r.serverCache,f=r.eventCache,m=a.updateFullNode(X.EMPTY_NODE,d.getNode(),null),g=u.updateFullNode(X.EMPTY_NODE,f.getNode(),null),C=new er(m,d.isFullyInitialized(),a.filtersNodes()),y=new er(g,f.isFullyInitialized(),u.filtersNodes());this.viewCache_=Vo(y,C),this.eventGenerator_=new kx(this.query_)}get query(){return this.query_}}function eC(i){return i.viewCache_.serverCache.getNode()}function tC(i,t){const r=tr(i.viewCache_);return r&&(i.query._queryParams.loadsAllData()||!se(t)&&!r.getImmediateChild(ne(t)).isEmpty())?r.getChild(t):null}function pp(i){return i.eventRegistrations_.length===0}function nC(i,t){i.eventRegistrations_.push(t)}function mp(i,t,r){const o=[];if(r){j(t==null,"A cancel should cancel all event registrations.");const a=i.query._path;i.eventRegistrations_.forEach(u=>{const d=u.createCancelEvent(r,a);d&&o.push(d)})}if(t){let a=[];for(let u=0;u<i.eventRegistrations_.length;++u){const d=i.eventRegistrations_[u];if(!d.matches(t))a.push(d);else if(t.hasAnyCallback()){a=a.concat(i.eventRegistrations_.slice(u+1));break}}i.eventRegistrations_=a}else i.eventRegistrations_=[];return o}function gp(i,t,r,o){t.type===zt.MERGE&&t.source.queryId!==null&&(j(tr(i.viewCache_),"We should always have a full cache before handling merges"),j(vu(i.viewCache_),"Missing event cache, even though we have a server cache"));const a=i.viewCache_,u=Gx(i.processor_,a,t,r,o);return Qx(i.processor_,u.viewCache),j(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=u.viewCache,Gm(i,u.changes,u.viewCache.eventCache.getNode(),null)}function rC(i,t){const r=i.viewCache_.eventCache,o=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(De,(u,d)=>{o.push(Fr(u,d))}),r.isFullyInitialized()&&o.push(Lm(r.getNode())),Gm(i,o,r.getNode(),t)}function Gm(i,t,r,o){const a=o?[o]:i.eventRegistrations_;return Nx(i.eventGenerator_,t,r,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ao;class iC{constructor(){this.views=new Map}}function sC(i){j(!Ao,"__referenceConstructor has already been defined"),Ao=i}function oC(){return j(Ao,"Reference.ts has not been loaded"),Ao}function lC(i){return i.views.size===0}function Yu(i,t,r,o){const a=t.source.queryId;if(a!==null){const u=i.views.get(a);return j(u!=null,"SyncTree gave us an op for an invalid query."),gp(u,t,r,o)}else{let u=[];for(const d of i.views.values())u=u.concat(gp(d,t,r,o));return u}}function aC(i,t,r,o,a){const u=t._queryIdentifier,d=i.views.get(u);if(!d){let f=Po(r,a?o:null),m=!1;f?m=!0:o instanceof X?(f=Gu(r,o),m=!1):(f=X.EMPTY_NODE,m=!1);const g=Vo(new er(f,m,!1),new er(o,a,!1));return new Zx(t,g)}return d}function uC(i,t,r,o,a,u){const d=aC(i,t,o,a,u);return i.views.has(t._queryIdentifier)||i.views.set(t._queryIdentifier,d),nC(d,r),rC(d,r)}function cC(i,t,r,o){const a=t._queryIdentifier,u=[];let d=[];const f=An(i);if(a==="default")for(const[m,g]of i.views.entries())d=d.concat(mp(g,r,o)),pp(g)&&(i.views.delete(m),g.query._queryParams.loadsAllData()||u.push(g.query));else{const m=i.views.get(a);m&&(d=d.concat(mp(m,r,o)),pp(m)&&(i.views.delete(a),m.query._queryParams.loadsAllData()||u.push(m.query)))}return f&&!An(i)&&u.push(new(oC())(t._repo,t._path)),{removed:u,events:d}}function Km(i){const t=[];for(const r of i.views.values())r.query._queryParams.loadsAllData()||t.push(r);return t}function br(i,t){let r=null;for(const o of i.views.values())r=r||tC(o,t);return r}function qm(i,t){if(t._queryParams.loadsAllData())return Wo(i);{const o=t._queryIdentifier;return i.views.get(o)}}function Ym(i,t){return qm(i,t)!=null}function An(i){return Wo(i)!=null}function Wo(i){for(const t of i.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bo;function dC(i){j(!bo,"__referenceConstructor has already been defined"),bo=i}function hC(){return j(bo,"Reference.ts has not been loaded"),bo}let fC=1;class _p{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Ee(null),this.pendingWriteTree_=Bx(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Xm(i,t,r,o,a){return Px(i.pendingWriteTree_,t,r,o,a),a?es(i,new Zn(jm(),t,r)):[]}function Xn(i,t,r=!1){const o=Dx(i.pendingWriteTree_,t);if(Mx(i.pendingWriteTree_,t)){let u=new Ee(null);return o.snap!=null?u=u.set(ce(),!0):ft(o.children,d=>{u=u.set(new ge(d),!0)}),es(i,new Ro(o.path,u,r))}else return[]}function Ho(i,t,r){return es(i,new Zn(Hu(),t,r))}function pC(i,t,r){const o=Ee.fromObject(r);return es(i,new Gi(Hu(),t,o))}function mC(i,t){return es(i,new Qi(Hu(),t))}function gC(i,t,r){const o=Ju(i,r);if(o){const a=Zu(o),u=a.path,d=a.queryId,f=ut(u,t),m=new Qi($u(d),f);return ec(i,u,m)}else return[]}function Su(i,t,r,o,a=!1){const u=t._path,d=i.syncPointTree_.get(u);let f=[];if(d&&(t._queryIdentifier==="default"||Ym(d,t))){const m=cC(d,t,r,o);lC(d)&&(i.syncPointTree_=i.syncPointTree_.remove(u));const g=m.removed;if(f=m.events,!a){const C=g.findIndex(_=>_._queryParams.loadsAllData())!==-1,y=i.syncPointTree_.findOnPath(u,(_,T)=>An(T));if(C&&!y){const _=i.syncPointTree_.subtree(u);if(!_.isEmpty()){const T=vC(_);for(let R=0;R<T.length;++R){const D=T[R],P=D.query,Q=eg(i,D);i.listenProvider_.startListening(ji(P),Oo(i,P),Q.hashFn,Q.onComplete)}}}!y&&g.length>0&&!o&&(C?i.listenProvider_.stopListening(ji(t),null):g.forEach(_=>{const T=i.queryToTagMap.get($o(_));i.listenProvider_.stopListening(ji(_),T)}))}wC(i,g)}return f}function _C(i,t,r,o){const a=Ju(i,o);if(a!=null){const u=Zu(a),d=u.path,f=u.queryId,m=ut(d,t),g=new Zn($u(f),m,r);return ec(i,d,g)}else return[]}function yC(i,t,r,o){const a=Ju(i,o);if(a){const u=Zu(a),d=u.path,f=u.queryId,m=ut(d,t),g=Ee.fromObject(r),C=new Gi($u(f),m,g);return ec(i,d,C)}else return[]}function yp(i,t,r,o=!1){const a=t._path;let u=null,d=!1;i.syncPointTree_.foreachOnPath(a,(_,T)=>{const R=ut(_,a);u=u||br(T,R),d=d||An(T)});let f=i.syncPointTree_.get(a);f?(d=d||An(f),u=u||br(f,ce())):(f=new iC,i.syncPointTree_=i.syncPointTree_.set(a,f));let m;u!=null?m=!0:(m=!1,u=X.EMPTY_NODE,i.syncPointTree_.subtree(a).foreachChild((T,R)=>{const D=br(R,ce());D&&(u=u.updateImmediateChild(T,D))}));const g=Ym(f,t);if(!g&&!t._queryParams.loadsAllData()){const _=$o(t);j(!i.queryToTagMap.has(_),"View does not exist, but we have a tag");const T=xC();i.queryToTagMap.set(_,T),i.tagToQueryMap.set(T,_)}const C=Qu(i.pendingWriteTree_,a);let y=uC(f,t,r,C,u,m);if(!g&&!d&&!o){const _=qm(f,t);y=y.concat(CC(i,t,_))}return y}function Xu(i,t,r){const a=i.pendingWriteTree_,u=i.syncPointTree_.findOnPath(t,(d,f)=>{const m=ut(d,t),g=br(f,m);if(g)return g});return Vm(a,t,u,r,!0)}function es(i,t){return Jm(t,i.syncPointTree_,null,Qu(i.pendingWriteTree_,ce()))}function Jm(i,t,r,o){if(se(i.path))return Zm(i,t,r,o);{const a=t.get(ce());r==null&&a!=null&&(r=br(a,ce()));let u=[];const d=ne(i.path),f=i.operationForChild(d),m=t.children.get(d);if(m&&f){const g=r?r.getImmediateChild(d):null,C=Wm(o,d);u=u.concat(Jm(f,m,g,C))}return a&&(u=u.concat(Yu(a,i,o,r))),u}}function Zm(i,t,r,o){const a=t.get(ce());r==null&&a!=null&&(r=br(a,ce()));let u=[];return t.children.inorderTraversal((d,f)=>{const m=r?r.getImmediateChild(d):null,g=Wm(o,d),C=i.operationForChild(d);C&&(u=u.concat(Zm(C,f,m,g)))}),a&&(u=u.concat(Yu(a,i,o,r))),u}function eg(i,t){const r=t.query,o=Oo(i,r);return{hashFn:()=>(eC(t)||X.EMPTY_NODE).hash(),onComplete:a=>{if(a==="ok")return o?gC(i,r._path,o):mC(i,r._path);{const u=_w(a,r);return Su(i,r,null,u)}}}}function Oo(i,t){const r=$o(t);return i.queryToTagMap.get(r)}function $o(i){return i._path.toString()+"$"+i._queryIdentifier}function Ju(i,t){return i.tagToQueryMap.get(t)}function Zu(i){const t=i.indexOf("$");return j(t!==-1&&t<i.length-1,"Bad queryKey."),{queryId:i.substr(t+1),path:new ge(i.substr(0,t))}}function ec(i,t,r){const o=i.syncPointTree_.get(t);j(o,"Missing sync point for query tag that we're tracking");const a=Qu(i.pendingWriteTree_,t);return Yu(o,r,a,null)}function vC(i){return i.fold((t,r,o)=>{if(r&&An(r))return[Wo(r)];{let a=[];return r&&(a=Km(r)),ft(o,(u,d)=>{a=a.concat(d)}),a}})}function ji(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(hC())(i._repo,i._path):i}function wC(i,t){for(let r=0;r<t.length;++r){const o=t[r];if(!o._queryParams.loadsAllData()){const a=$o(o),u=i.queryToTagMap.get(a);i.queryToTagMap.delete(a),i.tagToQueryMap.delete(u)}}}function xC(){return fC++}function CC(i,t,r){const o=t._path,a=Oo(i,t),u=eg(i,r),d=i.listenProvider_.startListening(ji(t),a,u.hashFn,u.onComplete),f=i.syncPointTree_.subtree(o);if(a)j(!An(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((g,C,y)=>{if(!se(g)&&C&&An(C))return[Wo(C).query];{let _=[];return C&&(_=_.concat(Km(C).map(T=>T.query))),ft(y,(T,R)=>{_=_.concat(R)}),_}});for(let g=0;g<m.length;++g){const C=m[g];i.listenProvider_.stopListening(ji(C),Oo(i,C))}}return d}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(t){this.node_=t}getImmediateChild(t){const r=this.node_.getImmediateChild(t);return new tc(r)}node(){return this.node_}}class nc{constructor(t,r){this.syncTree_=t,this.path_=r}getImmediateChild(t){const r=Fe(this.path_,t);return new nc(this.syncTree_,r)}node(){return Xu(this.syncTree_,this.path_)}}const EC=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},vp=function(i,t,r){if(!i||typeof i!="object")return i;if(j(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return SC(i[".sv"],t,r);if(typeof i[".sv"]=="object")return kC(i[".sv"],t);j(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},SC=function(i,t,r){switch(i){case"timestamp":return r.timestamp;default:j(!1,"Unexpected server value: "+i)}},kC=function(i,t,r){i.hasOwnProperty("increment")||j(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const o=i.increment;typeof o!="number"&&j(!1,"Unexpected increment value: "+o);const a=t.node();if(j(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return o;const d=a.getValue();return typeof d!="number"?o:d+o},NC=function(i,t,r,o){return rc(t,new nc(r,i),o)},tg=function(i,t,r){return rc(i,new tc(t),r)};function rc(i,t,r){const o=i.getPriority().val(),a=vp(o,t.getImmediateChild(".priority"),r);let u;if(i.isLeafNode()){const d=i,f=vp(d.getValue(),t,r);return f!==d.getValue()||a!==d.getPriority().val()?new Be(f,Ge(a)):i}else{const d=i;return u=d,a!==d.getPriority().val()&&(u=u.updatePriority(new Be(a))),d.forEachChild(De,(f,m)=>{const g=rc(m,t.getImmediateChild(f),r);g!==m&&(u=u.updateImmediateChild(f,g))}),u}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(t="",r=null,o={children:{},childCount:0}){this.name=t,this.parent=r,this.node=o}}function sc(i,t){let r=t instanceof ge?t:new ge(t),o=i,a=ne(r);for(;a!==null;){const u=Or(o.node.children,a)||{children:{},childCount:0};o=new ic(a,o,u),r=we(r),a=ne(r)}return o}function Vr(i){return i.node.value}function ng(i,t){i.node.value=t,ku(i)}function rg(i){return i.node.childCount>0}function IC(i){return Vr(i)===void 0&&!rg(i)}function Qo(i,t){ft(i.node.children,(r,o)=>{t(new ic(r,i,o))})}function ig(i,t,r,o){r&&t(i),Qo(i,a=>{ig(a,t,!0)})}function TC(i,t,r){let o=i.parent;for(;o!==null;){if(t(o))return!0;o=o.parent}return!1}function ts(i){return new ge(i.parent===null?i.name:ts(i.parent)+"/"+i.name)}function ku(i){i.parent!==null&&RC(i.parent,i.name,i)}function RC(i,t,r){const o=IC(r),a=an(i.node.children,t);o&&a?(delete i.node.children[t],i.node.childCount--,ku(i)):!o&&!a&&(i.node.children[t]=r.node,i.node.childCount++,ku(i))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=/[\[\].#$\/\u0000-\u001F\u007F]/,DC=/[\[\].#$\u0000-\u001F\u007F]/,nu=10*1024*1024,sg=function(i){return typeof i=="string"&&i.length!==0&&!PC.test(i)},og=function(i){return typeof i=="string"&&i.length!==0&&!DC.test(i)},MC=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),og(i)},AC=function(i,t,r,o){oc(Au(i,"value"),t,r)},oc=function(i,t,r){const o=r instanceof ge?new Yw(r,i):r;if(t===void 0)throw new Error(i+"contains undefined "+qn(o));if(typeof t=="function")throw new Error(i+"contains a function "+qn(o)+" with contents = "+t.toString());if(om(t))throw new Error(i+"contains "+t.toString()+" "+qn(o));if(typeof t=="string"&&t.length>nu/3&&Uo(t)>nu)throw new Error(i+"contains a string greater than "+nu+" utf8 bytes "+qn(o)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let a=!1,u=!1;if(ft(t,(d,f)=>{if(d===".value")a=!0;else if(d!==".priority"&&d!==".sv"&&(u=!0,!sg(d)))throw new Error(i+" contains an invalid key ("+d+") "+qn(o)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Xw(o,d),oc(i,f,o),Jw(o)}),a&&u)throw new Error(i+' contains ".value" child '+qn(o)+" in addition to actual children.")}},lg=function(i,t,r,o){if(!og(r))throw new Error(Au(i,t)+'was an invalid path = "'+r+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},bC=function(i,t,r,o){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),lg(i,t,r)},OC=function(i,t){if(ne(t)===".info")throw new Error(i+" failed = Can't modify data under /.info/")},LC=function(i,t){const r=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!sg(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!MC(r))throw new Error(Au(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function lc(i,t){let r=null;for(let o=0;o<t.length;o++){const a=t[o],u=a.getPath();r!==null&&!zu(u,r.path)&&(i.eventLists_.push(r),r=null),r===null&&(r={events:[],path:u}),r.events.push(a)}r&&i.eventLists_.push(r)}function ag(i,t,r){lc(i,r),ug(i,o=>zu(o,t))}function ln(i,t,r){lc(i,r),ug(i,o=>jt(o,t)||jt(t,o))}function ug(i,t){i.recursionDepth_++;let r=!0;for(let o=0;o<i.eventLists_.length;o++){const a=i.eventLists_[o];if(a){const u=a.path;t(u)?(jC(i.eventLists_[o]),i.eventLists_[o]=null):r=!1}}r&&(i.eventLists_=[]),i.recursionDepth_--}function jC(i){for(let t=0;t<i.events.length;t++){const r=i.events[t];if(r!==null){i.events[t]=null;const o=r.getEventRunner();bi&&Ze("event: "+r.toString()),Br(o)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="repo_interrupt",UC=25;class BC{constructor(t,r,o,a){this.repoInfo_=t,this.forceRestClient_=r,this.authTokenProvider_=o,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new FC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=To(),this.transactionQueueTree_=new ic,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function VC(i,t,r){if(i.stats_=Fu(i.repoInfo_),i.forceRestClient_||xw())i.server_=new Io(i.repoInfo_,(o,a,u,d)=>{wp(i,o,a,u,d)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>xp(i,!0),0);else{if(typeof r<"u"&&r!==null){if(typeof r!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{We(r)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}i.persistentConnection_=new rn(i.repoInfo_,t,(o,a,u,d)=>{wp(i,o,a,u,d)},o=>{xp(i,o)},o=>{HC(i,o)},i.authTokenProvider_,i.appCheckProvider_,r),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(o=>{i.server_.refreshAuthToken(o)}),i.appCheckProvider_.addTokenChangeListener(o=>{i.server_.refreshAppCheckToken(o.token)}),i.statsReporter_=Nw(i.repoInfo_,()=>new Sx(i.stats_,i.server_)),i.infoData_=new vx,i.infoSyncTree_=new _p({startListening:(o,a,u,d)=>{let f=[];const m=i.infoData_.getNode(o._path);return m.isEmpty()||(f=Ho(i.infoSyncTree_,o._path,m),setTimeout(()=>{d("ok")},0)),f},stopListening:()=>{}}),uc(i,"connected",!1),i.serverSyncTree_=new _p({startListening:(o,a,u,d)=>(i.server_.listen(o,u,a,(f,m)=>{const g=d(f,m);ln(i.eventQueue_,o._path,g)}),[]),stopListening:(o,a)=>{i.server_.unlisten(o,a)}})}function WC(i){const r=i.infoData_.getNode(new ge(".info/serverTimeOffset")).val()||0;return new Date().getTime()+r}function ac(i){return EC({timestamp:WC(i)})}function wp(i,t,r,o,a){i.dataUpdateCount++;const u=new ge(t);r=i.interceptServerDataCallback_?i.interceptServerDataCallback_(t,r):r;let d=[];if(a)if(o){const m=wo(r,g=>Ge(g));d=yC(i.serverSyncTree_,u,m,a)}else{const m=Ge(r);d=_C(i.serverSyncTree_,u,m,a)}else if(o){const m=wo(r,g=>Ge(g));d=pC(i.serverSyncTree_,u,m)}else{const m=Ge(r);d=Ho(i.serverSyncTree_,u,m)}let f=u;d.length>0&&(f=Go(i,u)),ln(i.eventQueue_,f,d)}function xp(i,t){uc(i,"connected",t),t===!1&&QC(i)}function HC(i,t){ft(t,(r,o)=>{uc(i,r,o)})}function uc(i,t,r){const o=new ge("/.info/"+t),a=Ge(r);i.infoData_.updateSnapshot(o,a);const u=Ho(i.infoSyncTree_,o,a);ln(i.eventQueue_,o,u)}function cg(i){return i.nextWriteId_++}function $C(i,t,r,o,a){cc(i,"set",{path:t.toString(),value:r,priority:o});const u=ac(i),d=Ge(r,o),f=Xu(i.serverSyncTree_,t),m=tg(d,f,u),g=cg(i),C=Xm(i.serverSyncTree_,t,m,g,!0);lc(i.eventQueue_,C),i.server_.put(t.toString(),d.val(!0),(_,T)=>{const R=_==="ok";R||dt("set at "+t+" failed: "+_);const D=Xn(i.serverSyncTree_,g,!R);ln(i.eventQueue_,t,D),YC(i,a,_,T)});const y=mg(i,t);Go(i,y),ln(i.eventQueue_,y,[])}function QC(i){cc(i,"onDisconnectEvents");const t=ac(i),r=To();yu(i.onDisconnect_,ce(),(a,u)=>{const d=NC(a,u,i.serverSyncTree_,t);Fm(r,a,d)});let o=[];yu(r,ce(),(a,u)=>{o=o.concat(Ho(i.serverSyncTree_,a,u));const d=mg(i,a);Go(i,d)}),i.onDisconnect_=To(),ln(i.eventQueue_,ce(),o)}function GC(i,t,r){let o;ne(t._path)===".info"?o=yp(i.infoSyncTree_,t,r):o=yp(i.serverSyncTree_,t,r),ag(i.eventQueue_,t._path,o)}function KC(i,t,r){let o;ne(t._path)===".info"?o=Su(i.infoSyncTree_,t,r):o=Su(i.serverSyncTree_,t,r),ag(i.eventQueue_,t._path,o)}function qC(i){i.persistentConnection_&&i.persistentConnection_.interrupt(zC)}function cc(i,...t){let r="";i.persistentConnection_&&(r=i.persistentConnection_.id+":"),Ze(r,...t)}function YC(i,t,r,o){t&&Br(()=>{if(r==="ok")t(null);else{const a=(r||"error").toUpperCase();let u=a;o&&(u+=": "+o);const d=new Error(u);d.code=a,t(d)}})}function dg(i,t,r){return Xu(i.serverSyncTree_,t,r)||X.EMPTY_NODE}function dc(i,t=i.transactionQueueTree_){if(t||Ko(i,t),Vr(t)){const r=fg(i,t);j(r.length>0,"Sending zero length transaction queue"),r.every(a=>a.status===0)&&XC(i,ts(t),r)}else rg(t)&&Qo(t,r=>{dc(i,r)})}function XC(i,t,r){const o=r.map(g=>g.currentWriteId),a=dg(i,t,o);let u=a;const d=a.hash();for(let g=0;g<r.length;g++){const C=r[g];j(C.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const y=ut(t,C.path);u=u.updateChild(y,C.currentOutputSnapshotRaw)}const f=u.val(!0),m=t;i.server_.put(m.toString(),f,g=>{cc(i,"transaction put response",{path:m.toString(),status:g});let C=[];if(g==="ok"){const y=[];for(let _=0;_<r.length;_++)r[_].status=2,C=C.concat(Xn(i.serverSyncTree_,r[_].currentWriteId)),r[_].onComplete&&y.push(()=>r[_].onComplete(null,!0,r[_].currentOutputSnapshotResolved)),r[_].unwatcher();Ko(i,sc(i.transactionQueueTree_,t)),dc(i,i.transactionQueueTree_),ln(i.eventQueue_,t,C);for(let _=0;_<y.length;_++)Br(y[_])}else{if(g==="datastale")for(let y=0;y<r.length;y++)r[y].status===3?r[y].status=4:r[y].status=0;else{dt("transaction at "+m.toString()+" failed: "+g);for(let y=0;y<r.length;y++)r[y].status=4,r[y].abortReason=g}Go(i,t)}},d)}function Go(i,t){const r=hg(i,t),o=ts(r),a=fg(i,r);return JC(i,a,o),o}function JC(i,t,r){if(t.length===0)return;const o=[];let a=[];const d=t.filter(f=>f.status===0).map(f=>f.currentWriteId);for(let f=0;f<t.length;f++){const m=t[f],g=ut(r,m.path);let C=!1,y;if(j(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)C=!0,y=m.abortReason,a=a.concat(Xn(i.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=UC)C=!0,y="maxretry",a=a.concat(Xn(i.serverSyncTree_,m.currentWriteId,!0));else{const _=dg(i,m.path,d);m.currentInputSnapshot=_;const T=t[f].update(_.val());if(T!==void 0){oc("transaction failed: Data returned ",T,m.path);let R=Ge(T);typeof T=="object"&&T!=null&&an(T,".priority")||(R=R.updatePriority(_.getPriority()));const P=m.currentWriteId,Q=ac(i),G=tg(R,_,Q);m.currentOutputSnapshotRaw=R,m.currentOutputSnapshotResolved=G,m.currentWriteId=cg(i),d.splice(d.indexOf(P),1),a=a.concat(Xm(i.serverSyncTree_,m.path,G,m.currentWriteId,m.applyLocally)),a=a.concat(Xn(i.serverSyncTree_,P,!0))}else C=!0,y="nodata",a=a.concat(Xn(i.serverSyncTree_,m.currentWriteId,!0))}ln(i.eventQueue_,r,a),a=[],C&&(t[f].status=2,(function(_){setTimeout(_,Math.floor(0))})(t[f].unwatcher),t[f].onComplete&&(y==="nodata"?o.push(()=>t[f].onComplete(null,!1,t[f].currentInputSnapshot)):o.push(()=>t[f].onComplete(new Error(y),!1,null))))}Ko(i,i.transactionQueueTree_);for(let f=0;f<o.length;f++)Br(o[f]);dc(i,i.transactionQueueTree_)}function hg(i,t){let r,o=i.transactionQueueTree_;for(r=ne(t);r!==null&&Vr(o)===void 0;)o=sc(o,r),t=we(t),r=ne(t);return o}function fg(i,t){const r=[];return pg(i,t,r),r.sort((o,a)=>o.order-a.order),r}function pg(i,t,r){const o=Vr(t);if(o)for(let a=0;a<o.length;a++)r.push(o[a]);Qo(t,a=>{pg(i,a,r)})}function Ko(i,t){const r=Vr(t);if(r){let o=0;for(let a=0;a<r.length;a++)r[a].status!==2&&(r[o]=r[a],o++);r.length=o,ng(t,r.length>0?r:void 0)}Qo(t,o=>{Ko(i,o)})}function mg(i,t){const r=ts(hg(i,t)),o=sc(i.transactionQueueTree_,t);return TC(o,a=>{ru(i,a)}),ru(i,o),ig(o,a=>{ru(i,a)}),r}function ru(i,t){const r=Vr(t);if(r){const o=[];let a=[],u=-1;for(let d=0;d<r.length;d++)r[d].status===3||(r[d].status===1?(j(u===d-1,"All SENT items should be at beginning of queue."),u=d,r[d].status=3,r[d].abortReason="set"):(j(r[d].status===0,"Unexpected transaction status in abort"),r[d].unwatcher(),a=a.concat(Xn(i.serverSyncTree_,r[d].currentWriteId,!0)),r[d].onComplete&&o.push(r[d].onComplete.bind(null,new Error("set"),!1,null))));u===-1?ng(t,void 0):r.length=u+1,ln(i.eventQueue_,ts(t),a);for(let d=0;d<o.length;d++)Br(o[d])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(i){let t="";const r=i.split("/");for(let o=0;o<r.length;o++)if(r[o].length>0){let a=r[o];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}t+="/"+a}return t}function eE(i){const t={};i.charAt(0)==="?"&&(i=i.substring(1));for(const r of i.split("&")){if(r.length===0)continue;const o=r.split("=");o.length===2?t[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):dt(`Invalid query segment '${r}' in query '${i}'`)}return t}const Cp=function(i,t){const r=tE(i),o=r.namespace;r.domain==="firebase.com"&&on(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||o==="undefined")&&r.domain!=="localhost"&&on("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||hw();const a=r.scheme==="ws"||r.scheme==="wss";return{repoInfo:new ym(r.host,r.secure,o,a,t,"",o!==r.subdomain),path:new ge(r.pathString)}},tE=function(i){let t="",r="",o="",a="",u="",d=!0,f="https",m=443;if(typeof i=="string"){let g=i.indexOf("//");g>=0&&(f=i.substring(0,g-1),i=i.substring(g+2));let C=i.indexOf("/");C===-1&&(C=i.length);let y=i.indexOf("?");y===-1&&(y=i.length),t=i.substring(0,Math.min(C,y)),C<y&&(a=ZC(i.substring(C,y)));const _=eE(i.substring(Math.min(i.length,y)));g=t.indexOf(":"),g>=0?(d=f==="https"||f==="wss",m=parseInt(t.substring(g+1),10)):g=t.length;const T=t.slice(0,g);if(T.toLowerCase()==="localhost")r="localhost";else if(T.split(".").length<=2)r=T;else{const R=t.indexOf(".");o=t.substring(0,R).toLowerCase(),r=t.substring(R+1),u=o}"ns"in _&&(u=_.ns)}return{host:t,port:m,domain:r,subdomain:o,secure:d,scheme:f,pathString:a,namespace:u}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(t,r,o,a){this.eventType=t,this.eventRegistration=r,this.snapshot=o,this.prevName=a}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+We(this.snapshot.exportVal())}}class rE{constructor(t,r,o){this.eventRegistration=t,this.error=r,this.path=o}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(t,r){this.snapshotCallback=t,this.cancelCallback=r}onValue(t,r){this.snapshotCallback.call(null,t,r)}onCancel(t){return j(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(t,r,o,a){this._repo=t,this._path=r,this._queryParams=o,this._orderByCalled=a}get key(){return se(this._path)?null:Im(this._path)}get ref(){return new bn(this._repo,this._path)}get _queryIdentifier(){const t=op(this._queryParams),r=Ou(t);return r==="{}"?"default":r}get _queryObject(){return op(this._queryParams)}isEqual(t){if(t=Yi(t),!(t instanceof hc))return!1;const r=this._repo===t._repo,o=zu(this._path,t._path),a=this._queryIdentifier===t._queryIdentifier;return r&&o&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+qw(this._path)}}class bn extends hc{constructor(t,r){super(t,r,new Wu,!1)}get parent(){const t=Rm(this._path);return t===null?null:new bn(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class Lo{constructor(t,r,o){this._node=t,this.ref=r,this._index=o}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const r=new ge(t),o=Nu(this.ref,t);return new Lo(this._node.getChild(r),o,De)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(o,a)=>t(new Lo(a,Nu(this.ref,o),De)))}hasChild(t){const r=new ge(t);return!this._node.getChild(r).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function gg(i,t){return i=Yi(i),i._checkNotDeleted("ref"),t!==void 0?Nu(i._root,t):i._root}function Nu(i,t){return i=Yi(i),ne(i._path)===null?bC("child","path",t):lg("child","path",t),new bn(i._repo,Fe(i._path,t))}function sE(i,t){i=Yi(i),OC("set",i._path),AC("set",t,i._path);const r=new zo;return $C(i._repo,i._path,t,null,r.wrapCallback(()=>{})),r.promise}class fc{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,r){const o=r._queryParams.getIndex();return new nE("value",this,new Lo(t.snapshotNode,new bn(r._repo,r._path),o))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,r){return this.callbackContext.hasCancelCallback?new rE(this,t,r):null}matches(t){return t instanceof fc?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function oE(i,t,r,o,a){const u=new iE(r,void 0),d=new fc(u);return GC(i._repo,i,d),()=>KC(i._repo,i,d)}function lE(i,t,r,o){return oE(i,"value",t)}sC(bn);dC(bn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="FIREBASE_DATABASE_EMULATOR_HOST",Iu={};let uE=!1;function cE(i,t,r,o){const a=t.lastIndexOf(":"),u=t.substring(0,a),d=Mu(u);i.repoInfo_=new ym(t,d,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0,r),o&&(i.authTokenProvider_=o)}function dE(i,t,r,o,a){let u=o||i.options.databaseURL;u===void 0&&(i.options.projectId||on("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ze("Using default host for project ",i.options.projectId),u=`${i.options.projectId}-default-rtdb.firebaseio.com`);let d=Cp(u,a),f=d.repoInfo,m;typeof process<"u"&&Vf&&(m=Vf[aE]),m?(u=`http://${m}?ns=${f.namespace}`,d=Cp(u,a),f=d.repoInfo):d.repoInfo.secure;const g=new Ew(i.name,i.options,t);LC("Invalid Firebase Database URL",d),se(d.path)||on("Database URL must point to the root of a Firebase Database (not including a child path).");const C=fE(f,i,g,new Cw(i,r));return new pE(C,i)}function hE(i,t){const r=Iu[t];(!r||r[i.key]!==i)&&on(`Database ${t}(${i.repoInfo_}) has already been deleted.`),qC(i),delete r[i.key]}function fE(i,t,r,o){let a=Iu[t.name];a||(a={},Iu[t.name]=a);let u=a[i.toURLString()];return u&&on("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new BC(i,uE,r,o),a[i.toURLString()]=u,u}class pE{constructor(t,r){this._repoInternal=t,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(VC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new bn(this._repo,ce())),this._rootInternal}_delete(){return this._rootInternal!==null&&(hE(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&on("Cannot call "+t+" on a deleted database.")}}function mE(i=q1(),t){const r=H1(i,"database").getImmediate({identifier:t});if(!r._instanceStarted){const o=Rv("database");o&&gE(r,...o)}return r}function gE(i,t,r,o={}){i=Yi(i),i._checkNotDeleted("useEmulator");const a=`${t}:${r}`,u=i._repoInternal;if(i._instanceStarted){if(a===i._repoInternal.repoInfo_.host&&xo(o,u.repoInfo_.emulatorOptions))return;on("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let d;if(u.repoInfo_.nodeAdmin)o.mockUserToken&&on('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),d=new go(go.OWNER);else if(o.mockUserToken){const f=typeof o.mockUserToken=="string"?o.mockUserToken:Dv(o.mockUserToken,i.app.options.projectId);d=new go(f)}Mu(t)&&(Pv(t),bv("Database",!0)),cE(u,a,o,d)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(i){ow(K1),Eo(new Ui("database",(t,{instanceIdentifier:r})=>{const o=t.getProvider("app").getImmediate(),a=t.getProvider("auth-internal"),u=t.getProvider("app-check-internal");return dE(o,a,u,r)},"PUBLIC").setMultipleInstances(!0)),Dr(Wf,Hf,i),Dr(Wf,Hf,"esm2020")}rn.prototype.simpleListen=function(i,t){this.sendRequest("q",{p:i},t)};rn.prototype.echo=function(i,t){this.sendRequest("echo",{d:i},t)};_E();var yE="firebase",vE="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dr(yE,vE,"app");const wE={apiKey:"AIzaSyBg81E3YQ2Do2gASMg8WRMBiuUHO7GtSAo",authDomain:"streamlink-pro.firebaseapp.com",databaseURL:"https://streamlink-pro-default-rtdb.europe-west1.firebasedatabase.app",projectId:"streamlink-pro",storageBucket:"streamlink-pro.firebasestorage.app",messagingSenderId:"24197361551",appId:"1:24197361551:web:cb11475b053efe4f3b65fa",measurementId:"G-VBG329NSYF"},xE=em(wE),_g=mE(xE),CE=({featuredMessage:i})=>{const[t,r]=F.useState(i),[o,a]=F.useState(!1),[u,d]=F.useState(!1),[f,m]=F.useState({duration:0,featuredAt:null}),g=F.useRef(null),C=(R,D,P)=>{r(R),m({duration:D,featuredAt:P}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{a(!0)})})},y=(R,D,P)=>{(R==null?void 0:R.id)===(t==null?void 0:t.id)&&o||(R?o?(a(!1),g.current&&window.clearTimeout(g.current),g.current=window.setTimeout(()=>{C(R,D,P)},800)):C(R,D,P):(a(!1),g.current&&window.clearTimeout(g.current),g.current=window.setTimeout(()=>{r(null)},800)))};if(F.useEffect(()=>{const R=gg(_g,"currentComment"),D=lE(R,P=>{const Q=P.val();d(!0);const G=Q&&Q.type==="SET_FEATURED"&&Q.payload?{...Q.payload,timestamp:new Date(Q.payload.timestamp)}:null,ee=Q!=null&&Q.autoDismissEnabled?Q.autoDismissSeconds:0,he=(Q==null?void 0:Q.featuredAt)||null;y(G,ee,he)});return()=>{D(),g.current&&window.clearTimeout(g.current)}},[t==null?void 0:t.id,o]),!t&&!o)return null;const _=(t==null?void 0:t.platform)==="twitch",T=_?"#9146FF":"#FF0000";return v.jsx("div",{className:"w-full h-full flex items-end justify-start p-16 pointer-events-none overflow-hidden",children:v.jsx("div",{className:`w-full transition-all duration-700 ease-[cubic-bezier(0.16,1,0.3,1)] transform origin-left ${o&&t?"translate-x-0 opacity-100 scale-100 blur-0":"-translate-x-20 opacity-0 scale-95 blur-md"}`,children:v.jsxs("div",{className:"relative group flex items-stretch bg-slate-950/90 border border-white/10 rounded-[2rem] shadow-[0_64px_128px_-32px_rgba(0,0,0,0.8)] overflow-hidden w-full",children:[v.jsx("div",{className:"w-3 shrink-0 transition-colors duration-500",style:{backgroundColor:T}}),v.jsxs("div",{className:"flex flex-col p-8 space-y-4 flex-1 min-w-0",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:"flex items-center justify-center p-2 rounded-xl border border-white/10 bg-white/5 shadow-inner",children:_?v.jsx(Up,{size:20,className:"text-[#bf94ff] fill-current"}):v.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",children:[v.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814z",fill:"#FF0000"}),v.jsx("path",{d:"M9.545 15.568V8.432L15.818 12l-6.273 3.568z",fill:"white"})]})}),v.jsx("div",{className:"flex flex-col min-w-0",children:v.jsx("span",{className:"text-2xl font-bold tracking-tight uppercase obs-text-shadow leading-none truncate",style:{color:(t==null?void 0:t.authorColor)||"white"},children:t==null?void 0:t.author})})]}),v.jsx("div",{className:"relative pl-1",children:v.jsx("p",{className:"text-4xl font-semibold leading-snug text-white obs-text-shadow tracking-tight break-words",children:t==null?void 0:t.text})}),!u&&v.jsx("div",{className:"absolute top-4 right-8 text-[10px] text-white/20 font-mono italic animate-pulse uppercase tracking-[0.2em]",children:"Reconnecting..."})]}),v.jsx("div",{className:"shrink-0 p-8 flex items-center bg-white/[0.03] border-l border-white/5",children:v.jsx("img",{src:t==null?void 0:t.avatarUrl,alt:t==null?void 0:t.author,className:"w-32 h-32 rounded-[2rem] border-2 border-white/10 shadow-2xl object-cover ring-8 ring-black/40"})})]})})})},EE=({settings:i,currentQuota:t,onTriggerTest:r,onSave:o,onClose:a})=>{const[u,d]=F.useState(i),[f,m]=F.useState(t),[g,C]=F.useState("stream"),y=[{id:"stream",label:"Stream",icon:v.jsx(Zy,{size:16})},{id:"interaction",label:"Interactions",icon:v.jsx(If,{size:16})},{id:"dev",label:"Developer",icon:v.jsx(vy,{size:16})}];return v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-md animate-in fade-in duration-200",children:v.jsxs("div",{className:"bg-slate-900 border border-slate-800 w-full max-w-xl rounded-3xl shadow-2xl overflow-hidden animate-in zoom-in duration-200 flex flex-col max-h-[90vh]",children:[v.jsxs("header",{className:"p-6 border-b border-slate-800 flex justify-between items-center bg-slate-950/50",children:[v.jsxs("h2",{className:"text-xl font-black text-white flex items-center gap-3 tracking-tight",children:[v.jsx("div",{className:"p-2 bg-indigo-600 rounded-lg",children:v.jsx(jp,{size:20,className:"text-white"})}),"DASHBOARD SETTINGS"]}),v.jsx("button",{onClick:a,className:"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-full transition-all",children:v.jsx(hv,{size:24})})]}),v.jsx("nav",{className:"flex px-6 bg-slate-950/30 border-b border-slate-800/50",children:y.map(_=>v.jsxs("button",{onClick:()=>C(_.id),className:`flex items-center gap-2 px-4 py-4 text-xs font-black uppercase tracking-widest transition-all border-b-2 ${g===_.id?"text-indigo-400 border-indigo-500 bg-indigo-500/5":"text-slate-500 border-transparent hover:text-slate-300 hover:bg-white/5"}`,children:[_.icon,_.label]},_.id))}),v.jsxs("div",{className:"flex-1 p-8 space-y-6 custom-scrollbar overflow-y-auto bg-slate-900",children:[g==="stream"&&v.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"flex items-center gap-2 text-purple-400 font-black text-xs uppercase tracking-widest",children:[v.jsx(Up,{size:16})," Twitch Feed"]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider ml-1",children:"Channel Identifier"}),v.jsx("input",{type:"text",placeholder:"e.g. shroud",className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-4 text-white placeholder:text-slate-700 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all font-medium",value:u.twitchChannel,onChange:_=>d({...u,twitchChannel:_.target.value})})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider ml-1",children:"Access Token (Optional - For Viewer Count)"}),v.jsx("input",{type:"password",placeholder:"oauth:...",className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-4 text-white placeholder:text-slate-700 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all font-medium",value:u.twitchAccessToken||"",onChange:_=>d({...u,twitchAccessToken:_.target.value})})]})]}),v.jsx("div",{className:"h-px bg-slate-800/50"}),v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"flex items-center gap-2 text-red-500 font-black text-xs uppercase tracking-widest",children:[v.jsx(Bp,{size:16})," YouTube Feed"]}),v.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsxs("label",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider ml-1 flex items-center gap-1.5",children:["Stream Video ID or Link",v.jsx("span",{title:"Paste the full URL of your live stream or just the 11-character ID.",children:v.jsx(Fp,{size:12,className:"text-slate-600"})})]}),v.jsx("input",{type:"text",placeholder:"e.g. dQw4w9WgXcQ",className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-4 text-white placeholder:text-slate-700 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all font-medium",value:u.youtubeVideoId,onChange:_=>d({...u,youtubeVideoId:_.target.value})})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsxs("label",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider ml-1 flex justify-between",children:["Google Data API Key",v.jsx("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",className:"text-indigo-400 hover:text-indigo-300 transition-colors",children:"Google Cloud Console"})]}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{type:"password",placeholder:"AIza...",className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-4 pl-12 text-white focus:outline-none focus:border-indigo-500 transition-all font-mono text-sm",value:u.youtubeApiKey,onChange:_=>d({...u,youtubeApiKey:_.target.value})}),v.jsx(jy,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-600"})]})]})]})]})]}),g==="interaction"&&v.jsx("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"flex items-center gap-2 text-indigo-400 font-black text-xs uppercase tracking-widest",children:[v.jsx(If,{size:16})," Auto-Dismiss Features"]}),v.jsxs("div",{className:"bg-slate-950/60 border border-slate-800/80 rounded-2xl p-6 space-y-6 shadow-inner",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex flex-col gap-1",children:[v.jsx("span",{className:"text-sm text-slate-200 font-black tracking-tight",children:"Enable Timer"}),v.jsx("p",{className:"text-[11px] text-slate-500 leading-relaxed max-w-[280px]",children:"Automatically dismisses featured comments after the specified duration."})]}),v.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[v.jsx("input",{type:"checkbox",className:"sr-only peer",checked:u.autoDismissEnabled,onChange:_=>d({...u,autoDismissEnabled:_.target.checked})}),v.jsx("div",{className:"w-12 h-7 bg-slate-800 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[4px] after:start-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600 shadow-lg"})]})]}),u.autoDismissEnabled&&v.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-800/50 animate-in slide-in-from-top-4 duration-300",children:[v.jsxs("div",{className:"flex justify-between items-end",children:[v.jsx("label",{className:"text-[10px] text-slate-400 font-black uppercase tracking-[0.1em]",children:"Visibility Duration"}),v.jsxs("span",{className:"text-lg font-mono font-black text-indigo-400",children:[u.autoDismissSeconds,v.jsx("span",{className:"text-xs ml-0.5 text-slate-600",children:"s"})]})]}),v.jsx("input",{type:"range",min:"3",max:"60",step:"1",className:"w-full h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-indigo-500",value:u.autoDismissSeconds,onChange:_=>d({...u,autoDismissSeconds:parseInt(_.target.value,10)})}),v.jsxs("div",{className:"flex justify-between text-[9px] font-bold text-slate-600 uppercase tracking-widest px-1",children:[v.jsx("span",{children:"3s"}),v.jsx("span",{children:"30s"}),v.jsx("span",{children:"60s"})]})]})]})]})}),g==="dev"&&v.jsx("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"flex items-center gap-2 text-slate-500 font-black text-xs uppercase tracking-widest",children:[v.jsx(ov,{size:16})," Debug & Maintenance"]}),v.jsxs("div",{className:"bg-slate-950/60 border border-slate-800/80 rounded-2xl p-6 space-y-6",children:[v.jsxs("div",{className:"flex items-center justify-between gap-6",children:[v.jsxs("div",{className:"flex flex-col gap-1",children:[v.jsx("span",{className:"text-sm text-slate-200 font-black tracking-tight",children:"Chat Simulation"}),v.jsx("p",{className:"text-[11px] text-slate-500 leading-relaxed",children:"Push test messages into the live feed."})]}),v.jsx("button",{onClick:r,className:"shrink-0 px-5 py-2.5 bg-slate-800 hover:bg-slate-700 text-slate-300 text-[10px] font-black uppercase tracking-widest rounded-xl border border-slate-700 transition-all active:scale-95 shadow-md",children:"GENERATE FEED"})]}),v.jsx("div",{className:"h-px bg-slate-800/50"})]})]})})]}),v.jsxs("footer",{className:"p-8 bg-slate-950 border-t border-slate-800 flex items-center justify-between",children:[v.jsx("div",{className:"text-[10px] text-slate-600 font-bold uppercase tracking-widest",children:"StreamLink Pro v1.1.0"}),v.jsxs("div",{className:"flex gap-4",children:[v.jsx("button",{onClick:a,className:"px-6 py-2.5 text-slate-400 hover:text-white font-black text-xs uppercase tracking-widest transition-colors",children:"Cancel"}),v.jsxs("button",{onClick:()=>o(u,f),className:"flex items-center gap-2 px-8 py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-black text-xs uppercase tracking-widest shadow-xl shadow-indigo-600/20 transition-all active:scale-95",children:[v.jsx(tv,{size:18})," Save"]})]})]})]})})},iu={twitchChannel:"",twitchClientId:"2w9xgdh6fg818iilelzhk4z65pcwj2",twitchAccessToken:"sxajnrbl92gof40as5768vylltzu1t",youtubeVideoId:"",youtubeApiKey:"",showAvatars:!0,fontSize:14,autoDismissEnabled:!1,autoDismissSeconds:15},SE=()=>new Date().toLocaleDateString("en-US",{timeZone:"America/Los_Angeles"}),kE=()=>{const[i,t]=F.useState(()=>{try{const u=localStorage.getItem("streamlink_settings"),d=u?JSON.parse(u):iu;return{...iu,...d,youtubeVideoId:""}}catch{return iu}}),[r,o]=F.useState(()=>{try{const u=localStorage.getItem("youtube_quota_usage"),d=localStorage.getItem("youtube_quota_last_reset"),f=SE();return d!==f?(localStorage.setItem("youtube_quota_last_reset",f),localStorage.setItem("youtube_quota_usage","0"),0):u?parseInt(u,10):0}catch{return 0}});F.useEffect(()=>{const{youtubeVideoId:u,...d}=i;localStorage.setItem("streamlink_settings",JSON.stringify(d))},[i]),F.useEffect(()=>{localStorage.setItem("youtube_quota_usage",r.toString())},[r]);const a=F.useCallback(u=>{o(d=>d+u)},[]);return{settings:i,setSettings:t,quotaUsage:r,setQuotaUsage:o,incrementQuota:a}},su=new BroadcastChannel("streamlink_sync"),NE=i=>{const[t,r]=F.useState({messages:[],featuredMessage:null,stats:{twitch:{viewers:0,status:"offline",title:"Not connected"},youtube:{viewers:0,status:"offline",title:"Not connected"}},settings:{...i,twitchChannel:"",youtubeVideoId:"",youtubeApiKey:"",showAvatars:!0,fontSize:14},quotaUsage:0}),o=F.useCallback(y=>{const _=y?Date.now():null,T={type:y?"SET_FEATURED":"CLEAR_FEATURED",payload:y?{...y,featuredAt:_}:null,timestamp:Date.now(),autoDismissEnabled:i.autoDismissEnabled,autoDismissSeconds:i.autoDismissSeconds,featuredAt:_};sE(gg(_g,"currentComment"),{...T,payload:y?{...y,featuredAt:_,timestamp:y.timestamp.toISOString()}:null}),su.postMessage(T),localStorage.setItem("streamlink_sync_event",JSON.stringify(T))},[i.autoDismissEnabled,i.autoDismissSeconds]),a=F.useCallback(y=>{r(_=>_.messages.some(T=>T.id===y.id)?_:{..._,messages:[y,..._.messages].slice(0,200)})},[]),u=F.useCallback(y=>{r(_=>{var R;const T=((R=_.featuredMessage)==null?void 0:R.id)===y;return T&&o(null),{..._,featuredMessage:T?null:_.featuredMessage,messages:_.messages.map(D=>D.id===y?{...D,isRead:!0,isFeatured:!1,isTrashed:!1,featuredAt:void 0}:D)}})},[o]),d=F.useCallback(()=>{o(null),r(y=>({...y,featuredMessage:null,messages:y.messages.map(_=>({..._,isFeatured:!1,featuredAt:void 0}))}))},[o]),f=F.useCallback(y=>{r(_=>{var Q;const T=_.messages.find(G=>G.id===y)||null,R=(Q=_.featuredMessage)==null?void 0:Q.id,D=Date.now(),P=T?{...T,isFeatured:!0,featuredAt:D}:null;return o(P),{..._,featuredMessage:P,messages:_.messages.map(G=>G.id===y?{...G,isFeatured:!0,isRead:!1,isTrashed:!1,featuredAt:D}:R&&G.id===R&&G.id!==y?{...G,isFeatured:!1,isRead:!0,isTrashed:!1,featuredAt:void 0}:{...G,isFeatured:!1,featuredAt:void 0})}})},[o]),m=F.useCallback(y=>{r(_=>{var R;const T=((R=_.featuredMessage)==null?void 0:R.id)===y;return T&&o(null),{..._,featuredMessage:T?null:_.featuredMessage,messages:_.messages.map(D=>D.id===y?{...D,isRead:!0,isTrashed:!0,isFeatured:!1,featuredAt:void 0}:D)}})},[o]),g=F.useCallback(y=>{r(_=>({..._,messages:_.messages.map(T=>T.id===y?{...T,isInteresting:!T.isInteresting}:T)}))},[]),C=F.useCallback((y,_)=>{r(T=>({...T,stats:{...T.stats,[y]:{...T.stats[y],..._}}}))},[]);return F.useEffect(()=>{const y=_=>{_.data.type==="SET_FEATURED"?r(T=>({...T,featuredMessage:_.data.payload,messages:T.messages.map(R=>{var D,P,Q;return{...R,isFeatured:R.id===((D=_.data.payload)==null?void 0:D.id),featuredAt:R.id===((P=_.data.payload)==null?void 0:P.id)?(Q=_.data.payload)==null?void 0:Q.featuredAt:R.featuredAt}})})):_.data.type==="CLEAR_FEATURED"&&r(T=>({...T,featuredMessage:null,messages:T.messages.map(R=>{var D;return((D=T.featuredMessage)==null?void 0:D.id)===R.id?{...R,isFeatured:!1,isRead:!0,featuredAt:void 0}:{...R,isFeatured:!1,featuredAt:void 0}})}))};return su.addEventListener("message",y),()=>su.removeEventListener("message",y)},[]),{state:t,setState:r,addMessage:a,markAsRead:u,clearFeatured:d,featureMessage:f,markAsTrashed:m,toggleInteresting:g,updateStats:C,broadcastFeatured:o}};class IE{constructor(t,r,o,a,u,d){this.socket=null,this.statsTimer=null,this.reconnectAttempts=0,this.reconnectTimer=null,this.maxReconnectAttempts=10,this.isDisconnecting=!1,this.channel=t.toLowerCase(),this.onMessage=r,this.onStatsUpdate=o,this.accessToken=a,this.clientId=u,this.onStatusChange=d}connect(){this.isDisconnecting=!1,this.clearTimers(),this.onStatusChange&&this.onStatusChange("connecting");try{this.socket=new WebSocket("wss://irc-ws.chat.twitch.tv:443"),this.socket.onopen=()=>{var t,r,o,a;this.reconnectAttempts=0,(t=this.socket)==null||t.send("PASS SCHRODINGER"),(r=this.socket)==null||r.send("NICK justinfan"+Math.floor(Math.random()*1e4)),(o=this.socket)==null||o.send("CAP REQ :twitch.tv/tags twitch.tv/commands"),(a=this.socket)==null||a.send(`JOIN #${this.channel}`),this.onStatusChange&&this.onStatusChange("online"),this.accessToken&&this.clientId&&this.pollStats()},this.socket.onmessage=t=>{var o;const r=t.data;if(r.startsWith("PING")){(o=this.socket)==null||o.send("PONG :tmi.twitch.tv");return}if(r.includes("PRIVMSG")){const a=this.parseTwitchMessage(r);a&&this.onMessage(a)}},this.socket.onerror=t=>{this.onStatusChange&&this.onStatusChange("error","Connection failed. Retrying..."),this.handleReconnect()},this.socket.onclose=()=>{this.isDisconnecting||this.handleReconnect()}}catch(t){this.onStatusChange&&this.onStatusChange("error",t.message),this.handleReconnect()}}handleReconnect(){if(this.isDisconnecting||this.reconnectAttempts>=this.maxReconnectAttempts){this.reconnectAttempts>=this.maxReconnectAttempts&&this.onStatusChange&&this.onStatusChange("error","Cound not connect after multiple attempts.");return}this.reconnectAttempts++;const t=Math.min(3e4,Math.pow(2,this.reconnectAttempts)*1e3);this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(()=>{this.connect()},t)}clearTimers(){this.statsTimer&&clearTimeout(this.statsTimer),this.reconnectTimer&&clearTimeout(this.reconnectTimer)}async pollStats(){if(!(!this.accessToken||!this.clientId))try{const t=await fetch(`https://api.twitch.tv/helix/streams?user_login=${this.channel}&t=${Date.now()}`,{cache:"no-store",headers:{"Client-ID":this.clientId,Authorization:`Bearer ${this.accessToken}`}});if(!t.ok)return;const r=await t.json();if(r.data&&r.data.length>0){const o=r.data[0].viewer_count;this.onStatsUpdate&&this.onStatsUpdate({viewers:o})}else this.onStatsUpdate&&this.onStatsUpdate({viewers:0});this.statsTimer=setTimeout(()=>this.pollStats(),1e4)}catch{this.statsTimer=setTimeout(()=>this.pollStats(),1e4)}}disconnect(){this.isDisconnecting=!0,this.clearTimers(),this.socket&&((this.socket.readyState===WebSocket.OPEN||this.socket.readyState===WebSocket.CONNECTING)&&this.socket.close(),this.socket=null)}parseTwitchMessage(t){try{const r=t.split(" "),o=r[0].startsWith("@")?r[0].slice(1):"",a={};o.split(";").forEach(C=>{const[y,_]=C.split("=");a[y]=_});const u=t.match(/:(\w+)!/),d=a["display-name"]||(u?u[1]:"Unknown"),f=t.match(/PRIVMSG #[^ ]+ :(.+)/),m=f?f[1].trim():"";if(!m)return null;const g=a["first-msg"]==="1";return{id:a.id||Math.random().toString(36).substr(2,9),author:d,text:m,platform:"twitch",timestamp:new Date,isRead:!1,isFeatured:!1,isFirstMessage:g,avatarUrl:`https://api.dicebear.com/7.x/identicon/svg?seed=${d}`,authorColor:a.color||"#9146FF"}}catch{return null}}}class TE{constructor(t,r,o,a,u,d){this.liveChatId=null,this.nextPollToken=null,this.pollInterval=1e4,this.timer=null,this.statsTimer=null,this.isPaused=!1,this.isQuotaExceeded=!1,this.handleVisibilityChange=()=>{document.visibilityState==="hidden"?(this.isPaused=!0,this.timer&&clearTimeout(this.timer),this.statsTimer&&clearTimeout(this.statsTimer)):(this.isPaused=!1,this.liveChatId&&!this.isQuotaExceeded&&(this.poll(),this.pollStats()))},this.apiKey=t,this.videoId=this.extractVideoId(r),this.onMessage=o,this.onStatusChange=a,this.onQuotaUpdate=u,this.onStatsUpdate=d,document.addEventListener("visibilitychange",this.handleVisibilityChange)}extractVideoId(t){if(!t)return"";const r=t.trim();try{if(r.includes("studio.youtube.com/video/")){const o=r.match(/\/video\/([^\/]+)/);if(o)return o[1]}if(r.includes("youtube.com")||r.includes("youtu.be")){const o=new URL(r.startsWith("http")?r:`https://${r}`);return r.includes("youtu.be")?o.pathname.slice(1):o.searchParams.get("v")||r}}catch{}return r}async connect(){var t;if(this.isQuotaExceeded=!1,!this.apiKey||!this.videoId){this.onStatusChange("error","Missing API Key or Video ID");return}try{const r=await fetch(`https://www.googleapis.com/youtube/v3/videos?id=${this.videoId}&part=liveStreamingDetails,snippet&key=${this.apiKey}`);this.onQuotaUpdate(1);const o=await r.json();if(o.error)throw o.error.code===403?(this.isQuotaExceeded=!0,new Error("API Quota Exceeded")):new Error(o.error.message||"YouTube API Error");if(!o.items||o.items.length===0)throw new Error("Video not found. Check your Video ID.");const a=o.items[0];if(this.liveChatId=(t=a.liveStreamingDetails)==null?void 0:t.activeLiveChatId,!this.liveChatId)throw new Error("No active live chat found.");this.onStatusChange("online"),this.startPolling()}catch(r){this.onStatusChange("error",r.message)}}startPolling(){this.poll(),this.pollStats()}async pollStats(){if(!(this.isPaused||this.isQuotaExceeded))try{const t=await fetch(`https://www.googleapis.com/youtube/v3/videos?id=${this.videoId}&part=liveStreamingDetails&key=${this.apiKey}`);this.onQuotaUpdate(1);const r=await t.json();if(r.items&&r.items.length>0){const o=r.items[0].liveStreamingDetails,a=parseInt((o==null?void 0:o.concurrentViewers)||"0",10);this.onStatsUpdate&&this.onStatsUpdate({viewers:a})}this.statsTimer=setTimeout(()=>this.pollStats(),6e4)}catch(t){console.error("[YouTube Stats] Error polling:",t),this.statsTimer=setTimeout(()=>this.pollStats(),6e4)}}async poll(){if(!(!this.liveChatId||this.isPaused||this.isQuotaExceeded))try{const t=new URL("https://www.googleapis.com/youtube/v3/liveChat/messages");t.searchParams.append("liveChatId",this.liveChatId),t.searchParams.append("part","snippet,authorDetails"),t.searchParams.append("key",this.apiKey),this.nextPollToken&&t.searchParams.append("pageToken",this.nextPollToken);const r=await fetch(t.toString());this.onQuotaUpdate(1);const o=await r.json();if(o.error){if(o.error.code===403){this.isQuotaExceeded=!0,this.onStatusChange("error","API Quota Exceeded");return}throw new Error(o.error.message)}this.nextPollToken=o.nextPageToken,this.pollInterval=Math.max(o.pollingIntervalMillis||1e4,1e4),o.items&&o.items.forEach(a=>{const u={id:a.id,author:a.authorDetails.displayName,text:a.snippet.displayMessage,platform:"youtube",timestamp:new Date(a.snippet.publishedAt),isRead:!1,isFeatured:!1,avatarUrl:a.authorDetails.profileImageUrl,authorColor:"#FF0000"};this.onMessage(u)}),this.isPaused||(this.timer=setTimeout(()=>this.poll(),this.pollInterval))}catch(t){this.onStatusChange("error",t.message),this.timer=setTimeout(()=>this.poll(),2e4)}}disconnect(){this.timer&&clearTimeout(this.timer),this.statsTimer&&clearTimeout(this.statsTimer),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}}const RE=({settings:i,addMessage:t,updateStats:r,incrementQuota:o})=>{const a=F.useRef(null),u=F.useRef(null);return F.useEffect(()=>{var d,f;return(d=a.current)==null||d.disconnect(),(f=u.current)==null||f.disconnect(),r("twitch",i.twitchChannel?{status:"connecting"}:{viewers:0,status:"offline",title:"Not connected"}),r("youtube",i.youtubeApiKey&&i.youtubeVideoId?{status:"connecting"}:{viewers:0,status:"offline",title:"Not connected"}),i.twitchChannel&&(a.current=new IE(i.twitchChannel,m=>{t(m)},m=>r("twitch",m),i.twitchAccessToken,i.twitchClientId,(m,g)=>{r("twitch",{status:m,errorMessage:g})}),a.current.connect()),i.youtubeApiKey&&i.youtubeVideoId&&(u.current=new TE(i.youtubeApiKey,i.youtubeVideoId,m=>t(m),(m,g)=>{r("youtube",{status:m,errorMessage:g})},o,m=>r("youtube",m)),u.current.connect()),()=>{var m,g;(m=a.current)==null||m.disconnect(),(g=u.current)==null||g.disconnect()}},[i.twitchChannel,i.youtubeApiKey,i.youtubeVideoId,t,r,o,i.twitchAccessToken,i.twitchClientId]),{twitchClient:a,youtubeClient:u}},PE=()=>{const i=Ap(),{settings:t,setSettings:r,quotaUsage:o,setQuotaUsage:a,incrementQuota:u}=kE(),{state:d,addMessage:f,markAsRead:m,clearFeatured:g,featureMessage:C,markAsTrashed:y,toggleInteresting:_,updateStats:T,broadcastFeatured:R}=NE(t);RE({settings:t,addMessage:f,updateStats:T,incrementQuota:u});const[D,P]=F.useState(!1),[Q,G]=F.useState(!1),ee=F.useRef(null);F.useEffect(()=>{const me=Se=>{Se.key==="Escape"&&d.featuredMessage&&m(d.featuredMessage.id)};return window.addEventListener("keydown",me),()=>window.removeEventListener("keydown",me)},[d.featuredMessage,m]),F.useEffect(()=>(ee.current&&window.clearTimeout(ee.current),d.featuredMessage&&t.autoDismissEnabled&&(ee.current=window.setTimeout(()=>{d.featuredMessage&&m(d.featuredMessage.id)},t.autoDismissSeconds*1e3)),()=>{ee.current&&window.clearTimeout(ee.current)}),[d.featuredMessage,t.autoDismissEnabled,t.autoDismissSeconds,m]),F.useEffect(()=>{i.pathname==="/"&&R(null)},[i.pathname,R]),F.useEffect(()=>{t.youtubeApiKey&&!t.youtubeVideoId&&i.pathname==="/"&&G(!0)},[t.youtubeApiKey,t.youtubeVideoId,i.pathname]);const he=F.useCallback(()=>{const me=["CyberPunk_2077","StreamGod","PixelViper","GlitchMaster","NebulaKnight","EchoAlpha"],Se=["Can you show that camera setting again? Looks sick!","Hype in the chat! Let's goooo ","Which GPU are you using for this stream?","Just joined, what did I miss?","Is that a custom keyboard? Sounds really thocky.","LUL that was a close one, almost died there!"];for(let Ke=0;Ke<5;Ke++)setTimeout(()=>{const Tt=Math.random()>.5?"twitch":"youtube",wt=me[Math.floor(Math.random()*me.length)],Gt=Se[Math.floor(Math.random()*Se.length)],xt={id:Math.random().toString(36).substring(7),author:wt,text:Gt,platform:Tt,timestamp:new Date,isRead:!1,isFeatured:!1,avatarUrl:`https://api.dicebear.com/7.x/identicon/svg?seed=${wt}`,authorColor:Tt==="twitch"?"#bf94ff":"#ff4d4d",isFirstMessage:Math.random()>.8};f(xt)},Ke*400)},[f]),He={...d,settings:t,quotaUsage:o};return v.jsxs("div",{className:`h-screen w-full flex flex-col overflow-hidden ${i.pathname.includes("overlay")?"bg-transparent":"bg-slate-950"}`,children:[v.jsxs(uy,{children:[v.jsx(lu,{path:"/",element:v.jsx(yv,{state:He,onFeature:C,onMarkRead:m,onMarkTrash:y,onToggleInteresting:_,onClearFeatured:g,onOpenSettings:()=>P(!0)})}),v.jsx(lu,{path:"/overlay",element:v.jsx(CE,{featuredMessage:d.featuredMessage})})]}),Q&&v.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-950/80 backdrop-blur-md animate-in fade-in duration-300",children:v.jsxs("div",{className:"bg-slate-900 border border-slate-800 w-full max-w-md rounded-3xl shadow-2xl p-8 space-y-6 animate-in zoom-in-95 duration-300",children:[v.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[v.jsx("div",{className:"w-16 h-16 bg-red-500/10 rounded-2xl flex items-center justify-center text-red-500",children:v.jsx(Bp,{size:32})}),v.jsx("h2",{className:"text-2xl font-black text-white tracking-tight",children:"Launch Stream"}),v.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Enter your YouTube stream link or ID to connect."})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"relative",children:[v.jsx("input",{autoFocus:!0,type:"text",placeholder:"YouTube Studio URL or ID...",className:"w-full bg-slate-950 border border-slate-700 rounded-xl p-4 text-white placeholder:text-slate-600 focus:outline-none focus:border-indigo-500 transition-all font-medium pr-12",onKeyDown:me=>{me.key==="Enter"&&(r({...t,youtubeVideoId:me.target.value}),G(!1))}}),v.jsx("button",{onClick:me=>{const Se=me.currentTarget.previousSibling;r({...t,youtubeVideoId:Se.value}),G(!1)},className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-all",children:v.jsx(Xy,{size:20,fill:"currentColor"})})]}),v.jsxs("div",{className:"flex items-start gap-2 text-[10px] text-slate-500 bg-slate-950/50 p-3 rounded-lg border border-slate-800/50",children:[v.jsx(Fp,{size:14,className:"shrink-0"}),v.jsxs("p",{children:["Handles URLs like ",v.jsx("code",{children:"studio.youtube.com/video/ID/livestreaming"})]})]})]}),v.jsxs("div",{className:"flex justify-between items-center pt-2",children:[v.jsx("button",{onClick:()=>G(!1),className:"text-slate-500 hover:text-white text-xs font-bold uppercase tracking-widest transition-colors",children:"Skip YouTube"}),v.jsx("button",{onClick:()=>{G(!1),P(!0)},className:"text-indigo-400 hover:text-indigo-300 text-xs font-bold uppercase tracking-widest transition-colors",children:"Edit Config"})]})]})}),D&&v.jsx(EE,{settings:t,currentQuota:o,onTriggerTest:he,onSave:(me,Se)=>{r(me),Se!==void 0&&a(Se),P(!1)},onClose:()=>P(!1)})]})},yg=document.getElementById("root");if(!yg)throw new Error("Could not find root element to mount to");const DE=k_.createRoot(yg);DE.render(v.jsx(Sp.StrictMode,{children:v.jsx(hy,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:v.jsx(PE,{})})}));
